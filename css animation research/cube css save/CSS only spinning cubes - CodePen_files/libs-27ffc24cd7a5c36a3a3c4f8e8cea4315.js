/*! jQuery UI - v1.10.4 - 2014-01-30
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.resizable.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})})(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(arguments.length===1)return o[n]===t?null:o[n];o[n]=r}else{if(arguments.length===1)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.helper==="original"&&!e.contains(this.element[0].ownerDocument,this.element[0])?!1:(this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=n.css("overflow")!=="hidden",this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=t.pageX,f=t.pageY;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(g<u-v||m>a+v||b<f-v||y>l+v||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName
.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=Math.abs(o.parentData.left)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(p-f>0?(t.size.height=p,t.position.top=s.top-c):(t.size.height=f,t.position.top=s.top+i.height-f),h-a>0?(t.size.width=h,t.position.left=s.left-l):(t.size.width=a,t.position.left=s.left+i.width-a))}})}(jQuery),function(){"use strict";var Faye={VERSION:"1.0.1",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:typeof window!="undefined"?window:global,extend:function(e,t,n){if(!t)return e;for(var r in t){if(!t.hasOwnProperty(r))continue;if(e.hasOwnProperty(r)&&n===!1)continue;e[r]!==t[r]&&(e[r]=t[r])}return e},random:function(e){return e=e||this.ID_LENGTH,csprng(e,36)},clientIdFromMessages:function(e){var t=this.filter([].concat(e),function(e){return e.channel==="/meta/connect"});return t[0]&&t[0].clientId},copyObject:function(e){var t,n,r;if(e instanceof Array){t=[],n=e.length;while(n--)t[n]=Faye.copyObject(e[n]);return t}if(typeof e=="object"){t=e===null?null:{};for(r in e)t[r]=Faye.copyObject(e[r]);return t}return e},commonElement:function(e,t){for(var n=0,r=e.length;n<r;n++)if(this.indexOf(t,e[n])!==-1)return e[n];return null},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},map:function(e,t,n){if(e.map)return e.map(t,n);var r=[];if(e instanceof Array)for(var i=0,s=e.length;i<s;i++)r.push(t.call(n||null,e[i],i));else for(var o in e){if(!e.hasOwnProperty(o))continue;r.push(t.call(n||null,o,e[o]))}return r},filter:function(e,t,n){if(e.filter)return e.filter(t,n);var r=[];for(var i=0,s=e.length;i<s;i++)t.call(n||null,e[i],i)&&r.push(e[i]);return r},asyncEach:function(e,t,n,r){var i=e.length,s=-1,o=0,u=!1,a=function(){o-=1,s+=1;if(s===i)return n&&n.call(r);t(e[s],l)},f=function(){if(u)return;u=!0;while(o>0)a();u=!1},l=function(){o+=1,f()};l()},toJSON:function(e){return this.stringify?this.stringify(e,function(e,t){return this[e]instanceof Array?this[e]:t}):JSON.stringify(e)}};typeof module!="undefined"?module.exports=Faye:typeof window!="undefined"&&(window.Faye=Faye),Faye.Class=function(e,t){typeof e!="function"&&(t=e,e=Object);var n=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},r=function(){};return r.prototype=e.prototype,n.prototype=new r,Faye.extend(n.prototype,t),n},function(){function n(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}var e=Faye.EventEmitter=function(){},t=typeof Array.isArray=="function"?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"};e.prototype.emit=function(e){if(e==="error")if(!this._events||!this._events.error||t(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var n=this._events[e];if(!n)return!1;if(typeof n=="function"){switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:var r=Array.prototype.slice.call(arguments,1);n.apply(this,r)}return!0}if(t(n)){var r=Array.prototype.slice.call(arguments,1),i=n.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,r);return!0}return!1},e.prototype.addListener=function(e,n){if("function"!=typeof n)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",e,n),this._events[e]?t(this._events[e])?this._events[e].push(n):this._events[e]=[this._events[e],n]:this._events[e]=n,this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},e.prototype.removeListener=function(e,r){if("function"!=typeof r)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var i=this._events[e];if(t(i)){var s=n(i,r);if(s<0)return this;i.splice(s,1),i.length==0&&delete this._events[e]}else this._events[e]===r&&delete this._events[e];return this},e.prototype.removeAllListeners=function(e){return arguments.length===0?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},e.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),t(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}(),Faye.Namespace=Faye.Class({initialize:function(){this._used={}},exists:function(e){return this._used.hasOwnProperty(e)},generate:function(){var e=Faye.random();while(this._used.hasOwnProperty(e))e=Faye.random();return this._used[e]=e},release:function(e){delete this._used[e]}}),function(){var e=setTimeout,t;typeof setImmediate=="function"?t=function(e){setImmediate(e)}:typeof process=="object"&&process.nextTick?t=function(e){process.nextTick(e)}:t=function(t){e(t,0)};var n=0,r=1,i=2,s=function(e){return e},o=function(e){throw e},u=function(e){this._state=n,this._callbacks=[],this._errbacks=[];if(typeof e!="function")return;var t=this;e(function(e){h(t,e)},function(e){p(t,e)})};u.prototype.then=function(e,t){var n={},r=this;return n.promise=new u(function(i,s){n.fulfill=i,n.reject=s,a(r,e,n),f(r,t,n)}),n.promise};var a=function(e,t,i){typeof t!="function"&&(t=s);var o=function(e){l(t,e,i)};e._state===n?e._callbacks.push(o):e._state===r&&o(e._value)},f=function(e,t,r){typeof t!="function"&&(t=o);var s=function(e){l(t,e,r)};e._state===n?e._errbacks.push(s):e._state===i&&s(e._reason)},l=function(e,n,r){t(function(){c(e,n,r)})},c=function(e,t,n){var r=!1,i,o,u;try{i=e(t),o=typeof i,u=i!==null&&(o==="function"||o==="object")&&i.then;if(i===n.promise)return n.reject(new TypeError("Recursive promise chain detected"));if(typeof u!="function")return n.fulfill(i);u.call(i,function(e){if(r)return;r=!0,c(s,e,n)},function(e){if(r)return;r=!0,n.reject(e)})}catch(a){if(r)return;r=!0,n.reject(a)}},h=u.fulfill=u.resolve=function(e,t){if(e._state!==n)return;e._state=r,e._value=t,e._errbacks=[];var i=e._callbacks,s;while(s=i.shift())s(t)},p=u.reject=function(e,t){if(e._state!==n)return;e._state=i,e._reason=t,e._callbacks=[];var r=e._errbacks,s;while(s=r.shift())s(t)};u.defer=t,u.deferred=u.pending=function(){var e={};return e.promise=new u(function(t,n){e.fulfill=e.resolve=t,e.reject=n}),e},u.fulfilled=u.resolved=function(e){return new u(function(t,n){t(e)})},u.rejected=function(e){return new u(function(t,n){n(e)})},typeof Faye=="undefined"?module.exports=u:Faye.Promise=u}(),Faye.Set=Faye.Class({initialize:function(){this._index={}},add:function(e){var t=e.id!==undefined?e.id:e;return this._index.hasOwnProperty(t)?!1:(this._index[t]=e,!0)},forEach:function(e,t){for(var n in this._index)this._index.hasOwnProperty(n)&&e.call(t,this._index[n])},isEmpty:function(){for(var e in this._index)if(this._index.hasOwnProperty(e))return!1;return!0},member:function(e){for(var t in this._index)if(this._index[t]===e)return!0;return!1},remove:function(e){var t=e.id!==undefined?e.id:e,n=this._index[t];return delete this._index[t],n},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}}),Faye.URI={isURI:function(e){return e&&e.protocol&&e.host&&e.path},isSameOrigin:function(e){var t=Faye.ENV.location;return e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port},parse:function(e){if(typeof e!="string")return e;var t={},n,r,i,s,o,u,a=function(n,r){e=e.replace(r,function(e){return t[n]=e,""}),t[n]=t[n]||""};a("protocol",/^[a-z]+\:/i),a("host",/^\/\/[^\/\?#]+/),!/^\//.test(e)&&!t.host&&(e=Faye.ENV.location.pathname.replace(/[^\/]*$/,"")+e),a("pathname",/^[^\?#]*/),a("search",/^\?[^#]*/),a("hash",/^#.*/),t.protocol=t.protocol||Faye.ENV.location.protocol,t.host?(t.host=t.host.substr(2),n=t.host.split(":"),t.hostname=n[0],t.port=n[1]||""):(t.host=Faye.ENV.location.host,t.hostname=Faye.ENV.location.hostname,t.port=Faye.ENV.location.port),t.pathname=t.pathname||"/",t.path=t.pathname+t.search,r=t.search.replace(/^\?/,""),i=r?r.split("&"):[],u={};for(s=0,o=i.length;s<o;s++)n=i[s].split("="),u[decodeURIComponent(n[0]||"")]=decodeURIComponent(n[1]||"");return t.query=u,t.href=this.stringify(t),t},stringify:function(e){var t=e.protocol+"//"+e.hostname;return e.port&&(t+=":"+e.port),t+=e.pathname+this.queryString(e.query)+(e.hash||""),t},queryString:function(e){var t=[];for(var n in e){if(!e.hasOwnProperty(n))continue;t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}return t.length===0?"":"?"+t.join("&")}},Faye.Error=Faye.Class({initialize:function(e,t,n){this.code=e,this.params=Array.prototype.slice.call(t),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}}),Faye.Error.parse=function(e){e=e||"";if(!Faye.Grammar.ERROR.test(e))return new this(null,[],e);var t=e.split(":"),n=parseInt(t[0]),r=t[1].split(","),e=t[2];return new this(n,r,e)},Faye.Error.versionMismatch=function(){return(new this(300,arguments,"Version mismatch")).toString()},Faye.Error.conntypeMismatch=function(){return(new this(301,arguments,"Connection types not supported")).toString()},Faye.Error.extMismatch=function(){return(new this(302,arguments,"Extension mismatch")).toString()},Faye.Error.badRequest=function(){return(new this(400,arguments,"Bad request")).toString()},Faye.Error.clientUnknown=function(){return(new this(401,arguments,"Unknown client")).toString()},Faye.Error.parameterMissing=function(){return(new this(402,arguments,"Missing required parameter")).toString()},Faye.Error.channelForbidden=function(){return(new this(403,arguments,"Forbidden channel")).toString()},Faye.Error.channelUnknown=function(){return(new this(404,arguments,"Unknown channel")).toString()},Faye.Error.channelInvalid=function(){return(new this(405,arguments,"Invalid channel")).toString()},Faye.Error.extUnknown=function(){return(new this(406,arguments,"Unknown extension")).toString()},Faye.Error.publishFailed=function(){return(new this(407,arguments,"Failed to publish")).toString()},Faye.Error.serverError=function(){return(new this(500,arguments,"Internal server error")).toString()},Faye.Deferrable={then:function(e,t){var n=this;return this._promise||(this._promise=new Faye.Promise(function(e,t){n._fulfill=e,n._reject=t})),arguments.length===0?this._promise:this._promise.then(e,t)},callback:function(e,t){return this.then(function(n){e.call(t,n)})},errback:function(e,t){return this.then(null,function(n){e.call(t,n)})},timeout:function(e,t){this.then();var n=this;this._timer=Faye.ENV.setTimeout(function(){n._reject(t)},e*1e3)},setDeferredStatus:function(e,t){this._timer&&Faye.ENV.clearTimeout(this._timer);var n=this.then();e==="succeeded"?this._fulfill(t):e==="failed"?this._reject(t):delete this._promise}},Faye.Publisher={countListeners:function(e){return this.listeners(e).length},bind:function(e,t,n){var r=Array.prototype.slice,i=function(){t.apply(n,r.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([e,t,n,i]),this.on(e,i)},unbind:function(e,t,n){this._listeners=this._listeners||[];var r=this._listeners.length,i;while(r--){i=this._listeners[r];if(i[0]!==e)continue;if(!(!t||i[1]===t&&i[2]===n))continue;this._listeners.splice(r,1),this.removeListener(e,i[3])}}},Faye.extend(Faye.Publisher,Faye.EventEmitter.prototype),Faye.Publisher.trigger=Faye.Publisher.emit,Faye.Timeouts={addTimeout:function(e,t,n,r){this._timeouts=this._timeouts||{};if(this._timeouts.hasOwnProperty(e))return;var i=this;this._timeouts[e]=Faye.ENV.setTimeout(function(){delete i._timeouts[e],n.call(r)},1e3*t)},removeTimeout:function(e){this._timeouts=this._timeouts||{};var t=this._timeouts[e];if(!t)return;clearTimeout(t),delete this._timeouts[e]},removeAllTimeouts:function(){this._timeouts=this._timeouts||{};for(var e in this._timeouts)this.removeTimeout(e)}},Faye.Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(e,t){if(!Faye.logger)return;var e=Array.prototype.slice.apply(e),n="[Faye",r=this.className,i=e.shift().replace(/\?/g,function(){try{return Faye.toJSON(e.shift())}catch(t){return"[Object]"}});for(var s in Faye){if(r)continue;if(typeof Faye[s]!="function")continue;this instanceof Faye[s]&&(r=s)}r&&(n+="."+r),n+="] ",typeof Faye.logger[t]=="function"?Faye.logger[t](n+i):typeof Faye.logger=="function"&&Faye.logger(n+i)}},function(){for(var e in Faye.Logging.LOG_LEVELS)(function(e,t){Faye.Logging[e]=function(){this.writeLog(arguments,e)}})(e,Faye.Logging.LOG_LEVELS[e])}(),Faye.Grammar={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/},Faye.Extensible={addExtension:function(e){this._extensions=this._extensions||[],this._extensions.push(e),e.added&&e.added(this)},removeExtension:function(e){if(!this._extensions)return;var t=this._extensions.length;while(t--){if(this._extensions[t]!==e)continue;this._extensions.splice(t,1),e.removed&&e.removed(this)}},pipeThroughExtensions:function(e,t,n,r,i){this.debug("Passing through ? extensions: ?",e,t);if(!this._extensions)return r.call(i,t);var s=this._extensions.slice(),o=function(t){if(!t)return r.call(i,t);var u=s.shift();if(!u)return r.call(i,t);var a=u[e];if(!a)return o(t);a.length>=3?u[e](t,n,o):u[e](t,o)};o(t)}},Faye.extend(Faye.Extensible,Faye.Logging),Faye.Channel=Faye.Class({initialize:function(e){this.id=this.name=e},push:function(e){this.trigger("message",e)},isUnused:function(){return this.countListeners("message")===0}}),Faye.extend(Faye.Channel.prototype,Faye.Publisher),Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(e){var t=this.parse(e),n=["/**",e],r=t.slice();r[r.length-1]="*",n.push(this.unparse(r));for(var i=1,s=t.length;i<s;i++)r=t.slice(0,i),r.push("**"),n.push(this.unparse(r));return n},isValid:function(e){return Faye.Grammar.CHANNEL_NAME.test(e)||Faye.Grammar.CHANNEL_PATTERN.test(e)},parse:function(e){return this.isValid(e)?e.split("/").slice(1):null},unparse:function(e){return"/"+e.join("/")},isMeta:function(e){var t=this.parse(e);return t?t[0]===this.META:null},isService:function(e){var t=this.parse(e);return t?t[0]===this.SERVICE:null},isSubscribable:function(e){return this.isValid(e)?!this.isMeta(e)&&!this.isService(e):null},Set:Faye.Class({initialize:function(){this._channels={}},getKeys:function(){var e=[];for(var t in this._channels)e.push(t);return e},remove:function(e){delete this._channels[e]},hasSubscription:function(e){return this._channels.hasOwnProperty(e)},subscribe:function(e,t,n){if(!t)return;var r;for(var i=0,s=e.length;i<s;i++){r=e[i];var o=this._channels[r]=this._channels[r]||new Faye.Channel(r);o.bind("message",t,n)}},unsubscribe:function(e,t,n){var r=this._channels[e];return r?(r.unbind("message",t,n),r.isUnused()?(this.remove(e),!0):!1):!1},distributeMessage:function(e){var t=Faye.Channel.expand(e.channel);for(var n=0,r=t.length;n<r;n++){var i=this._channels[t[n]];i&&i.trigger("message",e.data)}}})}),Faye.Envelope=Faye.Class({initialize:function(e,t){this.id=e.id,this.message=e,t!==undefined&&this.timeout(t/1e3,!1)}}),Faye.extend(Faye.Envelope.prototype,Faye.Deferrable),Faye.Publication=Faye.Class(Faye.Deferrable),Faye.Subscription=Faye.Class({initialize:function(e,t,n,r){this._client=e,this._channels=t,this._callback=n,this._context=r,this._cancelled=!1},cancel:function(){if(this._cancelled)return;this._client.unsubscribe(this._channels,this._callback,this._context),this._cancelled=!0},unsubscribe:function(){this.cancel()}}),Faye.extend(Faye.Subscription.prototype,Faye.Deferrable),Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT
:60,DEFAULT_RETRY:5,MAX_REQUEST_SIZE:2048,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(e,t){this.info("New client created for ?",e),this._options=t||{},this.endpoint=Faye.URI.parse(e||this.DEFAULT_ENDPOINT),this.endpoints=this._options.endpoints||{},this.transports={},this.cookies=Faye.CookieJar&&new Faye.CookieJar,this.headers={},this.ca=this._options.ca,this._disabled=[],this._retry=this._options.retry||this.DEFAULT_RETRY;for(var n in this.endpoints)this.endpoints[n]=Faye.URI.parse(this.endpoints[n]);this.maxRequestSize=this.MAX_REQUEST_SIZE,this._state=this.UNCONNECTED,this._channels=new Faye.Channel.Set,this._messageId=0,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(this._options.interval||this.INTERVAL),timeout:1e3*(this._options.timeout||this.CONNECTION_TIMEOUT)},Faye.Event&&Faye.ENV.onbeforeunload!==undefined&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.indexOf(this._disabled,"autodisconnect")<0&&this.disconnect()},this)},disable:function(e){this._disabled.push(e)},setHeader:function(e,t){this.headers[e]=t},handshake:function(e,t){if(this._advice.reconnect===this.NONE)return;if(this._state!==this.UNCONNECTED)return;this._state=this.CONNECTING;var n=this;this.info("Initiating handshake with ?",Faye.URI.stringify(this.endpoint)),this._selectTransport(Faye.MANDATORY_CONNECTION_TYPES),this._send({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:[this._transport.connectionType]},function(r){r.successful?(this._state=this.CONNECTED,this._clientId=r.clientId,this._selectTransport(r.supportedConnectionTypes),this.info("Handshake successful: ?",this._clientId),this.subscribe(this._channels.getKeys(),!0),e&&Faye.Promise.defer(function(){e.call(t)})):(this.info("Handshake unsuccessful"),Faye.ENV.setTimeout(function(){n.handshake(e,t)},this._advice.interval),this._state=this.UNCONNECTED)},this)},connect:function(e,t){if(this._advice.reconnect===this.NONE)return;if(this._state===this.DISCONNECTED)return;if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(e,t)},this);this.callback(e,t);if(this._state!==this.CONNECTED)return;this.info("Calling deferred actions for ?",this._clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown");if(this._connectRequest)return;this._connectRequest=!0,this.info("Initiating connection for ?",this._clientId),this._send({channel:Faye.Channel.CONNECT,clientId:this._clientId,connectionType:this._transport.connectionType},this._cycleConnection,this)},disconnect:function(){this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._clientId),this._send({channel:Faye.Channel.DISCONNECT,clientId:this._clientId},function(e){if(!e.successful)return;this._transport.close(),delete this._transport},this),this._transport&&this._transport.close(),delete this._transport,this.info("Clearing channel listeners for ?",this._clientId),this._channels=new Faye.Channel.Set},subscribe:function(e,t,n){if(e instanceof Array)return Faye.map(e,function(e){return this.subscribe(e,t,n)},this);var r=new Faye.Subscription(this,e,t,n),i=t===!0,s=this._channels.hasSubscription(e);return s&&!i?(this._channels.subscribe([e],t,n),r.setDeferredStatus("succeeded"),r):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._clientId,e),i||this._channels.subscribe([e],t,n),this._send({channel:Faye.Channel.SUBSCRIBE,clientId:this._clientId,subscription:e},function(i){if(!i.successful)return r.setDeferredStatus("failed",Faye.Error.parse(i.error)),this._channels.unsubscribe(e,t,n);var s=[].concat(i.subscription);this.info("Subscription acknowledged for ? to ?",this._clientId,s),r.setDeferredStatus("succeeded")},this)},this),r)},unsubscribe:function(e,t,n){if(e instanceof Array)return Faye.map(e,function(e){return this.unsubscribe(e,t,n)},this);var r=this._channels.unsubscribe(e,t,n);if(!r)return;this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._clientId,e),this._send({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._clientId,subscription:e},function(e){if(!e.successful)return;var t=[].concat(e.subscription);this.info("Unsubscription acknowledged for ? from ?",this._clientId,t)},this)},this)},publish:function(e,t){var n=new Faye.Publication;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._clientId,e,t),this._send({channel:e,data:t,clientId:this._clientId},function(e){e.successful?n.setDeferredStatus("succeeded"):n.setDeferredStatus("failed",Faye.Error.parse(e.error))},this)},this),n},receiveMessage:function(e){var t=e.id,n,r;e.successful!==undefined&&(r=this._responseCallbacks[t],delete this._responseCallbacks[t]),this.pipeThroughExtensions("incoming",e,null,function(e){if(!e)return;e.advice&&this._handleAdvice(e.advice),this._deliverMessage(e),r&&r[0].call(r[1],e)},this);if(this._transportUp===!0)return;this._transportUp=!0,this.trigger("transport:up")},messageError:function(e,t){var n=this._retry,r=this,i,s,o;for(var u=0,a=e.length;u<a;u++)s=e[u],i=s.id,t?this._transportSend(s):Faye.ENV.setTimeout(function(){r._transportSend(s)},n*1e3);if(t||this._transportUp===!1)return;this._transportUp=!1,this.trigger("transport:down")},_selectTransport:function(e){Faye.Transport.get(this,e,this._disabled,function(e){this.debug("Selected ? transport for ?",e.connectionType,Faye.URI.stringify(e.endpoint));if(e===this._transport)return;this._transport&&this._transport.close(),this._transport=e},this)},_send:function(e,t,n){if(!this._transport)return;e.id=e.id||this._generateMessageId(),this.pipeThroughExtensions("outgoing",e,null,function(e){if(!e)return;t&&(this._responseCallbacks[e.id]=[t,n]),this._transportSend(e)},this)},_transportSend:function(e){if(!this._transport)return;var t=1.2*(this._advice.timeout||this._retry*1e3),n=new Faye.Envelope(e,t);n.errback(function(t){this.messageError([e],t)},this),this._transport.send(n)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_handleAdvice:function(e){Faye.extend(this._advice,e),this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._clientId=null,this._cycleConnection())},_deliverMessage:function(e){if(!e.channel||e.data===undefined)return;this.info("Client ? calling listeners for ? with ?",this._clientId,e.channel,e.data),this._channels.distributeMessage(e)},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._clientId));var e=this;Faye.ENV.setTimeout(function(){e.connect()},this._advice.interval)}}),Faye.extend(Faye.Client.prototype,Faye.Deferrable),Faye.extend(Faye.Client.prototype,Faye.Publisher),Faye.extend(Faye.Client.prototype,Faye.Logging),Faye.extend(Faye.Client.prototype,Faye.Extensible),Faye.Transport=Faye.extend(Faye.Class({MAX_DELAY:0,batching:!0,initialize:function(e,t){this._client=e,this.endpoint=t,this._outbox=[]},close:function(){},encode:function(e){return""},send:function(e){var t=e.message;this.debug("Client ? sending message to ?: ?",this._client._clientId,Faye.URI.stringify(this.endpoint),t);if(!this.batching)return this.request([e]);this._outbox.push(e);if(t.channel===Faye.Channel.HANDSHAKE)return this.addTimeout("publish",.01,this.flush,this);t.channel===Faye.Channel.CONNECT&&(this._connectMessage=t),this.flushLargeBatch(),this.addTimeout("publish",this.MAX_DELAY,this.flush,this)},flush:function(){this.removeTimeout("publish"),this._outbox.length>1&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this.request(this._outbox),this._connectMessage=null,this._outbox=[]},flushLargeBatch:function(){var e=this.encode(this._outbox);if(e.length<this._client.maxRequestSize)return;var t=this._outbox.pop();this.flush(),t&&this._outbox.push(t)},receive:function(e,t){var n=e.length;while(n--)e[n].setDeferredStatus("succeeded");t=[].concat(t),this.debug("Client ? received from ?: ?",this._client._clientId,Faye.URI.stringify(this.endpoint),t);for(var r=0,n=t.length;r<n;r++)this._client.receiveMessage(t[r])},handleError:function(e,t){var n=e.length;while(n--)e[n].setDeferredStatus("failed",t)},_getCookies:function(){var e=this._client.cookies;return e?e.getCookies({domain:this.endpoint.hostname,path:this.endpoint.path,secure:this.endpoint.protocol==="https:"}).toValueString():""},_storeCookies:function(e){if(!e||!this._client.cookies)return;e=[].concat(e);var t;for(var n=0,r=e.length;n<r;n++)t=this._client.cookies.setCookie(e[n]),t=t[0]||t,t.domain=t.domain||this.endpoint.hostname}}),{get:function(e,t,n,r,i){var s=e.endpoint;Faye.asyncEach(this._transports,function(o,u){var a=o[0],f=o[1],l=e.endpoints[a]||s;if(Faye.indexOf(n,a)>=0)return u();if(Faye.indexOf(t,a)<0)return f.isUsable(e,l,function(){}),u();f.isUsable(e,l,function(t){if(!t)return u();var n=f.hasOwnProperty("create")?f.create(e,l):new f(e,l);r.call(i,n)})},function(){throw new Error("Could not find a usable connection type for "+Faye.URI.stringify(s))})},register:function(e,t){this._transports.push([e,t]),t.prototype.connectionType=e},_transports:[]}),Faye.extend(Faye.Transport.prototype,Faye.Logging),Faye.extend(Faye.Transport.prototype,Faye.Timeouts),Faye.Event={_registry:[],on:function(e,t,n,r){var i=function(){n.call(r)};e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i),this._registry.push({_element:e,_type:t,_callback:n,_context:r,_handler:i})},detach:function(e,t,n,r){var i=this._registry.length,s;while(i--){s=this._registry[i];if(e&&e!==s._element||t&&t!==s._type||n&&n!==s._callback||r&&r!==s._context)continue;s._element.removeEventListener?s._element.removeEventListener(s._type,s._handler,!1):s._element.detachEvent("on"+s._type,s._handler),this._registry.splice(i,1),s=null}}},Faye.ENV.onunload!==undefined&&Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event),typeof JSON!="object"&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;Faye.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")},typeof JSON.stringify!="function"&&(JSON.stringify=Faye.stringify),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(e,t){this.callback(function(){e.call(t,!0)}),this.errback(function(){e.call(t,!1)}),this.connect()},request:function(e){this._pending=this._pending||new Faye.Set;for(var t=0,n=e.length;t<n;t++)this._pending.add(e[t]);this.callback(function(t){if(!t)return;var n=Faye.map(e,function(e){return e.message});t.send(Faye.toJSON(n))},this),this.connect()},connect:function(){if(Faye.Transport.WebSocket._unloaded)return;this._state=this._state||this.UNCONNECTED;if(this._state!==this.UNCONNECTED)return;this._state=this.CONNECTING;var e=this._createSocket();if(!e)return this.setDeferredStatus("failed");var t=this;e.onopen=function(){e.headers&&t._storeCookies(e.headers["set-cookie"]),t._socket=e,t._state=t.CONNECTED,t._everConnected=!0,t._ping(),t.setDeferredStatus("succeeded",e)};var n=!1;e.onclose=e.onerror=function(){if(n)return;n=!0;var r=t._state===t.CONNECTED;e.onopen=e.onclose=e.onerror=e.onmessage=null,delete t._socket,t._state=t.UNCONNECTED,t.removeTimeout("ping"),t.setDeferredStatus("unknown");var i=t._pending?t._pending.toArray():[];delete t._pending,r?t.handleError(i,!0):t._everConnected?t.handleError(i):t.setDeferredStatus("failed")},e.onmessage=function(e){var n=JSON.parse(e.data),r=[],i;if(!n)return;n=[].concat(n);for(var s=0,o=n.length;s<o;s++){if(n[s].successful===undefined)continue;i=t._pending.remove(n[s]),i&&r.push(i)}t.receive(r,n)}},close:function(){if(!this._socket)return;this._socket.close()},_createSocket:function(){var e=Faye.Transport.WebSocket.getSocketUrl(this.endpoint),t={headers:Faye.copyObject(this._client.headers),ca:this._client.ca};t.headers.Cookie=this._getCookies();if(Faye.WebSocket)return new Faye.WebSocket.Client(e,[],t);if(Faye.ENV.MozWebSocket)return new MozWebSocket(e);if(Faye.ENV.WebSocket)return new WebSocket(e)},_ping:function(){if(!this._socket)return;this._socket.send("[]"),this.addTimeout("ping",this._client._advice.timeout/2e3,this._ping,this)}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(e,t){var n=e.transports.websocket=e.transports.websocket||{};return n[t.href]=n[t.href]||new this(e,t),n[t.href]},getSocketUrl:function(e){return e=Faye.copyObject(e),e.protocol=this.PROTOCOLS[e.protocol],Faye.URI.stringify(e)},isUsable:function(e,t,n,r){this.create(e,t).isUsable(n,r)}}),Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable),Faye.Transport.register("websocket",Faye.Transport.WebSocket),Faye.Event&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.Transport.WebSocket._unloaded=!0}),Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(e,t){Faye.Transport.prototype.initialize.call(this,e,t);if(!Faye.ENV.EventSource)return this.setDeferredStatus("failed");this._xhr=new Faye.Transport.XHR(e,t),t=Faye.copyObject(t),t.pathname+="/"+e._clientId;var n=new EventSource(Faye.URI.stringify(t)),r=this;n.onopen=function(){r._everConnected=!0,r.setDeferredStatus("succeeded")},n.onerror=function(){r._everConnected?r._client.messageError([]):(r.setDeferredStatus("failed"),n.close())},n.onmessage=function(e){r.receive([],JSON.parse(e.data))},this._socket=n},close:function(){if(!this._socket)return;this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket},isUsable:function(e,t){this.callback(function(){e.call(t,!0)}),this.errback(function(){e.call(t,!1)})},encode:function(e){return this._xhr.encode(e)},request:function(e){this._xhr.request(e)}}),{isUsable:function(e,t,n,r){var i=e._clientId;if(!i)return n.call(r,!1);Faye.Transport.XHR.isUsable(e,t,function(i){if(!i)return n.call(r,!1);this.create(e,t).isUsable(n,r)},this)},create:function(e,t){var n=e.transports.eventsource=e.transports.eventsource||{},r=e._clientId;t=Faye.copyObject(t),t.pathname+="/"+(r||"");var i=Faye.URI.stringify(t);return n[i]=n[i]||new this(e,t),n[i]}}),Faye.extend(Faye.Transport.EventSource.prototype,Faye.Deferrable),Faye.Transport.register("eventsource",Faye.Transport.EventSource),Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{encode:function(e){var t=Faye.map(e,function(e){return e.message});return Faye.toJSON(t)},request:function(e){var t=this.endpoint.path,n=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,r=this;n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Pragma","no-cache"),n.setRequestHeader("X-Requested-With","XMLHttpRequest");var i=this._client.headers;for(var s in i){if(!i.hasOwnProperty(s))continue;n.setRequestHeader(s,i[s])}var o=function(){n.abort()};Faye.Event.on(Faye.ENV,"beforeunload",o),n.onreadystatechange=function(){if(!n||n.readyState!==4)return;var t=null,i=n.status,s=n.responseText,u=i>=200&&i<300||i===304||i===1223;Faye.Event.detach(Faye.ENV,"beforeunload",o),n.onreadystatechange=function(){},n=null;if(!u)return r.handleError(e);try{t=JSON.parse(s)}catch(a){}t?r.receive(e,t):r.handleError(e)},n.send(this.encode(e))}}),{isUsable:function(e,t,n,r){n.call(r,Faye.URI.isSameOrigin(t))}}),Faye.Transport.register("long-polling",Faye.Transport.XHR),Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{encode:function(e){var t=Faye.map(e,function(e){return e.message});return"message="+encodeURIComponent(Faye.toJSON(t))},request:function(e){var t=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,n=new t,r=this._client.headers,i=this,s;n.open("POST",Faye.URI.stringify(this.endpoint),!0);if(n.setRequestHeader){n.setRequestHeader("Pragma","no-cache");for(s in r){if(!r.hasOwnProperty(s))continue;n.setRequestHeader(s,r[s])}}var o=function(){if(!n)return!1;n.onload=n.onerror=n.ontimeout=n.onprogress=null,n=null};n.onload=function(){var t=null;try{t=JSON.parse(n.responseText)}catch(r){}o(),t?i.receive(e,t):i.handleError(e)},n.onerror=n.ontimeout=function(){o(),i.handleError(e)},n.onprogress=function(){},n.send(this.encode(e))}}),{isUsable:function(e,t,n,r){if(Faye.URI.isSameOrigin(t))return n.call(r,!1);if(Faye.ENV.XDomainRequest)return n.call(r,t.protocol===Faye.ENV.location.protocol);if(Faye.ENV.XMLHttpRequest){var i=new Faye.ENV.XMLHttpRequest;return n.call(r,i.withCredentials!==undefined)}return n.call(r,!1)}}),Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS),Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{encode:function(e){var t=Faye.map(e,function(e){return e.message}),n=Faye.copyObject(this.endpoint);return n.query.message=Faye.toJSON(t),n.query.jsonp="__jsonp"+Faye.Transport.JSONP._cbCount+"__",Faye.URI.stringify(n)},request:function(e){var t=Faye.map(e,function(e){return e.message}),n=document.getElementsByTagName("head")[0],r=document.createElement("script"),i=Faye.Transport.JSONP.getCallbackName(),s=Faye.copyObject(this.endpoint),o=this;s.query.message=Faye.toJSON(t),s.query.jsonp=i,Faye.ENV[i]=function(t){if(!Faye.ENV[i])return!1;Faye.ENV[i]=undefined;try{delete Faye.ENV[i]}catch(n){}r.parentNode.removeChild(r),o.receive(e,t)},r.type="text/javascript",r.src=Faye.URI.stringify(s),n.appendChild(r)}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(e,t,n,r){n.call(r,!0)}}),Faye.Transport.register("callback-polling",Faye.Transport.JSONP)}(),function(e){if(typeof exports=="object"&&typeof module=="object")module.exports=e();else{if(typeof define=="function"&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function T(e,n){if(!(this instanceof T))return new T(e,n);this.options=n=n||{},Mo(Yr,n,!1),F(n);var r=n.value;typeof r=="string"&&(r=new Ts(r,n.mode)),this.doc=r;var i=this.display=new N(e,r);i.wrapper.CodeMirror=this,P(this),_(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!m&&zn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Eo},t&&setTimeout(_o(Un,this,!0),20),Vn(this),Go();var s=this;Cn(this,function(){s.curOp.forceUpdate=!0,Ls(s,r),n.autofocus&&!m||Wo()==i.input?setTimeout(_o(Sr,s),20):xr(s);for(var e in Zr)Zr.hasOwnProperty(e)&&Zr[e](s,n[e],ti);for(var t=0;t<si.length;++t)si[t](s)})}function N(e,t){var r=this,i=r.input=Io("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");u?i.style.width="1000px":i.setAttribute("wrap","off"),v&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),r.inputDiv=Io("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=Io("div",[Io("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=Io("div",[Io("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=Io("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=Io("div",null,"CodeMirror-gutter-filler"),r.lineDiv=Io("div",null,"CodeMirror-code"),r.selectionDiv=Io("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=Io("div",null,"CodeMirror-cursors"),r.measure=Io("div",null,"CodeMirror-measure"),r.lineMeasure=Io("div",null,"CodeMirror-measure"),r.lineSpace=Io("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=Io("div",[Io("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=Io("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=Io("div",null,null,"position: absolute; height: "+mo+"px; width: 1px;"),r.gutters=Io("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=Io("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=Io("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),n&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),v&&(i.style.width="0px"),u||(r.scroller.draggable=!0),h&&(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"),n&&(r.scrollbarH.style.minHeight=r.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(r.wrapper):e(r.wrapper),r.viewFrom=r.viewTo=t.first,r.view=[],r.externalMeasured=null,r.viewOffset=0,r.lastSizeC=0,r.updateLineNumbers=null,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new Eo,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null}function C(e){e.doc.mode=T.getMode(e.options,e.doc.modeOption),k(e)}function k(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Wt(e,100),e.state.modeGen++,e.curOp&&_n(e)}function L(e){e.options.lineWrapping?($o(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(Vo(e.display.wrapper,"CodeMirror-wrap"),j(e)),O(e),_n(e),fn(e),setTimeout(function(){q(e)},100)}function A(e){var t=En(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Sn(e.display)-3);return function(i){if($i(e.doc,i))return 0;var s=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(s+=i.widgets[o].height);return n?s+(Math.ceil(i.text.length/r)||1)*t:s+t}}function O(e){var t=e.doc,n=A(e);t.iter(function(e){var t=n(e);t!=e.height&&_s(e,t)})}function M(e){var t=li[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function _(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),fn(e)}function D(e){P(e),_n(e),setTimeout(function(){U(e)},20)}function P(e){var t=e.display.gutters,n=e.options.gutters;Ro(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(Io("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",H(e)}function H(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function B(e){if(e.height==0)return 0;var t=e.text.length,n,r=e;while(n=qi(r)){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}r=e;while(n=Ri(r)){var i=n.find(0,!0);t-=r.text.length-i.from.ch,r=i.to.line,t+=r.text.length-i.to.ch}return t}function j(e){var t=e.display,n=e.doc;t.maxLine=As(n,n.first),t.maxLineLength=B(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=B(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function F(e){var t=Lo(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function I(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Kt(e.display))}}function q(e,t){t||(t=I(e));var n=e.display,r=t.docHeight+mo,i=t.scrollWidth>t.clientWidth,s=r>t.clientHeight;s?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=i?tu(n.measure)+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,r-t.clientHeight+(t.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),i?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=s?tu(n.measure)+"px":"0",n.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),i&&s?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=tu(n.measure)+"px"):n.scrollbarFiller.style.display="",i&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=tu(n.measure)+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="";if(!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(tu(n.measure)===0){var o=g&&!p?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=o;var u=function(t){no(t)!=n.scrollbarV&&no(t)!=n.scrollbarH&&kn(e,Qn)(t)};io(n.scrollbarV,"mousedown",u),io(n.scrollbarH,"mousedown",u)}e.state.checkedOverlayScrollbar=!0}}function R(e,t,n){var r=n&&n.top!=null?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Jt(e));var i=n&&n.bottom!=null?n.bottom:r+e.wrapper.clientHeight,s=Ps(t,r),o=Ps(t,i);if(n&&n.ensure){var u=n.ensure.from.line,a=n.ensure.to.line;if(u<s)return{from:u,to:Ps(t,Hs(As(t,u))+e.wrapper.clientHeight)};if(Math.min(a,t.lastLine())>=o)return{from:Ps(t,Hs(As(t,a))-e.wrapper.clientHeight),to:a}}return{from:s,to:Math.max(o,s+1)}}function U(e){var t=e.display,n=t.view;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var r=X(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,s=r+"px";for(var o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&n[o].gutter&&(n[o].gutter.style.left=s);var u=n[o].alignable;if(u)for(var a=0;a<u.length;a++)u[a].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}function z(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=W(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(Io("div",[Io("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",H(e),!0}return!1}function W(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function X(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function V(e,t,n){var r=e.display.viewFrom,i=e.display.viewTo,s,o=R(e.display,e.doc,t);for(var a=!0;;a=!1){var f=e.display.scroller.clientWidth;if(!$(e,o,n))break;s=!0,e.display.maxLineChanged&&!e.options.lineWrapping&&J(e);var l=I(e);qt(e),K(e,l),q(e,l),u&&e.options.lineWrapping&&Q(e,l);if(a&&e.options.lineWrapping&&f!=e.display.scroller.clientWidth){n=!0;continue}n=!1,t&&t.top!=null&&(t={top:Math.min(l.docHeight-mo-l.clientHeight,t.top)}),o=R(e.display,e.doc,t);if(o.from>=e.display.viewFrom&&o.to<=e.display.viewTo)break}return e.display.updateLineNumbers=null,s&&(fo(e,"update",e),(e.display.viewFrom!=r||e.display.viewTo!=i)&&fo(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)),s}function $(e,t,n){var r=e.display,i=e.doc;if(!r.wrapper.offsetWidth){Pn(e);return}if(!n&&t.from>=r.viewFrom&&t.to<=r.viewTo&&Fn(e)==0)return;z(e)&&Pn(e);var s=Z(e),o=i.first+i.size,u=Math.max(t.from-e.options.viewportMargin,i.first),a=Math.min(o,t.to+e.options.viewportMargin);r.viewFrom<u&&u-r.viewFrom<20&&(u=Math.max(i.first,r.viewFrom)),r.viewTo>a&&r.viewTo-a<20&&(a=Math.min(o,r.viewTo)),x&&(u=Xi(e.doc,u),a=Vi(e.doc,a));var f=u!=r.viewFrom||a!=r.viewTo||r.lastSizeC!=r.wrapper.clientHeight;jn(e,u,a),r.viewOffset=Hs(As(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var l=Fn(e);if(!f&&l==0&&!n)return;var c=Wo();return l>4&&(r.lineDiv.style.display="none"),et(e,r.updateLineNumbers,s),l>4&&(r.lineDiv.style.display=""),c&&Wo()!=c&&c.offsetHeight&&c.focus(),Ro(r.cursorDiv),Ro(r.selectionDiv),f&&(r.lastSizeC=r.wrapper.clientHeight,Wt(e,400)),G(e),!0}function J(e){var t=e.display,n=en(e,t.maxLine,t.maxLine.text.length).left;t.maxLineChanged=!1;var r=Math.max(0,n+3),i=Math.max(0,t.sizer.offsetLeft+r+mo-t.scroller.clientWidth);t.sizer.style.minWidth=r+"px",i<e.doc.scrollLeft&&ar(e,Math.min(t.scroller.scrollLeft,i),!0)}function K(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-mo)+"px"}function Q(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function G(e){var t=e.display,r=t.lineDiv.offsetTop;for(var i=0;i<t.view.length;i++){var s=t.view[i],o;if(s.hidden)continue;if(n){var u=s.node.offsetTop+s.node.offsetHeight;o=u-r,r=u}else{var a=s.node.getBoundingClientRect();o=a.bottom-a.top}var f=s.line.height-o;o<2&&(o=En(t));if(f>.001||f<-0.001){_s(s.line,o),Y(s.line);if(s.rest)for(var l=0;l<s.rest.length;l++)Y(s.rest[l])}}}function Y(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function Z(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:X(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function et(e,t,n){function a(t){var n=t.nextSibling;return u&&g&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}var r=e.display,i=e.options.lineNumbers,s=r.lineDiv,o=s.firstChild,f=r.view,l=r.viewFrom;for(var c=0;c<f.length;c++){var h=f[c];if(!h.hidden)if(!h.node){var p=ft(e,h,l,n);s.insertBefore(p,o)}else{while(o!=h.node)o=a(o);var d=i&&t!=null&&t<=l&&h.lineNumber;h.changes&&(Lo(h.changes,"gutter")>-1&&(d=!1),tt(e,h,l,n)),d&&(Ro(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(W(e.options,l)))),o=h.node.nextSibling}l+=h.size}while(o)o=a(o)}function tt(e,t,n,r){for(var i=0;i<t.changes
.length;i++){var s=t.changes[i];s=="text"?st(e,t):s=="gutter"?ut(e,t,n,r):s=="class"?ot(t):s=="widget"&&at(t,r)}t.changes=null}function nt(e){return e.node==e.text&&(e.node=Io("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),n&&(e.node.style.zIndex=2)),e.node}function rt(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;t&&(t+=" CodeMirror-linebackground");if(e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=nt(e);e.background=n.insertBefore(Io("div",null,t),n.firstChild)}}function it(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):hs(e,t)}function st(e,t){var n=t.text.className,r=it(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,ot(t)):n&&(t.text.className=n)}function ot(e){rt(e),e.line.wrapClass?nt(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function ut(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var s=nt(t),o=t.gutter=s.insertBefore(Io("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),t.text);e.options.lineNumbers&&(!i||!i["CodeMirror-linenumbers"])&&(t.lineNumber=o.appendChild(Io("div",W(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px")));if(i)for(var u=0;u<e.options.gutters.length;++u){var a=e.options.gutters[u],f=i.hasOwnProperty(a)&&i[a];f&&o.appendChild(Io("div",[f],"CodeMirror-gutter-elt","left: "+r.gutterLeft[a]+"px; width: "+r.gutterWidth[a]+"px"))}}}function at(e,t){e.alignable&&(e.alignable=null);for(var n=e.node.firstChild,r;n;n=r){var r=n.nextSibling;n.className=="CodeMirror-linewidget"&&e.node.removeChild(n)}lt(e,t)}function ft(e,t,n,r){var i=it(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),ot(t),ut(e,t,n,r),lt(t,r),t.node}function lt(e,t){ct(e.line,e,t,!0);if(e.rest)for(var n=0;n<e.rest.length;n++)ct(e.rest[n],e,t,!1)}function ct(e,t,n,r){if(!e.widgets)return;var i=nt(t);for(var s=0,o=e.widgets;s<o.length;++s){var u=o[s],a=Io("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||(a.ignoreEvents=!0),ht(u,a,t,n),r&&u.above?i.insertBefore(a,t.gutter||t.text):i.appendChild(a),fo(u,"redraw")}}function ht(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function vt(e){return pt(e.line,e.ch)}function mt(e,t){return dt(e,t)<0?t:e}function gt(e,t){return dt(e,t)<0?e:t}function yt(e,t){this.ranges=e,this.primIndex=t}function bt(e,t){this.anchor=e,this.head=t}function wt(e,t){var n=e[t];e.sort(function(e,t){return dt(e.from(),t.from())}),t=Lo(e,n);for(var r=1;r<e.length;r++){var i=e[r],s=e[r-1];if(dt(s.to(),i.from())>=0){var o=gt(s.from(),i.from()),u=mt(s.to(),i.to()),a=s.empty()?i.from()==i.head:s.from()==s.head;r<=t&&--t,e.splice(--r,2,new bt(a?u:o,a?o:u))}}return new yt(e,t)}function Et(e,t){return new yt([new bt(e,t||e)],0)}function St(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function xt(e,t){if(t.line<e.first)return pt(e.first,0);var n=e.first+e.size-1;return t.line>n?pt(n,As(e,n).text.length):Tt(t,As(e,t.line).text.length)}function Tt(e,t){var n=e.ch;return n==null||n>t?pt(e.line,t):n<0?pt(e.line,0):e}function Nt(e,t){return t>=e.first&&t<e.first+e.size}function Ct(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=xt(e,t[r]);return n}function kt(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var s=dt(n,i)<0;s!=dt(r,i)<0?(i=n,n=r):s!=dt(n,r)<0&&(n=r)}return new bt(i,n)}return new bt(r||n,n)}function Lt(e,t,n,r){Pt(e,new yt([kt(e,e.sel.primary(),t,n)],0),r)}function At(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=kt(e,e.sel.ranges[i],t[i],null);var s=wt(r,e.sel.primIndex);Pt(e,s,n)}function Ot(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Pt(e,wt(i,e.sel.primIndex),r)}function Mt(e,t,n,r){Pt(e,Et(t,n),r)}function _t(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new bt(xt(e,t[n].anchor),xt(e,t[n].head))}};return oo(e,"beforeSelectionChange",e,n),e.cm&&oo(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?wt(n.ranges,n.ranges.length-1):t}function Dt(e,t,n){var r=e.history.done,i=Co(r);i&&i.ranges?(r[r.length-1]=t,Ht(e,t,n)):Pt(e,t,n)}function Pt(e,t,n){Ht(e,t,n),zs(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Ht(e,t,n){if(po(e,"beforeSelectionChange")||e.cm&&po(e.cm,"beforeSelectionChange"))t=_t(e,t);var r=n&&n.bias||(dt(t.primary().head,e.sel.primary().head)<0?-1:1);Bt(e,Ft(e,t,r,!0)),(!n||n.scroll!==!1)&&e.cm&&Wr(e.cm)}function Bt(e,t){if(t.equals(e.sel))return;e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ho(e.cm)),fo(e,"cursorActivity",e)}function jt(e){Bt(e,Ft(e,e.sel,null,!1),yo)}function Ft(e,t,n,r){var i;for(var s=0;s<t.ranges.length;s++){var o=t.ranges[s],u=It(e,o.anchor,n,r),a=It(e,o.head,n,r);if(i||u!=o.anchor||a!=o.head)i||(i=t.ranges.slice(0,s)),i[s]=new bt(u,a)}return i?wt(i,t.primIndex):t}function It(e,t,n,r){var i=!1,s=t,o=n||1;e.cantEdit=!1;e:for(;;){var u=As(e,s.line);if(u.markedSpans)for(var a=0;a<u.markedSpans.length;++a){var f=u.markedSpans[a],l=f.marker;if((f.from==null||(l.inclusiveLeft?f.from<=s.ch:f.from<s.ch))&&(f.to==null||(l.inclusiveRight?f.to>=s.ch:f.to>s.ch))){if(r){oo(l,"beforeCursorEnter");if(l.explicitlyCleared){if(!u.markedSpans)break;--a;continue}}if(!l.atomic)continue;var c=l.find(o<0?-1:1);if(dt(c,s)==0){c.ch+=o,c.ch<0?c.line>e.first?c=xt(e,pt(c.line-1)):c=null:c.ch>u.text.length&&(c.line<e.first+e.size-1?c=pt(c.line+1,0):c=null);if(!c){if(i)return r?(e.cantEdit=!0,pt(e.first,0)):It(e,t,n,!0);i=!0,c=t,o=-o}}s=c;continue e}}return s}}function qt(e){var t=e.display,n=e.doc,r=document.createDocumentFragment(),i=document.createDocumentFragment();for(var s=0;s<n.sel.ranges.length;s++){var o=n.sel.ranges[s],u=o.empty();(u||e.options.showCursorWhenSelecting)&&Rt(e,o,r),u||Ut(e,o,i)}if(e.options.moveInputWithCursor){var a=vn(e,n.sel.primary().head,"div"),f=t.wrapper.getBoundingClientRect(),l=t.lineDiv.getBoundingClientRect(),c=Math.max(0,Math.min(t.wrapper.clientHeight-10,a.top+l.top-f.top)),h=Math.max(0,Math.min(t.wrapper.clientWidth-10,a.left+l.left-f.left));t.inputDiv.style.top=c+"px",t.inputDiv.style.left=h+"px"}Uo(t.cursorDiv,r),Uo(t.selectionDiv,i)}function Rt(e,t,n){var r=vn(e,t.head,"div"),i=n.appendChild(Io("div","","CodeMirror-cursor"));i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px";if(r.other){var s=n.appendChild(Io("div","","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=r.other.left+"px",s.style.top=r.other.top+"px",s.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Ut(e,t,n){function f(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(Io("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?a-e:n)+"px; height: "+(r-t)+"px"))}function l(t,n,r){function h(n,r){return dn(e,pt(t,n),"div",s,r)}var s=As(i,t),o=s.text.length,l,c;return lu(Bs(s),n||0,r==null?o:r,function(e,t,i){var s=h(e,"left"),p,d,v;if(e==t)p=s,d=v=s.left;else{p=h(t-1,"right");if(i=="rtl"){var m=s;s=p,p=m}d=s.left,v=p.right}n==null&&e==0&&(d=u),p.top-s.top>3&&(f(d,s.top,null,s.bottom),d=u,s.bottom<p.top&&f(d,s.bottom,null,p.top)),r==null&&t==o&&(v=a);if(!l||s.top<l.top||s.top==l.top&&s.left<l.left)l=s;if(!c||p.bottom>c.bottom||p.bottom==c.bottom&&p.right>c.right)c=p;d<u+1&&(d=u),f(d,p.top,v-d,p.bottom)}),{start:l,end:c}}var r=e.display,i=e.doc,s=document.createDocumentFragment(),o=Qt(e.display),u=o.left,a=r.lineSpace.offsetWidth-o.right,c=t.from(),h=t.to();if(c.line==h.line)l(c.line,c.ch,h.ch);else{var p=As(i,c.line),d=As(i,h.line),v=zi(p)==zi(d),m=l(c.line,c.ch,v?p.text.length+1:null).end,g=l(h.line,v?0:null,h.ch).start;v&&(m.top<g.top-2?(f(m.right,m.top,null,m.bottom),f(u,g.top,g.left,g.bottom)):f(m.right,m.top,g.left-m.right,m.bottom)),m.bottom<g.top&&f(u,m.bottom,null,g.top)}n.appendChild(s)}function zt(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0&&(t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate))}function Wt(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,_o(Xt,e))}function Xt(e){var t=e.doc;t.frontier<t.first&&(t.frontier=t.first);if(t.frontier>=e.display.viewTo)return;var n=+(new Date)+e.options.workTime,r=ui(t.mode,$t(e,t.frontier));Cn(e,function(){t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(i){if(t.frontier>=e.display.viewFrom){var s=i.styles,o=os(e,i,r,!0);i.styles=o.styles,o.classes?i.styleClasses=o.classes:i.styleClasses&&(i.styleClasses=null);var u=!s||s.length!=i.styles.length;for(var a=0;!u&&a<s.length;++a)u=s[a]!=i.styles[a];u&&Dn(e,t.frontier,"text"),i.stateAfter=ui(t.mode,r)}else as(e,i.text,r),i.stateAfter=t.frontier%5==0?ui(t.mode,r):null;++t.frontier;if(+(new Date)>n)return Wt(e,e.options.workDelay),!0})})}function Vt(e,t,n){var r,i,s=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100);for(var u=t;u>o;--u){if(u<=s.first)return s.first;var a=As(s,u-1);if(a.stateAfter&&(!n||u<=s.frontier))return u;var f=So(a.text,null,e.options.tabSize);if(i==null||r>f)i=u-1,r=f}return i}function $t(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var s=Vt(e,t,n),o=s>r.first&&As(r,s-1).stateAfter;return o?o=ui(r.mode,o):o=ai(r.mode),r.iter(s,t,function(n){as(e,n.text,o);var u=s==t-1||s%5==0||s>=i.viewFrom&&s<i.viewTo;n.stateAfter=u?ui(r.mode,o):null,++s}),n&&(r.frontier=s),o}function Jt(e){return e.lineSpace.offsetTop}function Kt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Qt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Uo(e.measure,Io("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Gt(e,t,n){var r=e.options.lineWrapping,i=r&&e.display.scroller.clientWidth;if(!t.measure.heights||r&&t.measure.width!=i){var s=t.measure.heights=[];if(r){t.measure.width=i;var o=t.text.firstChild.getClientRects();for(var u=0;u<o.length-1;u++){var a=o[u],f=o[u+1];Math.abs(a.bottom-f.bottom)>2&&s.push((a.bottom+f.top)/2-n.top)}}s.push(n.bottom-n.top)}}function Yt(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(Ds(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Zt(e,t){t=zi(t);var n=Ds(t),r=e.display.externalMeasured=new On(e.doc,t,n);r.lineN=n;var i=r.built=hs(e,r);return r.text=i.pre,Uo(e.display.lineMeasure,i.pre),r}function en(e,t,n,r){return rn(e,nn(e,t),n,r)}function tn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Hn(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function nn(e,t){var n=Ds(t),r=tn(e,n);r&&!r.text?r=null:r&&r.changes&&tt(e,r,n,Z(e)),r||(r=Zt(e,t));var i=Yt(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function rn(e,t,n,r){t.before&&(n=-1);var i=n+(r||""),s;return t.cache.hasOwnProperty(i)?s=t.cache[i]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Gt(e,t.view,t.rect),t.hasHeights=!0),s=on(e,t,n,r),s.bogus||(t.cache[i]=s)),{left:s.left,right:s.right,top:s.top,bottom:s.bottom}}function on(e,t,n,i){var s=t.map,u,a,f,l;for(var c=0;c<s.length;c+=3){var h=s[c],p=s[c+1];if(n<h)a=0,f=1,l="left";else if(n<p)a=n-h,f=a+1;else if(c==s.length-3||n==p&&s[c+3]>n)f=p-h,a=f-1,n>=p&&(l="right");if(a!=null){u=s[c+2],h==p&&i==(u.insertLeft?"left":"right")&&(l=i);if(i=="left"&&a==0)while(c&&s[c-2]==s[c-3]&&s[c-1].insertLeft)u=s[(c-=3)+2],l="left";if(i=="right"&&a==p-h)while(c<s.length-3&&s[c+3]==s[c+4]&&!s[c+5].insertLeft)u=s[(c+=3)+2],l="right";break}}var d;if(u.nodeType==3){while(a&&Fo(t.line.text.charAt(h+a)))--a;while(h+f<p&&Fo(t.line.text.charAt(h+f)))++f;if(r&&a==0&&f==p-h)d=u.parentNode.getBoundingClientRect();else if(o&&e.options.lineWrapping){var v=qo(u,a,f).getClientRects();v.length?d=v[i=="right"?v.length-1:0]:d=sn}else d=qo(u,a,f).getBoundingClientRect()||sn}else{a>0&&(l=i="right");var v;e.options.lineWrapping&&(v=u.getClientRects()).length>1?d=v[i=="right"?v.length-1:0]:d=u.getBoundingClientRect()}if(r&&!a&&(!d||!d.left&&!d.right)){var m=u.parentNode.getClientRects()[0];m?d={left:m.left,right:m.left+Sn(e.display),top:m.top,bottom:m.bottom}:d=sn}var g,y=(d.bottom+d.top)/2-t.rect.top,b=t.view.measure.heights;for(var c=0;c<b.length-1;c++)if(y<b[c])break;g=c?b[c-1]:0,y=b[c];var w={left:(l=="right"?d.right:d.left)-t.rect.left,right:(l=="left"?d.left:d.right)-t.rect.left,top:g,bottom:y};return!d.left&&!d.right&&(w.bogus=!0),w}function un(e){if(e.measure){e.measure.cache={},e.measure.heights=null;if(e.rest)for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}}function an(e){e.display.externalMeasure=null,Ro(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)un(e.display.view[t])}function fn(e){an(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ln(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cn(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function hn(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var s=Gi(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=Hs(t);r=="local"?o+=Jt(e.display):o-=e.display.viewOffset;if(r=="page"||r=="window"){var u=e.display.lineSpace.getBoundingClientRect();o+=u.top+(r=="window"?0:cn());var a=u.left+(r=="window"?0:ln());n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function pn(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;if(n=="page")r-=ln(),i-=cn();else if(n=="local"||!n){var s=e.display.sizer.getBoundingClientRect();r+=s.left,i+=s.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:i-o.top}}function dn(e,t,n,r,i){return r||(r=As(e.doc,t.line)),hn(e,r,en(e,r,t.ch,i),n)}function vn(e,t,n,r,i){function s(t,s){var o=rn(e,i,t,s?"right":"left");return s?o.left=o.right:o.right=o.left,hn(e,r,o,n)}function o(e,t){var n=u[t],r=n.level%2;return e==cu(n)&&t&&n.level<u[t-1].level?(n=u[--t],e=hu(n)-(n.level%2?0:1),r=!0):e==hu(n)&&t<u.length-1&&n.level<u[t+1].level&&(n=u[++t],e=cu(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?s(e-1):s(e,r)}r=r||As(e.doc,t.line),i||(i=nn(e,r));var u=Bs(r),a=t.ch;if(!u)return s(a);var f=bu(u,a),l=o(a,f);return yu!=null&&(l.other=o(a,yu)),l}function mn(e,t){var n=0,t=xt(e.doc,t);e.options.lineWrapping||(n=Sn(e.display)*t.ch);var r=As(e.doc,t.line),i=Hs(r)+Jt(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function gn(e,t,n,r){var i=pt(e,t);return i.xRel=r,n&&(i.outside=!0),i}function yn(e,t,n){var r=e.doc;n+=e.display.viewOffset;if(n<0)return gn(r.first,0,!0,-1);var i=Ps(r,n),s=r.first+r.size-1;if(i>s)return gn(r.first+r.size-1,As(r,s).text.length,!0,1);t<0&&(t=0);var o=As(r,i);for(;;){var u=bn(e,o,i,t,n),a=Ri(o),f=a&&a.find(0,!0);if(!a||!(u.ch>f.from.ch||u.ch==f.from.ch&&u.xRel>0))return u;i=Ds(o=f.to.line)}}function bn(e,t,n,r,i){function f(r){var i=vn(e,pt(n,r),"line",t,a);return o=!0,s>i.bottom?i.left-u:s<i.top?i.left+u:(o=!1,i.left)}var s=i-Hs(t),o=!1,u=2*e.display.wrapper.clientWidth,a=nn(e,t),l=Bs(t),c=t.text.length,h=pu(t),p=du(t),d=f(h),v=o,m=f(p),g=o;if(r>m)return gn(n,p,g,1);for(;;){if(l?p==h||p==Eu(t,h,1):p-h<=1){var y=r<d||r-d<=m-r?h:p,b=r-(y==h?d:m);while(Fo(t.text.charAt(y)))++y;var w=gn(n,y,y==h?v:g,b<-1?-1:b>1?1:0);return w}var E=Math.ceil(c/2),S=h+E;if(l){S=h;for(var x=0;x<E;++x)S=Eu(t,S,1)}var T=f(S);if(T>r){p=S,m=T;if(g=o)m+=1e3;c=E}else h=S,d=T,v=o,c-=E}}function En(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(wn==null){wn=Io("pre");for(var t=0;t<49;++t)wn.appendChild(document.createTextNode("x")),wn.appendChild(Io("br"));wn.appendChild(document.createTextNode("x"))}Uo(e.measure,wn);var n=wn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Ro(e.measure),n||1}function Sn(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=Io("span","xxxxxxxxxx"),n=Io("pre",[t]);Uo(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Tn(e){e.curOp={viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++xn},ao++||(uo=[])}function Nn(e){var t=e.curOp,n=e.doc,r=e.display;e.curOp=null,t.updateMaxLine&&j(e);if(t.viewChanged||t.forceUpdate||t.scrollTop!=null||t.scrollToPos&&(t.scrollToPos.from.line<r.viewFrom||t.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&e.options.lineWrapping){var i=V(e,{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate);e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop)}!i&&t.selectionChanged&&qt(e),!i&&t.startHeight!=e.doc.height&&q(e),r.wheelStartX!=null&&(t.scrollTop!=null||t.scrollLeft!=null||t.scrollToPos)&&(r.wheelStartX=r.wheelStartY=null);if(t.scrollTop!=null&&r.scroller.scrollTop!=t.scrollTop){var s=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,t.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=s}if(t.scrollLeft!=null&&r.scroller.scrollLeft!=t.scrollLeft){var o=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,t.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=o,U(e)}if(t.scrollToPos){var u=qr(e,xt(e.doc,t.scrollToPos.from),xt(e.doc,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&Ir(e,u)}t.selectionChanged&&zt(e),e.state.focused&&t.updateInput&&Un(e,t.typing);var a=t.maybeHiddenMarkers,f=t.maybeUnhiddenMarkers;if(a)for(var l=0;l<a.length;++l)a[l].lines.length||oo(a[l],"hide");if(f)for(var l=0;l<f.length;++l)f[l].lines.length&&oo(f[l],"unhide");var c;--ao||(c=uo,uo=null),t.changeObjs&&oo(e,"changes",e,t.changeObjs);if(c)for(var l=0;l<c.length;++l)c[l]();if(t.cursorActivityHandlers)for(var l=0;l<t.cursorActivityHandlers.length;l++)t.cursorActivityHandlers[l](e)}function Cn(e,t){if(e.curOp)return t();Tn(e);try{return t()}finally{Nn(e)}}function kn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Tn(e);try{return t.apply(e,arguments)}finally{Nn(e)}}}function Ln(e){return function(){if(this.curOp)return e.apply(this,arguments);Tn(this);try{return e.apply(this,arguments)}finally{Nn(this)}}}function An(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Tn(t);try{return e.apply(this,arguments)}finally{Nn(t)}}}function On(e,t,n){this.line=t,this.rest=Wi(t),this.size=this.rest?Ds(Co(this.rest))-n+1:1,this.node=this.text=null,this.hidden=$i(e,t)}function Mn(e,t,n){var r=[],i;for(var s=t;s<n;s=i){var o=new On(e.doc,As(e.doc,s),s);i=s+o.size,r.push(o)}return r}function _n(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;r&&n<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0;if(t>=i.viewTo)x&&Xi(e.doc,t)<i.viewTo&&Pn(e);else if(n<=i.viewFrom)x&&Vi(e.doc,n+r)>i.viewFrom?Pn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Pn(e);else if(t<=i.viewFrom){var s=Bn(e,n,n+r,1);s?(i.view=i.view.slice(s.index),i.viewFrom=s.lineN,i.viewTo+=r):Pn(e)}else if(n>=i.viewTo){var s=Bn(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):Pn(e)}else{var o=Bn(e,t,t,-1),u=Bn(e,n,n+r,1);o&&u?(i.view=i.view.slice(0,o.index).concat(Mn(e,o.lineN,u.lineN)).concat(i.view.slice(u.index)),i.viewTo+=r):Pn(e)}var a=i.externalMeasured;a&&(n<a.lineN?a.lineN+=r:t<a.lineN+a.size&&(i.externalMeasured=null))}function Dn(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null);if(t<r.viewFrom||t>=r.viewTo)return;var s=r.view[Hn(e,t)];if(s.node==null)return;var o=s.changes||(s.changes=[]);Lo(o,n)==-1&&o.push(n)}function Pn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Hn(e,t){if(t>=e.display.viewTo)return null;t-=e.display.viewFrom;if(t<0)return null;var n=e.display.view;for(var r=0;r<n.length;r++){t-=n[r].size;if(t<0)return r}}function Bn(e,t,n,r){var i=Hn(e,t),s,o=e.display.view;if(!x||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var u=0,a=e.display.viewFrom;u<i;u++)a+=o[u].size;if(a!=t){if(r>0){if(i==o.length-1)return null;s=a+o[i].size-t,i++}else s=a-t;t+=s,n+=s}while(Xi(e.doc,n)!=n){if(i==(r<0?0:o.length-1))return null;n+=r*o[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function jn(e,t,n){var r=e.display,i=r.view;i.length==0||t>=r.viewTo||n<=r.viewFrom?(r.view=Mn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Mn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Hn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Mn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Hn(e,n)))),r.viewTo=n}function Fn(e){var t=e.display.view,n=0;for(var r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function In(e){if(e.display.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){Rn(e),e.state.focused&&In(e)})}function qn(e){function n(){var r=Rn(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,In(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function Rn(e){var t=e.display.input,n=e.display.prevInput,i=e.doc;if(!e.state.focused||uu(t)&&!n||Xn(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var s=t.value;if(s==n&&!e.somethingSelected())return!1;if(o&&!r&&e.display.inputHasSelection===s)return Un(e),!1;var u=!e.curOp;u&&Tn(e),e.display.shift=!1,s.charCodeAt(0)==8203&&i.sel==e.display.selForContextMenu&&!n&&(n="");var a=0,f=Math.min(n.length,s.length);while(a<f&&n.charCodeAt(a)==s.charCodeAt(a))++a;var l=s.slice(a),c=ou(l),h=e.state.pasteIncoming&&c.length>1&&i.sel.ranges.length==c.length;for(var p=i.sel.ranges.length-1;p>=0;p--){var d=i.sel.ranges[p],v=d.from(),m=d.to();a<n.length?v=pt(v.line,v.ch-(n.length-a)):e.state.overwrite&&d.empty()&&!e.state.pasteIncoming&&(m=pt(m.line,Math.min(As(i,m.line).text.length,m.ch+Co(c).length)));var g=e.curOp.updateInput,y={from:v,to:m,text:h?[c[p]]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};_r(e.doc,y),fo(e,"inputRead",e,y);if(l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&d.head.ch<100&&(!p||i.sel.ranges[p-1].head.line!=d.head.line)){var b=e.getModeAt(d.head);if(b.electricChars){for(var w=0;w<b.electricChars.length;w++)if(l.indexOf(b.electricChars.charAt(w))>-1){Vr(e,d.head.line,"smart");break}}else if(b.electricInput){var E=Cr(y);b.electricInput.test(As(i,E.line).text.slice(0,E.ch))&&Vr(e,d.head.line,"smart")}}}return Wr(e),e.curOp.updateInput=g,e.curOp.typing=!0,s.length>1e3||s.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=s,u&&Nn(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function Un(e,t){var n,i,s=e.doc;if(e.somethingSelected()){e.display.prevInput="";var u=s.sel.primary();n=au&&(u.to().line-u.from().line>100||(i=e.getSelection()).length>1e3);var a=n?"-":i||e.getSelection();e.display.input.value=a,e.state.focused&&ko(e.display.input),o&&!r&&(e.display.inputHasSelection=a)}else t||(e.display.prevInput=e.display.input.value="",o&&!r&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=n}function zn(e){e.options.readOnly!="nocursor"&&(!m||Wo()!=e.display.input)&&e.display.input.focus()}function Wn(e){e.state.focused||(zn(e),Sr(e))}function Xn(e){return e.options.readOnly||e.doc.cantEdit}function Vn(e){function i(){e.state.focused&&setTimeout(_o(zn,e),0)}function s(t){co(e,t)||to(t)}function a(t){if(e.somethingSelected())n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,n.input.value=e.getSelection(),ko(n.input));else{var r="",i=[];for(var s=0;s<e.doc.sel.ranges.length;s++){var o=e.doc.sel.ranges[s].head.line,u={anchor:pt(o,0),head:pt(o+1,0)};i.push(u),r+=e.getRange(u.anchor,u.head)}t.type=="cut"?e.setSelections(i,null,yo):(n.prevInput="",n.input.value=r,ko(n.input))}t.type=="cut"&&(e.state.cutIncoming=!0)}var n=e.display;io(n.scroller,"mousedown",kn(e,Qn)),t?io(n.scroller,"dblclick",kn(e,function(t){if(co(e,t))return;var n=Kn(e,t);if(!n||rr(e,t)||Jn(e.display,t))return;Ys(t);var r=Gr(e,n);Lt(e.doc,r.anchor,r.head)})):io(n.scroller,"dblclick",function(t){co(e,t)||Ys(t)}),io(n.lineSpace,"selectstart",function(e){Jn(n,e)||Ys(e)}),E||io(n.scroller,"contextmenu",function(t){Tr(e,t)}),io(n.scroller,"scroll",function(){n.scroller.clientHeight&&(ur(e,n.scroller.scrollTop),ar(e,n.scroller.scrollLeft,!0),oo(e,"scroll",e))}),io(n.scrollbarV,"scroll",function(){n.scroller.clientHeight&&ur(e,n.scrollbarV.scrollTop)}),io(n.scrollbarH,"scroll",function(){n.scroller.clientHeight&&ar(e,n.scrollbarH.scrollLeft)}),io(n.scroller,"mousewheel",function(t){cr(e,t)}),io(n.scroller,"DOMMouseScroll",function(t){cr(e,t)}),io(n.scrollbarH,"mousedown",i),io(n.scrollbarV,"mousedown",i),io(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),io(n.input,"keyup",kn(e,wr)),io(n.input,"input",function(){o&&!r&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),qn(e)}),io(n.input,"keydown",kn(e,yr)),io(n.input,"keypress",kn(e,Er)),io(n.input,"focus",_o(Sr,e)),io(n.input,"blur",_o(xr,e)),e.options.dragDrop&&(io(n.scroller,"dragstart",function(t){or(e,t)}),io(n.scroller,"dragenter",s),io(n.scroller,"dragover",s),io(n.scroller,"drop",kn(e,sr))),io(n.scroller,"paste",function(t){if(Jn(n,t))return;e.state.pasteIncoming=!0,zn(e),qn(e)}),io(n.input,"paste",function(){if(u&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=n.input.selectionStart,r=n.input.selectionEnd;n.input.value+="$",n.input.selectionStart=t,n.input.selectionEnd=r,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,qn(e)}),io(n.input,"cut",a),io(n.input,"copy",a),h&&io(n.sizer,"mouseup",function(){Wo()==n.input&&n.input.blur(),zn(e)})}function $n(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function Jn(e,t){for(var n=no(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function Kn(e,t,n,r){var i=e.display;if(!n){var s=no(t);if(s==i.scrollbarH||s==i.scrollbarV||s==i.scrollbarFiller||s==i.gutterFiller)return null}var o,u,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,u=t.clientY-a.top}catch(t){return null}var f=yn(e,o,u),l;if(r&&f.xRel==1&&(l=As(e.doc,f.line).text).length==f.ch){var c=So(l,l.length,e.options.tabSize)-l.length;f=pt(f.line,Math.max(0,Math.round((o-Qt(e.display).left)/Sn(e.display))-c))}return f}function Qn(e){if(co(this,e))return;var t=this,n=t.display;n.shift=e.shiftKey;if(Jn(n,e)){u||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100));return}if(rr(t,e))return;var r=Kn(t,e);window.focus();switch(ro(e)){case 1:r?Zn(t,e,r):no(e)==n.scroller&&Ys(e);break;case 2:u&&(t.state.lastMiddleDown=+(new Date)),r&&Lt(t.doc,r),setTimeout(_o(zn,t),20),Ys(e);break;case 3:E&&Tr(t,e)}}function Zn(e,t,n){setTimeout(_o(Wn,e),0);var r=+(new Date),i;Yn&&Yn.time>r-400&&dt(Yn.pos,n)==0?i="triple":Gn&&Gn.time>r-400&&dt(Gn.pos,n)==0?(i="double",Yn={time:r,pos:n}):(i="single",Gn={time:r,pos:n});var s=e.doc.sel,o=g?t.metaKey:t.ctrlKey;e.options.dragDrop&&Zo&&!Xn(e)&&i=="single"&&s.contains(n)>-1&&s.somethingSelected()?er(e,t,n,o):tr(e,t,n,i,o)}function er(e,n,i,s){var o=e.display,a=kn(e,function(f){u&&(o.scroller.draggable=!1),e.state.draggingText=!1,so(document,"mouseup",a),so(o.scroller,"drop",a),Math.abs(n.clientX-f.clientX)+Math.abs(n.clientY-f.clientY)<10&&(Ys(f),s||Lt(e.doc,i),zn(e),t&&!r&&setTimeout(function(){document.body.focus(),zn(e)},20))});u&&(o.scroller.draggable=!0),e.state.draggingText=a,o.scroller.dragDrop&&o.scroller.dragDrop(),io(document,"mouseup",a),io(o.scroller,"drop",a)}function tr(e,t,n,r,s){function v(t){if(dt(d,t)==0)return;d=t;if(r=="rect"){var i=[],s=e.options.tabSize,o=So(As(a,n.line).text,n.ch,s),u=So(As(a,t.line).text,t.ch,s),h=Math.min(o,u),p=Math.max(o,u);for(var v=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));v<=m;v++){var g=As(a,v).text,y=xo(g,h,s);h==p?i.push(new bt(pt(v,y),pt(v,y))):g.length>y&&i.push(new bt(pt(v,y),pt(v,xo(g,p,s))))}i.length||i.push(new bt(n,n)),Pt(a,wt(c.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=f,w=b.anchor,E=t;if(r!="single"){if(r=="double")var S=Gr(e,t);else var S=new bt(pt(t.line,0),xt(a,pt(t.line+1,0)));dt(S.anchor,w)>0?(E=S.head,w=gt(b.from(),S.anchor)):(E=S.anchor,w=mt(b.to(),S.head))}var i=c.ranges.slice(0);i[l]=new bt(xt(a,w),E),Pt(a,wt(i,l),bo)}}function y(t){var n=++g,i=Kn(e,t,!0,r=="rect");if(!i)return;if(dt(i,d)!=0){Wn(e),v(i);var s=R(u,a);(i.line>=s.to||i.line<s.from)&&setTimeout(kn(e,function(){g==n&&y(t)}),150)}else{var o=t.clientY<m.top?-20:t.clientY>m.bottom?20:0;o&&setTimeout(kn(e,function(){if(g!=n)return;u.scroller.scrollTop+=o,y(t)}),50)}}function b(t){g=Infinity,Ys(t),zn(e),so(document,"mousemove",w),so(document,"mouseup",E),a.history.lastSelOrigin=null}var u=e.display,a=e.doc;Ys(t);var f,l,c=a.sel;s&&!t.shiftKey?(l=a.sel.contains(n),l>-1?f=a.sel.ranges[l]:f=new bt(n,n)):f=a.sel.primary();if(t.altKey)r="rect",s||(f=new bt(n,n)),n=Kn(e,t,!0,!0),l=-1;else if(r=="double"){var h=Gr(e,n);e.display.shift||a.extend?f=kt(a,f,h.anchor,h.head):f=h}else if(r=="triple"){var p=new bt(pt(n.line,0),xt(a,pt(n.line+1,0)));e.display.shift||a.extend?f=kt(a,f,p.anchor,p.head):f=p}else f=kt(a,f,n);s?l>-1?Ot(a,l,f,bo):(l=a.sel.ranges.length,Pt(a,wt(a.sel.ranges.concat([f]),l),{scroll:!1,origin:"*mouse"})):(l=0,Pt(a,new yt([f],0),bo),c=a.sel);var d=n,m=u.wrapper.getBoundingClientRect(),g=0,w=kn(e,function(e){(o&&!i?!e.buttons:!ro(e))?b(e):y(e)}),E=kn(e,b);io(document,"mousemove",w),io(document,"mouseup",E)}function nr(e,t,n,r,i){try{var s=t.clientX,o=t.clientY}catch(t){return!1}if(s>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ys(t);var u=e.display,a=u.lineDiv.getBoundingClientRect();if(o>a.bottom||!po(e,n))return eo(t);o-=a.top-u.viewOffset;for(var f=0;f<e.options.gutters.length;++f){var l=u.gutters.childNodes[f];if(l&&l.getBoundingClientRect().right>=s){var c=Ps(e.doc,o),h=e.options.gutters[f];return i(e,n,e,c,h,t),eo(t)}}}function rr(e,t){return nr(e,t,"gutterClick",!0,fo)}function sr(e){var t=this;if(co(t,e)||Jn(t.display,e))return;Ys(e),o&&(ir=+(new Date));var n=Kn(t,e,!0),r=e.dataTransfer.files;if(!n||Xn(t))return;if(r&&r.length&&window.FileReader&&window.File){var i=r.length,s=Array(i),u=0,a=function(e,r){var o=new FileReader;o.onload=kn(t,function(){s[r]=o.result;if(++u==i){n=xt(t.doc,n);var e={from:n,to:n,text:ou(s.join("\n")),origin:"paste"};_r(t.doc,e),Dt(t.doc,Et(n,Cr(e)))}}),o.readAsText(e)};for(var f=0;f<i;++f)a(r[f],f)}else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e),setTimeout(_o(zn,t),20);return}try{var s=e.dataTransfer.getData("Text");if(s){if(t.state.draggingText&&(g?!e.metaKey:!e.ctrlKey))var l=t.listSelections();Ht(t.doc,Et(n,n));if(l)for(var f=0;f<l.length;++f)Fr(t.doc,"",l[f].anchor,l[f].head,"drag");t.replaceSelection(s,"around","paste"),zn(t)}}catch(e){}}}function or(e,t){if(o&&(!e.state.draggingText||+(new Date)-ir<100)){to(t);return}if(co(e,t)||Jn(e.display,t))return;t.dataTransfer.setData("Text",e.getSelection());if(t.dataTransfer.setDragImage&&!c){var n=Io("img",null,null,"position: fixed; left: 0; top: 0;"
);n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",l&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),l&&n.parentNode.removeChild(n)}}function ur(t,n){if(Math.abs(t.doc.scrollTop-n)<2)return;t.doc.scrollTop=n,e||V(t,{top:n}),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&V(t),Wt(t,100)}function ar(e,t,n){if(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,U(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function cr(t,n){var r=n.wheelDeltaX,i=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail),i==null&&n.detail&&n.axis==n.VERTICAL_AXIS?i=n.detail:i==null&&(i=n.wheelDelta);var s=t.display,o=s.scroller;if(!(r&&o.scrollWidth>o.clientWidth||i&&o.scrollHeight>o.clientHeight))return;if(i&&g&&u)e:for(var a=n.target,f=s.view;a!=o;a=a.parentNode)for(var c=0;c<f.length;c++)if(f[c].node==a){t.display.currentWheelTarget=a;break e}if(r&&!e&&!l&&lr!=null){i&&ur(t,Math.max(0,Math.min(o.scrollTop+i*lr,o.scrollHeight-o.clientHeight))),ar(t,Math.max(0,Math.min(o.scrollLeft+r*lr,o.scrollWidth-o.clientWidth))),Ys(n),s.wheelStartX=null;return}if(i&&lr!=null){var h=i*lr,p=t.doc.scrollTop,d=p+s.wrapper.clientHeight;h<0?p=Math.max(0,p+h-50):d=Math.min(t.doc.height,d+h+50),V(t,{top:p,bottom:d})}fr<20&&(s.wheelStartX==null?(s.wheelStartX=o.scrollLeft,s.wheelStartY=o.scrollTop,s.wheelDX=r,s.wheelDY=i,setTimeout(function(){if(s.wheelStartX==null)return;var e=o.scrollLeft-s.wheelStartX,t=o.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null;if(!n)return;lr=(lr*fr+n)/(fr+1),++fr},200)):(s.wheelDX+=r,s.wheelDY+=i))}function hr(e,t,n){if(typeof t=="string"){t=fi[t];if(!t)return!1}e.display.pollingFast&&Rn(e)&&(e.display.pollingFast=!1);var r=e.display.shift,i=!1;try{Xn(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=go}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function pr(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function vr(e,t){var n=ci(e.options.keyMap),r=n.auto;clearTimeout(dr),r&&!pi(t)&&(dr=setTimeout(function(){ci(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,M(e))},50));var i=di(t,!0),s=!1;if(!i)return!1;var o=pr(e);return t.shiftKey?s=hi("Shift-"+i,o,function(t){return hr(e,t,!0)})||hi(i,o,function(t){if(typeof t=="string"?/^go[A-Z]/.test(t):t.motion)return hr(e,t)}):s=hi(i,o,function(t){return hr(e,t)}),s&&(Ys(t),zt(e),fo(e,"keyHandled",e,i,t)),s}function mr(e,t,n){var r=hi("'"+n+"'",pr(e),function(t){return hr(e,t,!0)});return r&&(Ys(t),zt(e),fo(e,"keyHandled",e,"'"+n+"'",t)),r}function yr(e){var n=this;Wn(n);if(co(n,e))return;t&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;n.display.shift=r==16||e.shiftKey;var i=vr(n,e);l&&(gr=i?r:null,!i&&r==88&&!au&&(g?e.metaKey:e.ctrlKey)&&n.replaceSelection("",null,"cut")),r==18&&!/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)&&br(n)}function br(e){function n(e){if(e.keyCode==18||!e.altKey)Vo(t,"CodeMirror-crosshair"),so(document,"keyup",n),so(document,"mouseover",n)}var t=e.display.lineDiv;$o(t,"CodeMirror-crosshair"),io(document,"keyup",n),io(document,"mouseover",n)}function wr(e){if(co(this,e))return;e.keyCode==16&&(this.doc.sel.shift=!1)}function Er(e){var t=this;if(co(t,e))return;var n=e.keyCode,i=e.charCode;if(l&&n==gr){gr=null,Ys(e);return}if((l&&(!e.which||e.which<10)||h)&&vr(t,e))return;var s=String.fromCharCode(i==null?n:i);if(mr(t,e,s))return;o&&!r&&(t.display.inputHasSelection=null),qn(t)}function Sr(e){if(e.options.readOnly=="nocursor")return;e.state.focused||(oo(e,"focus",e),e.state.focused=!0,$o(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(Un(e),u&&setTimeout(_o(Un,e,!0),0))),In(e),zt(e)}function xr(e){e.state.focused&&(oo(e,"blur",e),e.state.focused=!1,Vo(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Tr(e,t){function f(){if(n.input.selectionStart!=null){var t=e.somethingSelected(),r=n.input.value=""+(t?n.input.value:"");n.prevInput=t?"":"",n.input.selectionStart=1,n.input.selectionEnd=r.length,n.selForContextMenu=e.doc.sel}}function c(){n.inputDiv.style.position="relative",n.input.style.cssText=a,r&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=s),In(e);if(n.input.selectionStart!=null){(!o||r)&&f();var t=0,i=function(){n.selForContextMenu==e.doc.sel&&n.input.selectionStart==0?kn(e,fi.selectAll)(e):t++<10?n.detectingSelectAll=setTimeout(i,500):Un(e)};n.detectingSelectAll=setTimeout(i,200)}}if(co(e,t,"contextmenu"))return;var n=e.display;if(Jn(n,t)||Nr(e,t))return;var i=Kn(e,t),s=n.scroller.scrollTop;if(!i||l)return;var u=e.options.resetSelectionOnContextMenu;u&&e.doc.sel.contains(i)==-1&&kn(e,Pt)(e.doc,Et(i),yo);var a=n.input.style.cssText;n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",zn(e),Un(e),e.somethingSelected()||(n.input.value=n.prevInput=" "),n.selForContextMenu=e.doc.sel,clearTimeout(n.detectingSelectAll),o&&!r&&f();if(E){to(t);var h=function(){so(window,"mouseup",h),setTimeout(c,20)};io(window,"mouseup",h)}else setTimeout(c,50)}function Nr(e,t){return po(e,"gutterContextMenu")?nr(e,t,"gutterContextMenu",!1,oo):!1}function kr(e,t){if(dt(e,t.from)<0)return e;if(dt(e,t.to)<=0)return Cr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Cr(t).ch-t.to.ch),pt(n,r)}function Lr(e,t){var n=[];for(var r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new bt(kr(i.anchor,t),kr(i.head,t)))}return wt(n,e.sel.primIndex)}function Ar(e,t,n){return e.line==t.line?pt(n.line,e.ch-t.ch+n.ch):pt(n.line+(e.line-t.line),e.ch)}function Or(e,t,n){var r=[],i=pt(e.first,0),s=i;for(var o=0;o<t.length;o++){var u=t[o],a=Ar(u.from,i,s),f=Ar(Cr(u),i,s);i=u.to,s=f;if(n=="around"){var l=e.sel.ranges[o],c=dt(l.head,l.anchor)<0;r[o]=new bt(c?f:a,c?a:f)}else r[o]=new bt(a,a)}return new yt(r,e.sel.primIndex)}function Mr(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=xt(e,t)),n&&(this.to=xt(e,n)),r&&(this.text=r),i!==undefined&&(this.origin=i)}),oo(e,"beforeChange",e,r),e.cm&&oo(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function _r(e,t,n){if(e.cm){if(!e.cm.curOp)return kn(e.cm,_r)(e,t,n);if(e.cm.state.suppressEdits)return}if(po(e,"beforeChange")||e.cm&&po(e.cm,"beforeChange")){t=Mr(e,t,!0);if(!t)return}var r=S&&!n&&Di(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Dr(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Dr(e,t)}function Dr(e,t){if(t.text.length==1&&t.text[0]==""&&dt(t.from,t.to)==0)return;var n=Lr(e,t);Rs(e,t,n,e.cm?e.cm.curOp.id:NaN),Br(e,t,n,Oi(e,t));var r=[];ks(e,function(e,n){!n&&Lo(r,e.history)==-1&&(Gs(e.history,t),r.push(e.history)),Br(e,t,null,Oi(e,t))})}function Pr(e,t,n){if(e.cm&&e.cm.state.suppressEdits)return;var r=e.history,i,s=e.sel,o=t=="undo"?r.done:r.undone,u=t=="undo"?r.undone:r.done;for(var a=0;a<o.length;a++){i=o[a];if(n?i.ranges&&!i.equals(e.sel):!i.ranges)break}if(a==o.length)return;r.lastOrigin=r.lastSelOrigin=null;for(;;){i=o.pop();if(!i.ranges)break;Ws(i,u);if(n&&!i.equals(e.sel)){Pt(e,i,{clearRedo:!1});return}s=i}var f=[];Ws(s,u),u.push({changes:f,generation:r.generation}),r.generation=i.generation||++r.maxGeneration;var l=po(e,"beforeChange")||e.cm&&po(e.cm,"beforeChange");for(var a=i.changes.length-1;a>=0;--a){var c=i.changes[a];c.origin=t;if(l&&!Mr(e,c,!1)){o.length=0;return}f.push(Fs(e,c));var h=a?Lr(e,c,null):Co(o);Br(e,c,h,_i(e,c)),!a&&e.cm&&e.cm.scrollIntoView(c);var p=[];ks(e,function(e,t){!t&&Lo(p,e.history)==-1&&(Gs(e.history,c),p.push(e.history)),Br(e,c,null,_i(e,c))})}}function Hr(e,t){if(t==0)return;e.first+=t,e.sel=new yt(Ao(e.sel.ranges,function(e){return new bt(pt(e.anchor.line+t,e.anchor.ch),pt(e.head.line+t,e.head.ch))}),e.sel.primIndex);if(e.cm){_n(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Dn(e.cm,r,"gutter")}}function Br(e,t,n,r){if(e.cm&&!e.cm.curOp)return kn(e.cm,Br)(e,t,n,r);if(t.to.line<e.first){Hr(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Hr(e,i),t={from:pt(e.first,0),to:pt(t.to.line+i,t.to.ch),text:[Co(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:pt(s,As(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Os(e,t.from,t.to),n||(n=Lr(e,t,null)),e.cm?jr(e.cm,t,r):ws(e,t,r),Ht(e,n,yo)}function jr(e,t,n){var r=e.doc,i=e.display,s=t.from,o=t.to,u=!1,a=s.line;e.options.lineWrapping||(a=Ds(zi(As(r,s.line))),r.iter(a,o.line+1,function(e){if(e==i.maxLine)return u=!0,!0})),r.sel.contains(t.from,t.to)>-1&&ho(e),ws(r,t,n,A(e)),e.options.lineWrapping||(r.iter(a,s.line+t.text.length,function(e){var t=B(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,s.line),Wt(e,400);var f=t.text.length-(o.line-s.line)-1;s.line==o.line&&t.text.length==1&&!bs(e.doc,t)?Dn(e,s.line,"text"):_n(e,s.line,o.line+1,f);var l=po(e,"changes"),c=po(e,"change");if(c||l){var h={from:s,to:o,text:t.text,removed:t.removed,origin:t.origin};c&&fo(e,"change",e,h),l&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function Fr(e,t,n,r,i){r||(r=n);if(dt(r,n)<0){var s=r;r=n,n=s}typeof t=="string"&&(t=ou(t)),_r(e,{from:n,to:r,text:t,origin:i})}function Ir(e,t){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(i!=null&&!d){var s=Io("div","",null,"position: absolute; top: "+(t.top-n.viewOffset-Jt(e.display))+"px; height: "+(t.bottom-t.top+mo)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(i),e.display.lineSpace.removeChild(s)}}function qr(e,t,n,r){r==null&&(r=0);for(;;){var i=!1,s=vn(e,t),o=!n||n==t?s:vn(e,n),u=Ur(e,Math.min(s.left,o.left),Math.min(s.top,o.top)-r,Math.max(s.left,o.left),Math.max(s.bottom,o.bottom)+r),a=e.doc.scrollTop,f=e.doc.scrollLeft;u.scrollTop!=null&&(ur(e,u.scrollTop),Math.abs(e.doc.scrollTop-a)>1&&(i=!0)),u.scrollLeft!=null&&(ar(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(i=!0));if(!i)return s}}function Rr(e,t,n,r,i){var s=Ur(e,t,n,r,i);s.scrollTop!=null&&ur(e,s.scrollTop),s.scrollLeft!=null&&ar(e,s.scrollLeft)}function Ur(e,t,n,r,i){var s=e.display,o=En(e.display);n<0&&(n=0);var u=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:s.scroller.scrollTop,a=s.scroller.clientHeight-mo,f={},l=e.doc.height+Kt(s),c=n<o,h=i>l-o;if(n<u)f.scrollTop=c?0:n;else if(i>u+a){var p=Math.min(n,(h?l:i)-a);p!=u&&(f.scrollTop=p)}var d=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:s.scroller.scrollLeft,v=s.scroller.clientWidth-mo;t+=s.gutters.offsetWidth,r+=s.gutters.offsetWidth;var m=s.gutters.offsetWidth,g=t<m+10;return t<d+m||g?(g&&(t=0),f.scrollLeft=Math.max(0,t-10-m)):r>v+d-3&&(f.scrollLeft=r+10-v),f}function zr(e,t,n){(t!=null||n!=null)&&Xr(e),t!=null&&(e.curOp.scrollLeft=(e.curOp.scrollLeft==null?e.doc.scrollLeft:e.curOp.scrollLeft)+t),n!=null&&(e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Wr(e){Xr(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?pt(t.line,t.ch-1):t,r=pt(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function Xr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=mn(e,t.from),r=mn(e,t.to),i=Ur(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function Vr(e,t,n,r){var i=e.doc,s;n==null&&(n="add"),n=="smart"&&(e.doc.mode.indent?s=$t(e,t):n="prev");var o=e.options.tabSize,u=As(i,t),a=So(u.text,null,o);u.stateAfter&&(u.stateAfter=null);var f=u.text.match(/^\s*/)[0],l;if(!r&&!/\S/.test(u.text))l=0,n="not";else if(n=="smart"){l=e.doc.mode.indent(s,u.text.slice(f.length),u.text);if(l==go){if(!r)return;n="prev"}}n=="prev"?t>i.first?l=So(As(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"?l=a-e.options.indentUnit:typeof n=="number"&&(l=a+n),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=No(l-h));if(c!=f)Fr(e.doc,c,pt(t,0),pt(t,f.length),"+input");else for(var p=0;p<i.sel.ranges.length;p++){var d=i.sel.ranges[p];if(d.head.line==t&&d.head.ch<f.length){var h=pt(t,f.length);Ot(i,p,new bt(h,h));break}}u.stateAfter=null}function $r(e,t,n,r){var i=t,s=t,o=e.doc;return typeof t=="number"?s=As(o,St(o,t)):i=Ds(t),i==null?null:(r(s,i)&&Dn(e,i,n),s)}function Jr(e,t){var n=e.doc.sel.ranges,r=[];for(var i=0;i<n.length;i++){var s=t(n[i]);while(r.length&&dt(s.from,Co(r).to)<=0){var o=r.pop();if(dt(o.from,s.from)<0){s.from=o.from;break}}r.push(s)}Cn(e,function(){for(var t=r.length-1;t>=0;t--)Fr(e.doc,"",r[t].from,r[t].to,"+delete");Wr(e)})}function Kr(e,t,n,r,i){function l(){var t=s+n;return t<e.first||t>=e.first+e.size?f=!1:(s=t,a=As(e,t))}function c(e){var t=(i?Eu:Su)(a,o,n,!0);if(t==null){if(!!e||!l())return f=!1;i?o=(n<0?du:pu)(a):o=n<0?a.text.length:0}else o=t;return!0}var s=t.line,o=t.ch,u=n,a=As(e,s),f=!0;if(r=="char")c();else if(r=="column")c(!0);else if(r=="word"||r=="group"){var h=null,p=r=="group",d=e.cm&&e.cm.getHelper(t,"wordChars");for(var v=!0;;v=!1){if(n<0&&!c(!v))break;var m=a.text.charAt(o)||"\n",g=Ho(m,d)?"w":p&&m=="\n"?"n":!p||/\s/.test(m)?null:"p";p&&!v&&!g&&(g="s");if(h&&h!=g){n<0&&(n=1,c());break}g&&(h=g);if(n>0&&!c(!v))break}}var y=It(e,pt(s,o),u,!0);return f||(y.hitSide=!0),y}function Qr(e,t,n,r){var i=e.doc,s=t.left,o;if(r=="page"){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(u-(n<0?1.5:.5)*En(e.display))}else r=="line"&&(o=n>0?t.bottom+3:t.top-3);for(;;){var a=yn(e,s,o);if(!a.outside)break;if(n<0?o<=0:o>=i.height){a.hitSide=!0;break}o+=n*5}return a}function Gr(e,t){var n=e.doc,r=As(n,t.line).text,i=t.ch,s=t.ch;if(r){var o=e.getHelper(t,"wordChars");(t.xRel<0||s==r.length)&&i?--i:++s;var u=r.charAt(i),a=Ho(u,o)?function(e){return Ho(e,o)}:/\s/.test(u)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Ho(e)};while(i>0&&a(r.charAt(i-1)))--i;while(s<r.length&&a(r.charAt(s)))++s}return new bt(pt(t.line,i),pt(t.line,s))}function ei(e,t,n,r){T.defaults[e]=t,n&&(Zr[e]=r?function(e,t,r){r!=ti&&n(e,t,r)}:n)}function ci(e){return typeof e=="string"?li[e]:e}function yi(e,t,n,r,i){if(r&&r.shared)return wi(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return kn(e.cm,yi)(e,t,n,r,i);var s=new mi(e,i),o=dt(t,n);r&&Mo(r,s,!1);if(o>0||o==0&&s.clearWhenEmpty!==!1)return s;s.replacedWith&&(s.collapsed=!0,s.widgetNode=Io("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(s.widgetNode.ignoreEvents=!0),r.insertLeft&&(s.widgetNode.insertLeft=!0));if(s.collapsed){if(Ui(e,t.line,t,n,s)||t.line!=n.line&&Ui(e,n.line,t,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");x=!0}s.addToHistory&&Rs(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var u=t.line,a=e.cm,f;e.iter(u,n.line+1,function(e){a&&s.collapsed&&!a.options.lineWrapping&&zi(e)==a.display.maxLine&&(f=!0),s.collapsed&&u!=t.line&&_s(e,0),ki(e,new Ti(s,u==t.line?t.ch:null,u==n.line?n.ch:null)),++u}),s.collapsed&&e.iter(t.line,n.line+1,function(t){$i(e,t)&&_s(t,0)}),s.clearOnEnter&&io(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(S=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++gi,s.atomic=!0);if(a){f&&(a.curOp.updateMaxLine=!0);if(s.collapsed)_n(a,t.line,n.line+1);else if(s.className||s.title||s.startStyle||s.endStyle)for(var l=t.line;l<=n.line;l++)Dn(a,l,"text");s.atomic&&jt(a.doc),fo(a,"markerAdded",a,s)}return s}function wi(e,t,n,r,i){r=Mo(r),r.shared=!1;var s=[yi(e,t,n,r,i)],o=s[0],u=r.widgetNode;return ks(e,function(e){u&&(r.widgetNode=u.cloneNode(!0)),s.push(yi(e,xt(e,t),xt(e,n),r,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;o=Co(s)}),new bi(s,o)}function Ei(e){return e.findMarks(pt(e.first,0),e.clipPos(pt(e.lastLine())),function(e){return e.parent})}function Si(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),s=e.clipPos(i.from),o=e.clipPos(i.to);if(dt(s,o)){var u=yi(e,s,o,r.primary,r.primary.type);r.markers.push(u),u.parent=r}}}function xi(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];ks(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var s=n.markers[i];Lo(r,s.doc)==-1&&(s.parent=null,n.markers.splice(i--,1))}}}function Ti(e,t,n){this.marker=e,this.from=t,this.to=n}function Ni(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ci(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function ki(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Li(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||s.from==t&&o.type=="bookmark"&&(!n||!s.marker.insertLeft)){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push(new Ti(o,s.from,a?null:s.to))}}return i}function Ai(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);if(u||s.from==t&&o.type=="bookmark"&&(!n||s.marker.insertLeft)){var a=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);(i||(i=[])).push(new Ti(o,a?null:s.from-t,s.to==null?null:s.to-t))}}return i}function Oi(e,t){var n=Nt(e,t.from.line)&&As(e,t.from.line).markedSpans,r=Nt(e,t.to.line)&&As(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,o=dt(t.from,t.to)==0,u=Li(n,i,o),a=Ai(r,s,o),f=t.text.length==1,l=Co(t.text).length+(f?i:0);if(u)for(var c=0;c<u.length;++c){var h=u[c];if(h.to==null){var p=Ni(a,h.marker);p?f&&(h.to=p.to==null?null:p.to+l):h.to=i}}if(a)for(var c=0;c<a.length;++c){var h=a[c];h.to!=null&&(h.to+=l);if(h.from==null){var p=Ni(u,h.marker);p||(h.from=l,f&&(u||(u=[])).push(h))}else h.from+=l,f&&(u||(u=[])).push(h)}u&&(u=Mi(u)),a&&a!=u&&(a=Mi(a));var d=[u];if(!f){var v=t.text.length-2,m;if(v>0&&u)for(var c=0;c<u.length;++c)u[c].to==null&&(m||(m=[])).push(new Ti(u[c].marker,null,null));for(var c=0;c<v;++c)d.push(m);d.push(a)}return d}function Mi(e){for(var t=0;t<e.length;++t){var n=e[t];n.from!=null&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function _i(e,t){var n=$s(e,t),r=Oi(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],o=r[i];if(s&&o)e:for(var u=0;u<o.length;++u){var a=o[u];for(var f=0;f<s.length;++f)if(s[f].marker==a.marker)continue e;s.push(a)}else o&&(n[i]=o)}return n}function Di(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||Lo(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s],u=o.find(0);for(var a=0;a<i.length;++a){var f=i[a];if(dt(f.to,u.from)<0||dt(f.from,u.to)>0)continue;var l=[a,1],c=dt(f.from,u.from),h=dt(f.to,u.to);(c<0||!o.inclusiveLeft&&!c)&&l.push({from:f.from,to:u.from}),(h>0||!o.inclusiveRight&&!h)&&l.push({from:u.to,to:f.to}),i.splice.apply(i,l),a+=l.length-1}}return i}function Pi(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function Hi(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function Bi(e){return e.inclusiveLeft?-1:0}function ji(e){return e.inclusiveRight?1:0}function Fi(e,t){var n=e.lines.length-t.lines.length;if(n!=0)return n;var r=e.find(),i=t.find(),s=dt(r.from,i.from)||Bi(e)-Bi(t);if(s)return-s;var o=dt(r.to,i.to)||ji(e)-ji(t);return o?o:t.id-e.id}function Ii(e,t){var n=x&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s)i=n[s],i.marker.collapsed&&(t?i.from:i.to)==null&&(!r||Fi(r,i.marker)<0)&&(r=i.marker);return r}function qi(e){return Ii(e,!0)}function Ri(e){return Ii(e,!1)}function Ui(e,t,n,r,i){var s=As(e,t),o=x&&s.markedSpans;if(o)for(var u=0;u<o.length;++u){var a=o[u];if(!a.marker.collapsed)continue;var f=a.marker.find(0),l=dt(f.from,n)||Bi(a.marker)-Bi(i),c=dt(f.to,r)||ji(a.marker)-ji(i);if(l>=0&&c<=0||l<=0&&c>=0)continue;if(l<=0&&(dt(f.to,n)||ji(a.marker)-Bi(i))>0||l>=0&&(dt(f.from,r)||Bi(a.marker)-ji(i))<0)return!0}}function zi(e){var t;while(t=qi(e))e=t.find(-1,!0).line;return e}function Wi(e){var t,n;while(t=Ri(e))e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function Xi(e,t){var n=As(e,t),r=zi(n);return n==r?t:Ds(r)}function Vi(e,t){if(t>e.lastLine())return t;var n=As(e,t),r;if(!$i(e,n))return t;while(r=Ri(n))n=r.find(1,!0).line;return Ds(n)+1}function $i(e,t){var n=x&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i){r=n[i];if(!r.marker.collapsed)continue;if(r.from==null)return!0;if(r.marker.widgetNode)continue;if(r.from==0&&r.marker.inclusiveLeft&&Ji(e,t,r))return!0}}function Ji(e,t,n){if(n.to==null){var r=n.marker.find(1,!0);return Ji(e,r.line,Ni(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,s=0;s<t.markedSpans.length;++s){i=t.markedSpans[s];if(i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(i.to==null||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ji(e,t,i))return!0}}function Qi(e,t,n){Hs(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&zr(e,null,n)}function Gi(e){return e.height!=null?e.height:(zo(document.body,e.node)||Uo(e.cm.display.measure,Io("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Yi(e,t,n,r){var i=new Ki(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),$r(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);i.insertAt==null?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t;if(!$i(e.doc,t)){var r=Hs(t)<e.doc.scrollTop;_s(t,t.height+Gi(i)),r&&zr(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function es(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Pi(e),Hi(e,n);var i=r?r(e):1;i!=e.height&&_s(e,i)}function ts(e){e.parent=null,Pi(e)}function ns(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";t[r]==null?t[r]=n[2]:(new RegExp("(?:^|s)"+n[2]+"(?:$|s)")).test(t[r])||(t[r]+=" "+n[2])}return e}function rs(e,t){if(e.blankLine)return e.blankLine(t);if(!e.innerMode)return;var n=T.innerMode(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}function is(e,t,n){for(var r=0;r<10;r++){var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function ss(e,t,n,r,i,s,o){var u=n.flattenSpans;u==null&&(u=e.options.flattenSpans);var a=0,f=null,l=new vi(t,e.options.tabSize),c;t==""&&ns(rs(n,r),s);while(!l.eol()){l.pos>e.options.maxHighlightLength?(u=!1,o&&as(e,t,r,l.pos),l.pos=t.length,c=null):c=ns(is(n,l,r),s);if(e.options.addModeClass){var h=T.innerMode(n,r).mode.name;h&&(c="m-"+(c?h+" "+c:h))}if(!u||f!=c)a<l.start&&i(l.start,f),a=l.start,f=c;l.start=l.pos}while(a<l.pos){var p=Math.min(l.pos,a+5e4);i(p,f),a=p}}function os(e,t,n,r){var i=[e.state.modeGen],s={};ss(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},s,r);for(var o=0;o<e.state.overlays.length;++o){var u=e.state.overlays[o],a=1,f=0;ss(e,t.text,u.mode,!0,function(e,t){var n=a;while(f<e){var r=i[a];r>e&&i.splice(a,1,e,i[a+1],r),a+=2,f=Math.min(e,r)}if(!t)return;if(u.opaque)i.splice(n,a-n,e,"cm-overlay "+t),a=n+2;else for(;n<a;n+=2){var s=i[n+1];i[n+1]=(s?s+" ":"")+"cm-overlay "+t}},s)}return{styles:i,classes:s.bgClass||s.textClass?s:null}}function us(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=os(e,t,t.stateAfter=$t(e,Ds(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function as(e,t,n,r){var i=e.doc.mode,s=new vi(t,e.options.tabSize);s.start=s.pos=r||0,t==""&&rs(i,n);while(!s.eol()&&s.pos<=e.options.maxHighlightLength)is(i,s,n),s.start=s.pos}function cs(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?ls:fs;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function hs(e,t){var n=Io("span",null,null,u?"padding-right: .1px":null),r={pre:Io("pre",[n]),content:n,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var s=i?t.rest[i-1]:t.line,a;r.pos=0,r.addToken=ds,(o||u)&&e.getOption("lineWrapping")&&(r.addToken=vs(r.addToken)),su(e.display.measure)&&(a=Bs(s))&&(r.addToken=ms(r.addToken,a)),r.map=[],ys(s,r,us(e,s)),s.styleClasses&&(s.styleClasses.bgClass&&(r.bgClass=Jo(s.styleClasses.bgClass,r.bgClass||"")),s.styleClasses.textClass&&(r.textClass=Jo(s.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(ru(e.display.measure))),i==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return oo(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Jo(r.pre.className,r.textClass||"")),r}function ps(e){var t=Io("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function ds(e,t,n,i,s,o){if(!t)return;var u=e.cm.options.specialChars,a=!1;if(!u.test(t)){e.col+=t.length;var f=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,f),r&&(a=!0),e.pos+=t.length}else{var f=document.createDocumentFragment(),l=0;for(;;){u.lastIndex=l;var c=u.exec(t),h=c?c.index-l:t.length-l;if(h){var p=document.createTextNode(t.slice(l,l+h));r?f.appendChild(Io("span",[p])):f.appendChild(p),e.map.push(e.pos,e.pos+h,p),e.col+=h,e.pos+=h}if(!c)break;l+=h+1;if(c[0]=="	"){var d=e.cm.options.tabSize,v=d-e.col%d,p=f.appendChild(Io("span",No(v),"cm-tab"));e.col+=v}else{var p=e.cm.options.specialCharPlaceholder(c[0]);r?f.appendChild(Io("span",[p])):f.appendChild(p),e.col+=1}e.map.push(e.pos,e.pos+1,p),e.pos++}}if(n||i||s||a){var m=n||"";i&&(m+=i),s&&(m+=s);var g=Io("span",[f],m);return o&&(g.title=o),e.content.appendChild(g)}e.content.appendChild(f)}function vs(e){function t(e){var t=" ";for(var n=0;n<e.length-2;++n)t+=n%2?" ":"";return t+=" ",t}return function(n,r,i,s,o,u){e(n,r.replace(/ {3,}/g,t),i,s,o,u)}}function ms(e,t){return function(n,r,i,s,o,u){i=i?i+" cm-force-border":"cm-force-border";var a=n.pos,f=a+r.length;for(;;){for(var l=0;l<t.length;l++){var c=t[l];if(c.to>a&&c.from<=a)break}if(c.to>=f)return e(n,r,i,s,o,u);e(n,r.slice(0,c.to-a),i,s,null,u),s=null,r=r.slice(c.to-a),a=c.to}}}function gs(e,t,n,r){var i=!r&&n.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function ys(e,t,n){var r=e.markedSpans,i=e.text,s=0;if(!r){for(var o=1;o<n.length;o+=2)t.addToken(t,i.slice(s,s=n[o]),cs(n[o+1],t.cm.options));return}var u=i.length,a=0,o=1,f="",l,c=0,h,p,d,v,m;for(;;){if(c==a){h=p=d=v="",m=null,c=Infinity;var g=[];for(var y=0;y<r.length;++y){var b=r[y],w=b.marker;b.from<=a&&(b.to==null||b.to>a)?(b.to!=null&&c>b.to&&(c=b.to,p=""),w.className&&(h+=" "+w.className),w.startStyle&&b.from==a&&(d+=" "+w.startStyle),w.endStyle&&b.to==c&&(p+=" "+w.endStyle),w.title&&!v&&(v=w.title),w.collapsed&&(!m||Fi(m.marker,w)<0)&&(m=b)):b.from>a&&c>b.from&&(c=b.from),w.type=="bookmark"&&b.from==a&&w.widgetNode&&g.push(w)}if(m&&(m.from||0)==a){gs(t,(m.to==null?u+1:m.to)-a,m.marker,m.from==null);if(m.to==null)return}if(!m&&g.length)for(var y=0;y<g.length;++y)gs(t,0,g[y])}if(a>=u)break;var E=Math.min(u,c);for(;;){if(f){var S=a+f.length;if(!m){var x=S>E?f.slice(0,E-a):f;t.addToken(t,x,l?l+h:h,d,a+x.length==c?p:"",v)}if(S>=E){f=f.slice(E-a),a=E;break}a=S,d=""}f=i.slice(s,s=n[o++]),l=cs(n[o++],t.cm.options)}}}function bs(e,t){return t.from.ch==0&&t.to.ch==0&&Co(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ws(e,t,n,r){function i(e){return n?n[e]:null}function s(e,n,i){es(e,n,i,r),fo(e,"change",e,t)}var o=t.from,u=t.to,a=t.text,f=As(e,o.line),l=As(e,u.line),c=Co(a),h=i(a.length-1),p=u.line-o.line;if(bs(e,t)){for(var d=0,v=[];d<a.length-1;++d)v.push(new Zi(a[d],i(d),r));s(l,l.text,h),p&&e.remove(o.line,p),v.length&&e.insert(o.line,v)}else if(f==l)if(a.length==1)s(f,f.text.slice(0,o.ch)+c+f.text.slice(u.ch),h);else{for(var v=[],d=1;d<a.length-1;++d)v.push(new Zi(a[d],i(d),r));v.push(new Zi(c+f.text.slice(u.ch),h,r)),s(f,f.text.slice(0,o.ch)+a[0],i(0)),e.insert(o.line+1,v)}else if(a.length==1)s(f,f.text.slice(0,o.ch)+a[0]+l.text.slice(u.ch),i(0)),e.remove(o.line+1,p);else{s(f,f.text.slice(0,o.ch)+a[0],i(0)),s(l,c+l.text.slice(u.ch),h);for(var d=1,v=[];d<a.length-1;++d)v.push(new Zi(a[d],i(d),r));p>1&&e.remove(o.line+1,p-1),e.insert(o.line+1,v)}fo(e,"change",e,t)}function Es(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Ss(e){this.children=e;var t=0,n=0;for(var r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function ks(e,t,n){function r(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var u=e.linked[o];if(u.doc==i)continue;var a=s&&u.sharedHist;if(n&&!a)continue;t(u.doc,a),r(u.doc,e,a)}}r(e,null,!0)}function Ls(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,O(e),C(e),e.options.lineWrapping||j(e),e.options.mode=t.modeOption,_n(e)}function As(e,t){t-=e.first;if(t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],s=i.chunkSize();if(t<s){n=i;break}t-=s}return n.lines[t]}function Os(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function Ms(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function _s(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Ds(e){if(e.parent==null)return null;var t=e.parent,n=Lo(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n+t.first}function Ps(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],s=i.height;if(t<s){e=i;continue e}t-=s,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var o=e.lines[r],u=o.height;if(t<u)break;t-=u}return n+r}function Hs(e){e=zi(e);var t=0,n=e.parent;for(var r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var s=n.parent;s;n=s,s=n.parent)for(var r=0;r<s.children.length;++r){var o=s.children[r];if(o==n)break;t+=o.height}return t}function Bs(e){var t=e.order;return t==null&&(t=e.order=xu(e.text)),t}function js(e){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Fs(e,t){var n={from:vt(t.from),to:Cr(t),text:Os(e,t.from,t.to)};return Xs(e,n,t.from.line,t.to.line+1),ks(e,function(e){Xs(e,n,t.from.line,t.to.line+1)},!0),n}function Is(e){while(e.length){var t=Co(e);if(!t.ranges)break;e.pop()}}function qs(e,t){if(t)return Is(e.done),Co(e.done);if(e.done.length&&!Co(e.done).ranges)return Co(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Co(e.done)}function Rs(e,t,n,r){var i=e.history;i.undone.length=0;var s=+(new Date),o;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&e.cm&&i.lastModTime>s-e.cm.options.historyEventDelay||t.origin.charAt(0)=="*"))&&(o=qs(i,i.lastOp==r))){var u=Co(o.changes);dt(t.from,t.to)==0&&dt(t.from,u.to)==0?u.to=Cr(t):o.changes.push(Fs(e,t))}else{var a=Co(i.done);(!a||!a.ranges)&&Ws(e.sel,i.done),o={changes:[Fs(e,t)],generation:i.generation},i.done.push(o);while(i.done.length>i.undoDepth)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration
,i.lastModTime=i.lastSelTime=s,i.lastOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,u||oo(e,"historyAdded")}function Us(e,t,n,r){var i=t.charAt(0);return i=="*"||i=="+"&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function zs(e,t,n,r){var i=e.history,s=r&&r.origin;n==i.lastOp||s&&i.lastSelOrigin==s&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==s||Us(e,s,Co(i.done),t))?i.done[i.done.length-1]=t:Ws(t,i.done),i.lastSelTime=+(new Date),i.lastSelOrigin=s,i.lastOp=n,r&&r.clearRedo!==!1&&Is(i.undone)}function Ws(e,t){var n=Co(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Xs(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function Vs(e){if(!e)return null;for(var t=0,n;t<e.length;++t)e[t].marker.explicitlyCleared?n||(n=e.slice(0,t)):n&&n.push(e[t]);return n?n.length?n:null:e}function $s(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(Vs(n[r]));return i}function Js(e,t,n){for(var r=0,i=[];r<e.length;++r){var s=e[r];if(s.ranges){i.push(n?yt.prototype.deepCopy.call(s):s);continue}var o=s.changes,u=[];i.push({changes:u});for(var a=0;a<o.length;++a){var f=o[a],l;u.push({from:f.from,to:f.to,text:f.text});if(t)for(var c in f)(l=c.match(/^spans_(\d+)$/))&&Lo(t,Number(l[1]))>-1&&(Co(u)[c]=f[c],delete f[c])}}return i}function Ks(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Qs(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],o=!0;if(s.ranges){s.copied||(s=e[i]=s.deepCopy(),s.copied=!0);for(var u=0;u<s.ranges.length;u++)Ks(s.ranges[u].anchor,t,n,r),Ks(s.ranges[u].head,t,n,r);continue}for(var u=0;u<s.changes.length;++u){var a=s.changes[u];if(n<a.from.line)a.from=pt(a.from.line+r,a.from.ch),a.to=pt(a.to.line+r,a.to.ch);else if(t<=a.to.line){o=!1;break}}o||(e.splice(0,i+1),i=0)}}function Gs(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Qs(e.done,n,r,i),Qs(e.undone,n,r,i)}function eo(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==0}function no(e){return e.target||e.srcElement}function ro(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),g&&e.ctrlKey&&t==1&&(t=3),t}function fo(e,t){function i(e){return function(){e.apply(null,r)}}var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);uo||(++ao,uo=[],setTimeout(lo,0));for(var s=0;s<n.length;++s)uo.push(i(n[s]))}function lo(){--ao;var e=uo;uo=null;for(var t=0;t<e.length;++t)e[t]()}function co(e,t,n){return oo(e,n||t.type,e,t),eo(t)||t.codemirrorIgnore}function ho(e){var t=e._handlers&&e._handlers.cursorActivity;if(!t)return;var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var r=0;r<t.length;++r)Lo(n,t[r])==-1&&n.push(t[r])}function po(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function vo(e){e.prototype.on=function(e,t){io(this,e,t)},e.prototype.off=function(e,t){so(this,e,t)}}function Eo(){this.id=null}function xo(e,t,n){for(var r=0,i=0;;){var s=e.indexOf("	",r);s==-1&&(s=e.length);var o=s-r;if(s==e.length||i+o>=t)return r+Math.min(o,t-i);i+=s-r,i+=n-i%n,r=s+1;if(i>=t)return r}}function No(e){while(To.length<=e)To.push(Co(To)+" ");return To[e]}function Co(e){return e[e.length-1]}function Lo(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Ao(e,t){var n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Oo(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&Mo(t,n),n}function Mo(e,t,n){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(n!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function _o(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ho(e,t){return t?t.source.indexOf("\\w")>-1&&Po(e)?!0:t.test(e):Po(e)}function Bo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Fo(e){return e.charCodeAt(0)>=768&&jo.test(e)}function Io(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")i.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function Ro(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Uo(e,t){return Ro(e).appendChild(t)}function zo(e,t){if(e.contains)return e.contains(t);while(t=t.parentNode)if(t==e)return!0}function Wo(){return document.activeElement}function Xo(e){return new RegExp("\\b"+e+"\\b\\s*")}function Vo(e,t){var n=Xo(t);n.test(e.className)&&(e.className=e.className.replace(n,""))}function $o(e,t){Xo(t).test(e.className)||(e.className+=" "+t)}function Jo(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++)n[r]&&!Xo(n[r]).test(t)&&(t+=" "+n[r]);return t}function Ko(e){if(!document.body.getElementsByClassName)return;var t=document.body.getElementsByClassName("CodeMirror");for(var n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function Go(){if(Qo)return;Yo(),Qo=!0}function Yo(){var e;io(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,eu=null,Ko($n)},100))}),io(window,"blur",function(){Ko(xr)})}function tu(e){if(eu!=null)return eu;var t=Io("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Uo(e,t),t.offsetWidth&&(eu=t.offsetHeight-t.clientHeight),eu||0}function ru(e){if(nu==null){var t=Io("span","");Uo(e,Io("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(nu=t.offsetWidth<=1&&t.offsetHeight>2&&!n)}return nu?Io("span",""):Io("span","",null,"display: inline-block; width: 1px; margin-right: -1px")}function su(e){if(iu!=null)return iu;var t=Uo(e,document.createTextNode("AA")),n=qo(t,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var r=qo(t,1,2).getBoundingClientRect();return iu=r.right-n.right<3}function lu(e,t,n,r){if(!e)return r(t,n,"ltr");var i=!1;for(var s=0;s<e.length;++s){var o=e[s];if(o.from<n&&o.to>t||t==n&&o.to==t)r(Math.max(o.from,t),Math.min(o.to,n),o.level==1?"rtl":"ltr"),i=!0}i||r(t,n,"ltr")}function cu(e){return e.level%2?e.to:e.from}function hu(e){return e.level%2?e.from:e.to}function pu(e){var t=Bs(e);return t?cu(t[0]):0}function du(e){var t=Bs(e);return t?hu(Co(t)):e.text.length}function vu(e,t){var n=As(e.doc,t),r=zi(n);r!=n&&(t=Ds(r));var i=Bs(r),s=i?i[0].level%2?du(r):pu(r):0;return pt(t,s)}function mu(e,t){var n,r=As(e.doc,t);while(n=Ri(r))r=n.find(1,!0).line,t=null;var i=Bs(r),s=i?i[0].level%2?pu(r):du(r):r.text.length;return pt(t==null?Ds(r):t,s)}function gu(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:t<n}function bu(e,t){yu=null;for(var n=0,r;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(r!=null)return gu(e,i.level,e[r].level)?(i.from!=i.to&&(yu=r),n):(i.from!=i.to&&(yu=n),r);r=n}}return r}function wu(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&Fo(e.text.charAt(t)));return t}function Eu(e,t,n,r){var i=Bs(e);if(!i)return Su(e,t,n,r);var s=bu(i,t),o=i[s],u=wu(e,t,o.level%2?-n:n,r);for(;;){if(u>o.from&&u<o.to)return u;if(u==o.from||u==o.to)return bu(i,u)==s?u:(o=i[s+=n],n>0==o.level%2?o.to:o.from);o=i[s+=n];if(!o)return null;n>0==o.level%2?u=wu(e,o.to,-1,r):u=wu(e,o.from,1,r)}}function Su(e,t,n,r){var i=t+n;if(r)while(i>0&&Fo(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=t&&(document.documentMode==null||document.documentMode<8),r=t&&(document.documentMode==null||document.documentMode<9),i=t&&(document.documentMode==null||document.documentMode<10),s=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),o=t||s,u=/WebKit\//.test(navigator.userAgent),a=u&&/Qt\/\d+\.\d+/.test(navigator.userAgent),f=/Chrome\//.test(navigator.userAgent),l=/Opera\//.test(navigator.userAgent),c=/Apple Computer/.test(navigator.vendor),h=/KHTML\//.test(navigator.userAgent),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),d=/PhantomJS/.test(navigator.userAgent),v=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),m=v||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),g=v||/Mac/.test(navigator.platform),y=/win/i.test(navigator.platform),b=l&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);b&&(b=Number(b[1])),b&&b>=15&&(l=!1,u=!0);var w=g&&(a||l&&(b==null||b<12.11)),E=e||o&&!r,S=!1,x=!1,pt=T.Pos=function(e,t){if(!(this instanceof pt))return new pt(e,t);this.line=e,this.ch=t},dt=T.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};yt.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(dt(n.anchor,r.anchor)!=0||dt(n.head,r.head)!=0)return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new bt(vt(this.ranges[t].anchor),vt(this.ranges[t].head));return new yt(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(dt(t,r.from())>=0&&dt(e,r.to())<=0)return n}return-1}},bt.prototype={from:function(){return gt(this.anchor,this.head)},to:function(){return mt(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var sn={left:0,right:0,top:0,bottom:0},wn,xn=0,Gn,Yn,ir=0,fr=0,lr=null;o?lr=-0.53:e?lr=15:f?lr=-0.7:c&&(lr=-1/3);var dr,gr=null,Cr=T.changeEnd=function(e){return e.text?pt(e.from.line+e.text.length-1,Co(e.text).length+(e.text.length==1?e.from.ch:0)):e.to};T.prototype={constructor:T,focus:function(){window.focus(),zn(this),qn(this)},pseudoFocus:function(){Wn(this)},pseudoLostFocus:function(){xr(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,Zr.hasOwnProperty(e)&&kn(this,Zr[e])(this,t,r)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if(t[n]==e||typeof t[n]!="string"&&t[n].name==e)return t.splice(n,1),!0},addOverlay:Ln(function(e,t){var n=e.token?e:T.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,_n(this)}),removeOverlay:Ln(function(e){var t=this.state.overlays;for(var n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||typeof e=="string"&&r.name==e){t.splice(n,1),this.state.modeGen++,_n(this);return}}}),indentLine:Ln(function(e,t,n){typeof t!="string"&&typeof t!="number"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Nt(this.doc,e)&&Vr(this,e,t,n)}),indentSelection:Ln(function(e){var t=this.doc.sel.ranges,n=-1;for(var r=0;r<t.length;r++){var i=t[r];if(!i.empty()){var s=Math.max(n,i.from().line),o=i.to();n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var u=s;u<n;++u)Vr(this,u,e)}else i.head.line>n&&(Vr(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Wr(this))}}),getTokenAt:function(e,t){var n=this.doc;e=xt(n,e);var r=$t(this,e.line,t),i=this.doc.mode,s=As(n,e.line),o=new vi(s.text,this.options.tabSize);while(o.pos<e.ch&&!o.eol()){o.start=o.pos;var u=is(i,o,r)}return{start:o.start,end:o.pos,string:o.current(),type:u||null,state:r}},getTokenTypeAt:function(e){e=xt(this.doc,e);var t=us(this,As(this.doc,e.line)),n=0,r=(t.length-1)/2,i=e.ch,s;if(i==0)s=t[2];else for(;;){var o=n+r>>1;if((o?t[o*2-1]:0)>=i)r=o;else{if(!(t[o*2+1]<i)){s=t[o*2+2];break}n=o+1}}var u=s?s.indexOf("cm-overlay "):-1;return u<0?s:u==0?null:s.slice(0,u-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?T.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!oi.hasOwnProperty(t))return oi;var r=oi[t],i=this.getModeAt(e);if(typeof i[t]=="string")r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var s=0;s<i[t].length;s++){var o=r[i[t][s]];o&&n.push(o)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var s=0;s<r._global.length;s++){var u=r._global[s];u.pred(i,this)&&Lo(n,u.val)==-1&&n.push(u.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=St(n,e==null?n.first+n.size-1:e),$t(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return e==null?n=r.head:typeof e=="object"?n=xt(this.doc,e):n=e?r.from():r.to(),vn(this,n,t||"page")},charCoords:function(e,t){return dn(this,xt(this.doc,e),t||"page")},coordsChar:function(e,t){return e=pn(this,e,t||"page"),yn(this,e.left,e.top)},lineAtHeight:function(e,t){return e=pn(this,{top:e,left:0},t||"page").top,Ps(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=As(this.doc,e);return hn(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Hs(i):0)},defaultTextHeight:function(){return En(this.display)},defaultCharWidth:function(){return Sn(this.display)},setGutterMarker:Ln(function(e,t,n){return $r(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&Bo(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Ln(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Dn(t,r,"gutter"),Bo(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineClass:Ln(function(e,t,n){return $r(this,e,"class",function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("(?:^|\\s)"+n+"(?:$|\\s)")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:Ln(function(e,t,n){return $r(this,e,"class",function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!s)return!1;var o=s.index+s[0].length;e[r]=i.slice(0,s.index)+(!s.index||o==i.length?"":" ")+i.slice(o)||null}return!0})}),addLineWidget:Ln(function(e,t,n){return Yi(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!Nt(this.doc,e))return null;var t=e;e=As(this.doc,e);if(!e)return null}else{var t=Ds(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=vn(this,xt(this.doc,e));var o=e.bottom,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="above"||r=="near"){var a=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(r=="above"||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(o=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&Rr(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:Ln(yr),triggerOnKeyPress:Ln(Er),triggerOnKeyUp:Ln(wr),execCommand:function(e){if(fi.hasOwnProperty(e))return fi[e](this)},findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=0,o=xt(this.doc,e);s<t;++s){o=Kr(this.doc,o,i,n,r);if(o.hitSide)break}return o},moveH:Ln(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Kr(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},wo)}),deleteH:Ln(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Jr(this,function(n){var i=Kr(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var o=0,u=xt(this.doc,e);o<t;++o){var a=vn(this,u,"div");s==null?s=a.left:a.left=s,u=Qr(this,a,i,n);if(u.hitSide)break}return u},moveV:Ln(function(e,t){var n=this,r=this.doc,i=[],s=!n.display.shift&&!r.extend&&r.sel.somethingSelected();r.extendSelectionsBy(function(o){if(s)return e<0?o.from():o.to();var u=vn(n,o.head,"div");o.goalColumn!=null&&(u.left=o.goalColumn),i.push(u.left);var a=Qr(n,u,e,t);return t=="page"&&o==r.sel.primary()&&zr(n,null,dn(n,a,"div").top-u.top),a},wo);if(i.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=i[o]}),toggleOverwrite:function(e){if(e!=null&&e==this.state.overwrite)return;(this.state.overwrite=!this.state.overwrite)?$o(this.display.cursorDiv,"CodeMirror-overwrite"):Vo(this.display.cursorDiv,"CodeMirror-overwrite"),oo(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return Wo()==this.display.input},scrollTo:Ln(function(e,t){(e!=null||t!=null)&&Xr(this),e!=null&&(this.curOp.scrollLeft=e),t!=null&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=mo;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Ln(function(e,t){e==null?(e={from:this.doc.sel.primary().head,to:null},t==null&&(t=this.options.cursorScrollMargin)):typeof e=="number"?e={from:pt(e,0),to:null}:e.from==null&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0;if(e.from.line!=null)Xr(this),this.curOp.scrollToPos=e;else{var n=Ur(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Ln(function(e,t){function n(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}e!=null&&(this.display.wrapper.style.width=n(e)),t!=null&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&an(this),this.curOp.forceUpdate=!0,oo(this,"refresh",this)}),operation:function(e){return Cn(this,e)},refresh:Ln(function(){var e=this.display.cachedTextHeight;_n(this),this.curOp.forceUpdate=!0,fn(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),H(this),(e==null||Math.abs(e-En(this.display))>.5)&&O(this),oo(this,"refresh",this)}),swapDoc:Ln(function(e){var t=this.doc;return t.cm=null,Ls(this,e),fn(this),Un(this),this.scrollTo(e.scrollLeft,e.scrollTop),fo(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},vo(T);var Yr=T.defaults={},Zr=T.optionHandlers={},ti=T.Init={toString:function(){return"CodeMirror.Init"}};ei("value","",function(e,t){e.setValue(t)},!0),ei("mode",null,function(e,t){e.doc.modeOption=t,C(e)},!0),ei("indentUnit",2,C,!0),ei("indentWithTabs",!1),ei("smartIndent",!0),ei("tabSize",4,function(e){k(e),fn(e),_n(e)},!0),ei("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),ei("specialCharPlaceholder",ps,function(e){e.refresh()},!0),ei("electricChars",!0),ei("rtlMoveVisually",!y),ei("wholeLineUpdateBefore",!0),ei("theme","default",function(e){_(e),D(e)},!0),ei("keyMap","default",M),ei("extraKeys",null),ei("lineWrapping",!1,L,!0),ei("gutters",[],function(e){F(e.options),D(e)},!0),ei("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?X(e.display)+"px":"0",e.refresh()},!0),ei("coverGutterNextToScrollbar",!1,q,!0),ei("lineNumbers",!1,function(e){F(e.options),D(e)},!0),ei("firstLineNumber",1,D,!0),ei("lineNumberFormatter",function(e){return e},D,!0),ei("showCursorWhenSelecting",!1,qt,!0),ei("resetSelectionOnContextMenu",!0),ei("readOnly",!1,function(e,t){t=="nocursor"?(xr(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Un(e))}),ei("disableInput",!1,function(e,t){t||Un(e)},!0),ei("dragDrop",!0),ei("cursorBlinkRate",530),ei("cursorScrollMargin",0),ei("cursorHeight",1),ei("workTime",100),ei("workDelay",100),ei("flattenSpans",!0,k,!0),ei("addModeClass",!1,k,!0),ei("pollInterval",100),ei("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),ei("historyEventDelay",1250),ei("viewportMargin",10,function(e){e.refresh()},!0),ei("maxHighlightLength",1e4,k,!0),ei("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),ei("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),ei("autofocus",null);var ni=T.modes={},ri=T.mimeModes={};T.defineMode=function(e,t){!T.defaults.mode&&e!="null"&&(T.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}ni[e]=t},T.defineMIME=function(e,t){ri[e]=t},T.resolveMode=function(e){if(typeof e=="string"&&ri.hasOwnProperty(e))e=ri[e];else if(e&&typeof e.name=="string"&&ri.hasOwnProperty(e.name)){var t=ri[e.name];typeof t=="string"&&(t={name:t}),e=Oo(t,e),e.name=t.name}else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return T.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},T.getMode=function(e,t){var t=T.resolveMode(t),n=ni[t.name];if(!n)return T.getMode(e,"text/plain");var r=n(e,t);if(ii.hasOwnProperty(t.name)){var i=ii[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}r.name=t.name,t.helperType&&(r.helperType=t.helperType);if(t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r},T.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),T.defineMIME("text/plain","null");var ii=T.modeExtensions={};T.extendMode=function(e,t){var n=ii.hasOwnProperty(e)?ii[e]:ii[e]={};Mo(t,n)},T.defineExtension=function(e,t){T.prototype[e]=t},T.defineDocExtension=function(e,t){Ts.prototype[e]=t},T.defineOption=ei;var si=[];T.defineInitHook=function(e){si.push(e)};var oi=T.helpers={};T.registerHelper=function(e,t,n){oi.hasOwnProperty(e)||(oi[e]=T[e]={_global:[]}),oi[e][t]=n},T.registerGlobalHelper=function(e,t,n,r){T.registerHelper(e,t,r),oi[e]._global.push({pred:n,val:r})};var ui=T.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},ai=T.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};T.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var fi=T.commands={selectAll:function(e){e.setSelection(pt(e.firstLine(),0),pt(e.lastLine()),yo)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),yo)},killLine:function(e){Jr(e,function(t){if(t.empty()){var n=As(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:pt(t.head.line+1,0)}:{from:t.head,to:pt(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Jr(e,function(t){return{from:pt(t.from().line,0),to:xt(e.doc,pt(t.to().line+1,0))}})},delLineLeft:function(e){Jr(e,function(e){return{from:pt(e.from().line,0),to:e.from()}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(pt(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(pt(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return vu(e,t.head.line)},wo)},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){var n=vu(e,t.head.line),r=e.getLineHandle(n.line),i=Bs(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/)),o=t.head.line==n.line&&t.head.ch<=s&&t.head.ch;return pt(n.line,o?0:s)}return n},wo)},goLineEnd:function(e){e.extendSelectionsBy(function(t){return mu(e,t.head.line)},wo)},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},wo)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},wo)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){var t=[],n=e.listSelections(),r=e.options.tabSize;for(var i=0;i<n.length;i++){var s=n[i].from(),o=So(e.getLine(s.line),s.ch,r);t.push((new Array(r-o%r+1)).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Cn(e,function(){var t=e.listSelections(),n=[];for(var r=0;r<t.length;r++){var i=t[r].head,s=As(e.doc,i.line).text;if(s){i.ch==s.length&&(i=new pt(i.line,i.ch-1));if(i.ch>0)i=new pt(i.line,i.ch+1),e.replaceRange(s.charAt(i.ch-1)+s.charAt(i.ch-2),pt(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var o=As(e.doc,i.line-1).text;o&&e.replaceRange(s.charAt(0)+"\n"+o.charAt(o.length-1),pt(i.line-1,o.length-1),pt(i.line,1),"+transpose")}}n.push(new bt(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){Cn(e,function(){var t=e.listSelections().length;for(var n=0;n<t;n++){var r=e.listSelections()[n];e.replaceRange("\n",r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0),Wr(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},li=T.keyMap={};li.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},li.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},li.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},li.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},li["default"]=g?li.macDefault:li.pcDefault;var hi=T.lookupKey=function(e,t,n){function r(t){t=ci(t);var i=t[e];if(i===!1)return"stop";if(i!=null&&n(i))return!0;if(t.nofallthrough)return"stop";var s=t.fallthrough;if(s==null)return!1;if(Object.prototype.toString.call(s)!="[object Array]")return r(s);for(var o=0;o<s.length;++o){var u=r(s[o]);if(u)return u}return!1}for(var i=0;i<t.length;++i){var s=r(t[i]);if(s)return s!="stop"}},pi=T.isModifierKey=function(e){var t=fu[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"},di=T.keyName=function(e,t){if(l&&e.keyCode==34&&e["char"])return!1;var n=fu[e.keyCode];if(n==null||e.altGraphKey)return!1;e.altKey&&(n="Alt-"+n);if(w?e.metaKey:e.ctrlKey)n="Ctrl-"+n;if(w?e.ctrlKey:e.metaKey)n="Cmd-"+n;return!t&&e.shiftKey&&(n="Shift-"+n),n};T.fromTextArea=function(e,t){function r(){e.value=a.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(t.autofocus==null){var n=Wo();t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){io(e.form,"submit",r);if(!t.leaveSubmitMethodAlone){var i=e.form,s=i.submit;try{var o=i.submit=function(){r(),i.submit=s,i.submit(),i.submit=o}}catch(u){}}}e.style.display="none";var a=T(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a.save=r,a.getTextArea=function(){return e},a.toTextArea=function(){r(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(so(e.form,"submit",r),typeof e.form.submit=="function"&&(e.form.submit=s))},a};var vi=T.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};vi.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=So(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?So(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return So(this.string,null,this.tabSize)-(this.lineStart?So(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if(typeof e!="string"){var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var mi=T.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};vo(mi),mi.prototype.clear=function(){if(this.explicitlyCleared)return;var e=this.doc.cm,t=e&&!e.curOp;t&&Tn(e);if(po(this,"clear")){var n=this.find();n&&fo(this,"clear",n.from,n.to)}var r=null,i=null;for(var s=0;s<this.lines.length;++s){var o=this.lines[s],u=Ni(o.markedSpans,this);e&&!this.collapsed?Dn(e,Ds(o),"text"):e&&(u.to!=null&&(i=Ds(o)),u.from!=null&&(r=Ds(o))),o.markedSpans=Ci(o.markedSpans,u),u.from==null&&this.collapsed&&!$i(this.doc,o)&&e&&_s(o,En(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var a=zi
(this.lines[s]),f=B(a);f>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=f,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&_n(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&jt(e.doc)),e&&fo(e,"markerCleared",e,this),t&&Nn(e),this.parent&&this.parent.clear()},mi.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);var n,r;for(var i=0;i<this.lines.length;++i){var s=this.lines[i],o=Ni(s.markedSpans,this);if(o.from!=null){n=pt(t?s:Ds(s),o.from);if(e==-1)return n}if(o.to!=null){r=pt(t?s:Ds(s),o.to);if(e==1)return r}}return n&&{from:n,to:r}},mi.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;if(!e||!n)return;Cn(n,function(){var r=e.line,i=Ds(e.line),s=tn(n,i);s&&(un(s),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0;if(!$i(t.doc,r)&&t.height!=null){var o=t.height;t.height=null;var u=Gi(t)-o;u&&_s(r,r.height+u)}})},mi.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||Lo(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},mi.prototype.detachLine=function(e){this.lines.splice(Lo(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var gi=0,bi=T.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};vo(bi),bi.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();fo(this,"clear")},bi.prototype.find=function(e,t){return this.primary.find(e,t)};var Ki=T.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};vo(Ki),Ki.prototype.clear=function(){var e=this.cm,t=this.line.widgets,n=this.line,r=Ds(n);if(r==null||!t)return;for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var s=Gi(this);Cn(e,function(){Qi(e,n,-s),Dn(e,r,"widget"),_s(n,Math.max(0,n.height-s))})},Ki.prototype.changed=function(){var e=this.height,t=this.cm,n=this.line;this.height=null;var r=Gi(this)-e;if(!r)return;Cn(t,function(){t.curOp.forceUpdate=!0,Qi(t,n,r),_s(n,n.height+r)})};var Zi=T.Line=function(e,t,n){this.text=e,Hi(this,t),this.height=n?n(this):1};vo(Zi),Zi.prototype.lineNo=function(){return Ds(this)};var fs={},ls={};Es.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,ts(i),fo(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Ss.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),o=r.height;r.removeInner(e,s),this.height-=o-r.height,i==s&&(this.children.splice(n--,1),r.parent=null);if((t-=s)==0)break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Es))){var u=[];this.collapse(u),this.children=[new Es(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<=s){i.insertInner(e,t,n);if(i.lines&&i.lines.length>50){while(i.lines.length>50){var o=i.lines.splice(i.lines.length-25,25),u=new Es(o);i.height-=u.height,this.children.splice(r+1,0,u),u.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Ss(t);if(!e.parent){var r=new Ss(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=Lo(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e);if(i.iterN(e,o,n))return!0;if((t-=o)==0)break;e=0}else e-=s}}};var xs=0,Ts=T.Doc=function(e,t,n){if(!(this instanceof Ts))return new Ts(e,t,n);n==null&&(n=0),Ss.call(this,[new Es([new Zi("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=pt(n,0);this.sel=Et(r),this.history=new js(null),this.id=++xs,this.modeOption=t,typeof e=="string"&&(e=ou(e)),ws(this,{from:r,to:r,text:e}),Pt(this,Et(r),yo)};Ts.prototype=Oo(Ss.prototype,{constructor:Ts,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ms(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:An(function(e){var t=pt(this.first,0),n=this.first+this.size-1;_r(this,{from:t,to:pt(n,As(this,n).text.length),text:ou(e),origin:"setValue"},!0),Pt(this,Et(t))}),replaceRange:function(e,t,n,r){t=xt(this,t),n=n?xt(this,n):t,Fr(this,e,t,n,r)},getRange:function(e,t,n){var r=Os(this,xt(this,e),xt(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Nt(this,e))return As(this,e)},getLineNumber:function(e){return Ds(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=As(this,e)),zi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return xt(this,e)},getCursor:function(e){var t=this.sel.primary(),n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e=="to"||e===!1?n=t.to():n=t.from(),n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:An(function(e,t,n){Mt(this,xt(this,typeof e=="number"?pt(e,t||0):e),null,n)}),setSelection:An(function(e,t,n){Mt(this,xt(this,e),xt(this,t||e),n)}),extendSelection:An(function(e,t,n){Lt(this,xt(this,e),t&&xt(this,t),n)}),extendSelections:An(function(e,t){At(this,Ct(this,e,t))}),extendSelectionsBy:An(function(e,t){At(this,Ao(this.sel.ranges,e),t)}),setSelections:An(function(e,t,n){if(!e.length)return;for(var r=0,i=[];r<e.length;r++)i[r]=new bt(xt(this,e[r].anchor),xt(this,e[r].head));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Pt(this,wt(i,t),n)}),addSelection:An(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new bt(xt(this,e),xt(this,t||e))),Pt(this,wt(r,r.length-1),n)}),getSelection:function(e){var t=this.sel.ranges,n;for(var r=0;r<t.length;r++){var i=Os(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return e===!1?n:n.join(e||"\n")},getSelections:function(e){var t=[],n=this.sel.ranges;for(var r=0;r<n.length;r++){var i=Os(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||"\n")),t[r]=i}return t},replaceSelection:function(e,t,n){var r=[];for(var i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:An(function(e,t,n){var r=[],i=this.sel;for(var s=0;s<i.ranges.length;s++){var o=i.ranges[s];r[s]={from:o.from(),to:o.to(),text:ou(e[s]),origin:n}}var u=t&&t!="end"&&Or(this,r,t);for(var s=r.length-1;s>=0;s--)_r(this,r[s]);u?Dt(this,u):this.cm&&Wr(this.cm)}),undo:An(function(){Pr(this,"undo")}),redo:An(function(){Pr(this,"redo")}),undoSelection:An(function(){Pr(this,"undo",!0)}),redoSelection:An(function(){Pr(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){var e=this.history,t=0,n=0;for(var r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new js(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Js(this.history.done),undone:Js(this.history.undone)}},setHistory:function(e){var t=this.history=new js(this.history.maxGeneration);t.done=Js(e.done.slice(0),null,!0),t.undone=Js(e.undone.slice(0),null,!0)},markText:function(e,t,n){return yi(this,xt(this,e),xt(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=xt(this,e),yi(this,e,e,n,"bookmark")},findMarksAt:function(e){e=xt(this,e);var t=[],n=As(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=xt(this,e),t=xt(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(s){var o=s.markedSpans;if(o)for(var u=0;u<o.length;u++){var a=o[u];!(i==e.line&&e.ch>a.to||a.from==null&&i!=e.line||i==t.line&&a.from>t.ch)&&(!n||n(a.marker))&&r.push(a.marker.parent||a.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;if(i>e)return t=e,!0;e-=i,++n}),xt(this,pt(n,t))},indexFromPos:function(e){e=xt(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Ts(Ms(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new Ts(Ms(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Si(r,Ei(this)),r},unlinkDoc:function(e){e instanceof T&&(e=e.doc);if(this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc!=e)continue;this.linked.splice(t,1),e.unlinkDoc(this),xi(Ei(this));break}if(e.history==this.history){var r=[e.id];ks(e,function(e){r.push(e.id)},!0),e.history=new js(null),e.history.done=Js(this.history.done,r),e.history.undone=Js(this.history.undone,r)}},iterLinkedDocs:function(e){ks(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Ts.prototype.eachLine=Ts.prototype.iter;var Ns="iter insert remove copy getEditor".split(" ");for(var Cs in Ts.prototype)Ts.prototype.hasOwnProperty(Cs)&&Lo(Ns,Cs)<0&&(T.prototype[Cs]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ts.prototype[Cs]));vo(Ts);var Ys=T.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Zs=T.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},to=T.e_stop=function(e){Ys(e),Zs(e)},io=T.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},so=T.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}},oo=T.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)},uo,ao=0,mo=30,go=T.Pass={toString:function(){return"CodeMirror.Pass"}},yo={scroll:!1},bo={origin:"*mouse"},wo={origin:"+move"};Eo.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var So=T.countColumn=function(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=r||0,o=i||0;;){var u=e.indexOf("	",s);if(u<0||u>=t)return o+(t-s);o+=u-s,o+=n-o%n,s=u+1}},To=[""],ko=function(e){e.select()};v?ko=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(ko=function(e){try{e.select()}catch(t){}}),[].indexOf&&(Lo=function(e,t){return e.indexOf(t)}),[].map&&(Ao=function(e,t){return e.map(t)});var Do=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Po=T.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Do.test(e))},jo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,qo;document.createRange?qo=function(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r}:qo=function(e,t,n){var r=document.body.createTextRange();return r.moveToElementText(e.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},t&&(Wo=function(){try{return document.activeElement}catch(e){return document.body}});var Qo=!1,Zo=function(){if(r)return!1;var e=Io("div");return"draggable"in e||"dragDrop"in e}(),eu,nu,iu,ou=T.splitLines="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},uu=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},au=function(){var e=Io("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),fu={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};T.keyNames=fu,function(){for(var e=0;e<10;e++)fu[e+48]=fu[e+96]=String(e);for(var e=65;e<=90;e++)fu[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)fu[e+111]=fu[e+63235]="F"+e}();var yu,xu=function(){function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1773?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":n==8204?"b":"L"}function f(e,t,n){this.level=e,this.from=t,this.to=n}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(e){if(!r.test(e))return!1;var t=e.length,l=[];for(var c=0,h;c<t;++c)l.push(h=n(e.charCodeAt(c)));for(var c=0,p=a;c<t;++c){var h=l[c];h=="m"?l[c]=p:p=h}for(var c=0,d=a;c<t;++c){var h=l[c];h=="1"&&d=="r"?l[c]="n":s.test(h)&&(d=h,h=="r"&&(l[c]="R"))}for(var c=1,p=l[0];c<t-1;++c){var h=l[c];h=="+"&&p=="1"&&l[c+1]=="1"?l[c]="1":h==","&&p==l[c+1]&&(p=="1"||p=="n")&&(l[c]=p),p=h}for(var c=0;c<t;++c){var h=l[c];if(h==",")l[c]="N";else if(h=="%"){for(var v=c+1;v<t&&l[v]=="%";++v);var m=c&&l[c-1]=="!"||v<t&&l[v]=="1"?"1":"N";for(var g=c;g<v;++g)l[g]=m;c=v-1}}for(var c=0,d=a;c<t;++c){var h=l[c];d=="L"&&h=="1"?l[c]="L":s.test(h)&&(d=h)}for(var c=0;c<t;++c)if(i.test(l[c])){for(var v=c+1;v<t&&i.test(l[v]);++v);var y=(c?l[c-1]:a)=="L",b=(v<t?l[v]:a)=="L",m=y||b?"L":"R";for(var g=c;g<v;++g)l[g]=m;c=v-1}var w=[],E;for(var c=0;c<t;)if(o.test(l[c])){var S=c;for(++c;c<t&&o.test(l[c]);++c);w.push(new f(0,S,c))}else{var x=c,T=w.length;for(++c;c<t&&l[c]!="L";++c);for(var g=x;g<c;)if(u.test(l[g])){x<g&&w.splice(T,0,new f(1,x,g));var N=g;for(++g;g<c&&u.test(l[g]);++g);w.splice(T,0,new f(2,N,g)),x=g}else++g;x<c&&w.splice(T,0,new f(1,x,c))}return w[0].level==1&&(E=e.match(/^\s+/))&&(w[0].from=E[0].length,w.unshift(new f(0,0,E[0].length))),Co(w).level==1&&(E=e.match(/\s+$/))&&(Co(w).to-=E[0].length,w.push(new f(0,t-E[0].length,t))),w[0].level!=Co(w).level&&w.push(new f(w[0].level,t,t)),w}}();return T.version="4.2.0",T}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function i(e,t,i,o){var u=e.getLineHandle(t.line),a=t.ch-1,f=a>=0&&r[u.text.charAt(a)]||r[u.text.charAt(++a)];if(!f)return null;var l=f.charAt(1)==">"?1:-1;if(i&&l>0!=(a==t.ch))return null;var c=e.getTokenTypeAt(n(t.line,a+1)),h=s(e,n(t.line,a+(l>0?1:0)),l,c||null,o);return h==null?null:{from:n(t.line,a),to:h&&h.pos,match:h&&h.ch==f.charAt(0),forward:l>0}}function s(e,t,i,s,o){var u=o&&o.maxScanLineLength||1e4,a=o&&o.maxScanLines||1e3,f=[],l=o&&o.bracketRegex?o.bracketRegex:/[(){}[\]]/,c=i>0?Math.min(t.line+a,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-a);for(var h=t.line;h!=c;h+=i){var p=e.getLine(h);if(!p)continue;var d=i>0?0:p.length-1,v=i>0?p.length:-1;if(p.length>u)continue;h==t.line&&(d=t.ch-(i<0?1:0));for(;d!=v;d+=i){var m=p.charAt(d);if(l.test(m)&&(s===undefined||e.getTokenTypeAt(n(h,d+1))==s)){var g=r[m];if(g.charAt(1)==">"==i>0)f.push(m);else{if(!f.length)return{pos:n(h,d),ch:m};f.pop()}}}}return h-i==(i>0?e.lastLine():e.firstLine())?!1:null}function o(e,r,s){var o=e.state.matchBrackets.maxHighlightLineLength||1e3,u=[],a=e.listSelections();for(var f=0;f<a.length;f++){var l=a[f].empty()&&i(e,a[f].head,!1,s);if(l&&e.getLine(l.from.line).length<=o){var c=l.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";u.push(e.markText(l.from,n(l.from.line,l.from.ch+1),{className:c})),l.to&&e.getLine(l.to.line).length<=o&&u.push(e.markText(l.to,n(l.to.line,l.to.ch+1),{className:c}))}}if(u.length){t&&e.state.focused&&e.display.input.focus();var h=function(){e.operation(function(){for(var e=0;e<u.length;e++)u[e].clear()})};if(!r)return h;setTimeout(h,800)}}function a(e){e.operation(function(){u&&(u(),u=null),u=o(e,!1,e.state.matchBrackets)})}var t=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),n=e.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},u=null;e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&t.off("cursorActivity",a),n&&(t.state.matchBrackets=typeof n=="object"?n:{},t.on("cursorActivity",a))}),e.defineExtension("matchBrackets",function(){o(this,!0)}),e.defineExtension("findMatchingBracket",function(e,t,n){return i(this,e,t,n)}),e.defineExtension("scanForBracket",function(e,t,n,r){return s(this,e,t,n,r)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function u(e,t){var n=e.getRange(o(t.line,t.ch-1),o(t.line,t.ch+1));return n.length==2?n:null}function a(t){var n={name:"autoCloseBrackets",Backspace:function(n){if(n.getOption("disableInput"))return e.Pass;var r=n.listSelections();for(var i=0;i<r.length;i++){if(!r[i].empty())return e.Pass;var s=u(n,r[i].head);if(!s||t.indexOf(s)%2!=0)return e.Pass}for(var i=r.length-1;i>=0;i--){var a=r[i].head;n.replaceRange("",o(a.line,a.ch-1),o(a.line,a.ch+1))}}},r="";for(var i=0;i<t.length;i+=2)(function(t,i){t!=i&&(r+=i),n["'"+t+"'"]=function(n){if(n.getOption("disableInput"))return e.Pass;var u=n.listSelections(),a,f;for(var l=0;l<u.length;l++){var c=u[l],h=c.head,p;if(t=="'"&&n.getTokenTypeAt(h)=="comment")return e.Pass;var f=n.getRange(h,o(h.line,h.ch+1));if(!c.empty())p="surround";else if(t==i&&f==i)n.getRange(h,o(h.line,h.ch+3))==t+t+t?p="skipThree":p="skip";else if(t==i&&h.ch>1&&n.getRange(o(h.line,h.ch-2),h)==t+t&&(h.ch<=2||n.getRange(o(h.line,h.ch-3),o(h.line,h.ch-2))!=t))p="addFour";else{if(t==i&&e.isWordChar(f))return e.Pass;if(!(n.getLine(h.line).length==h.ch||r.indexOf(f)>=0||s.test(f)))return e.Pass;p="both"}if(!a)a=p;else if(a!=p)return e.Pass}n.operation(function(){if(a=="skip")n.execCommand("goCharRight");else if(a=="skipThree")for(var e=0;e<3;e++)n.execCommand("goCharRight");else if(a=="surround"){var r=n.getSelections();for(var e=0;e<r.length;e++)r[e]=t+r[e]+i;n.replaceSelections(r,"around")}else a=="both"?(n.replaceSelection(t+i,null),n.execCommand("goCharLeft")):a=="addFour"&&(n.replaceSelection(t+t+t+t,"before"),n.execCommand("goCharRight"))})},t!=i&&(n["'"+i+"'"]=function(t){var n=t.listSelections();for(var r=0;r<n.length;r++){var s=n[r];if(!s.empty()||t.getRange(s.head,o(s.head.line,s.head.ch+1))!=i)return e.Pass}t.execCommand("goCharRight")})})(t.charAt(i),t.charAt(i+1));return n}function f(t){return function(n){if(n.getOption("disableInput"))return e.Pass;var r=n.listSelections();for(var i=0;i<r.length;i++){if(!r[i].empty())return e.Pass;var s=u(n,r[i].head);if(!s||t.indexOf(s)%2!=0)return e.Pass}n.operation(function(){n.replaceSelection("\n\n",null),n.execCommand("goCharLeft"),r=n.listSelections();for(var e=0;e<r.length;e++){var t=r[e].head.line;n.indentLine(t,null,!0),n.indentLine(t+1,null,!0)}})}}var t="()[]{}''\"\"",n='()[]{}""',r="[]{}",i=["markdown","haml","xml","jade","html"],s=/\s/,o=e.Pos;e.defineOption("autoCloseBrackets",!1,function(s,o,u){u!=e.Init&&u&&s.removeKeyMap("autoCloseBrackets");if(!o)return;var l;_.contains(i,s.getOption("mode"))?l=n:l=t;var c=r;typeof o=="string"?l=o:typeof o=="object"&&(o.pairs!=null&&(l=o.pairs),o.explode!=null&&(c=o.explode));var h=a(l);c&&(h.Enter=f(c)),s.addKeyMap(h)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):typeof define=="function"&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return typeof e=="string"?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length,"searching";n?t.pos=n.index:t.skipToEnd()}}}function n(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new n)}function i(e){return typeof e=="string"&&e==e.toLowerCase()}function s(e,t,n){return e.getSearchCursor(t,n,i(t))}function o(e,t,n,r,i){e.openDialog?e.openDialog(t,i,{value:r}):i(prompt(n,r))}function u(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}function a(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);return t?(e=new RegExp(t[1],t[2].indexOf("i")==-1?"":"i"),e.test("")&&(e=/x^/)):e==""&&(e=/x^/),e}function l(e,n){var s=r(e);if(s.query)return c(e,n);o(e,f,"Search for:",e.getSelection(),function(r){e.operation(function(){if(!r||s.query)return;s.query=a(r),e.removeOverlay(s.overlay,i(s.query)),s.overlay=t(s.query,i(s.query)),e.addOverlay(s.overlay),s.posFrom=s.posTo=e.getCursor(),c(e,n)})})}function c(t,n){t.operation(function(){var i=r(t),o=s(t,i.query,n?i.posFrom:i.posTo);if(!o.find(n)){o=s(t,i.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0));if(!o.find(n))return}t.setSelection(o.from(),o.to()),t.scrollIntoView({from:o.from(),to:o.to()}),i.posFrom=o.from(),i.posTo=o.to()})}function h(e){e.operation(function(){var t=r(e);if(!t.query)return;t.query=null,e.removeOverlay(t.overlay)})}function m(e,t){o(e,p,"Replace:",e.getSelection(),function(n){if(!n)return;n=a(n),o(e,d,"Replace with:","",function(r){if(t)e.operation(function(){for(var t=s(e,n);t.findNext();)if(typeof n!="string"){var i=e.getRange(t.from(),t.to()).match(n);t.replace(r.replace(/\$(\d)/g,function(e,t){return i[t]}))}else t.replace(r)});else{h(e);var i=s(e,n,e.getCursor()),o=function(){var t=i.from(),r;if(!(r=i.findNext())){i=s(e,n);if(!(r=i.findNext())||t&&i.from().line==t.line&&i.from().ch==t.ch)return}e.setSelection(i.from(),i.to()),e.scrollIntoView({from:i.from(),to:i.to()}),u(e,v,"Replace?",[function(){a(r)},o])},a=function(e){i.replace(typeof n=="string"?r:r.replace(/\$(\d)/g,function(t,n){return e[n]})),o()};o()}})})}var f='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',p='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',d='With: <input type="text" style="width: 10em"/>',v="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";e.commands.find=function(e){h(e),l(e)},e.commands.findNext=l,e.commands.findPrev=function(e){l(e,!0)},e.commands.clearSearch=h,e.commands.replace=m,e.commands.replaceAll=function(e){m(e,!0)}}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function n(e,n,i,s){this.atOccurrence=!1,this.doc=e,s==null&&typeof n=="string"&&(s=!1),i=i?e.clipPos(i):t(0,0),this.pos={from:i,to:i};if(typeof n!="string")n.global||(n=new RegExp(n.source,n.ignoreCase?"ig":"g")),this.matches=function(r,i){if(r){n.lastIndex=0;var s=e.getLine(i.line).slice(0,i.ch),o=0,u,a;for(;;){n.lastIndex=o;var f=n.exec(s);if(!f)break;u=f,a=u.index,o=u.index+(u[0].length||1);if(o==s.length)break}var l=u&&u[0].length||0;l||(a==0&&s.length==0?u=undefined:a!=e.getLine(i.line).length&&l++)}else{n.lastIndex=i.ch;var s=e.getLine(i.line),u=n.exec(s),l=u&&u[0].length||0,a=u&&u.index;a+l!=s.length&&!l&&(l=1)}if(u&&l)return{from:t(i.line,a),to:t(i.line,a+l),match:u}};else{var o=n;s&&(n=n.toLowerCase());var u=s?function(e){return e.toLowerCase()}:function(e){return e},a=n.split("\n");if(a.length==1)n.length?this.matches=function(i,s){if(i){var a=e.getLine(s.line).slice(0,s.ch),f=u(a),l=f.lastIndexOf(n);if(l>-1)return l=r(a,f,l),{from:t(s.line,l),to:t(s.line,l+o.length)}}else{var a=e.getLine(s.line).slice(s.ch),f=u(a),l=f.indexOf(n);if(l>-1)return l=r(a,f,l)+s.ch,{from:t(s.line,l),to:t(s.line,l+o.length)}}}:this.matches=function(){};else{var f=o.split("\n");this.matches=function(n,r){var i=a.length-1;if(n){if(r.line-(a.length-1)<e.firstLine())return;if(u(e.getLine(r.line).slice(0,f[i].length))!=a[a.length-1])return;var s=t(r.line,f[i].length);for(var o=r.line-1,l=i-1;l>=1;--l,--o)if(a[l]!=u(e.getLine(o)))return;var c=e.getLine(o),h=c.length-f[0].length;if(u(c.slice(h))!=a[0])return;return{from:t(o,h),to:s}}if(r.line+(a.length-1)>e.lastLine())return;var c=e.getLine(r.line),h=c.length-f[0].length;if(u(c.slice(h))!=a[0])return;var p=t(r.line,h);for(var o=r.line+1,l=1;l<i;++l,++o)if(a[l]!=u(e.getLine(o)))return;if(e.getLine(o).slice(0,f[i].length)!=a[i])return;return{from:p,to:t(o,f[i].length)}}}}}function r(e,t,n){if(e.length==t.length)return n;for(var r=Math.min(n,e.length);;){var i=e.slice(0,r).toLowerCase().length;if(i<n)++r;else{if(!(i>n))return r;--r}}}var t=e.Pos;n.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function i(e){var r=t(e,0);return n.pos={from:r,to:r},n.atOccurrence=!1,!1}var n=this,r=this.doc.clipPos(e?this.pos.from:this.pos.to);for(;;){if(this.pos=this.matches(e,r))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!r.line)return i(0);r=t(r.line-1,this.doc.getLine(r.line-1).length)}else{var s=this.doc.lineCount();if(r.line==s-1)return i(s);r=t(r.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(n){if(!this.atOccurrence)return;var r=e.splitLines(n);this.doc.replaceRange(r,this.pos.from,this.pos.to),this.pos.to=t(this.pos.from.line+r.length-1,r[r.length-1].length+(r.length==1?this.pos.from.ch:0))}},e.defineExtension("getSearchCursor",function(e,t,r){return new n(this.doc,e,t,r)}),e.defineDocExtension("getSearchCursor",function(e,t,r){return new n(this,e,t,r)}),e.defineExtension("selectMatches",function(t,n){var r=[],i,s=this.getSearchCursor(t,this.getCursor("from"),n);while(i=s.findNext()){if(e.cmpPos(s.to(),this.getCursor("to"))>0)break;r.push({anchor:s.from(),head:s.to()})}r.length&&this.setSelections(r,0)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n){var r=e.getWrapperElement(),i;return i=r.appendChild(document.createElement("div")),n?i.className="CodeMirror-dialog CodeMirror-dialog-bottom":i.className="CodeMirror-dialog CodeMirror-dialog-top",typeof t=="string"?i.innerHTML=t:i.appendChild(t),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(r,i,s){function f(){if(u)return;u=!0,o.parentNode.removeChild(o)}n(this,null);var o=t(this,r,s&&s.bottom),u=!1,a=this,l=o.getElementsByTagName("input")[0],c;if(l)s&&s.value&&(l.value=s.value),e.on(l,"keydown",function(t){if(s&&s.onKeyDown&&s.onKeyDown(t,l.value,f))return;if(t.keyCode==13||t.keyCode==27)l.blur(),e.e_stop(t),f(),a.focus(),t.keyCode==13&&i(l.value)}),s&&s.onKeyUp&&e.on(l,"keyup",function(e){s.onKeyUp(e,l.value,f)}),s&&s.value&&(l.value=s.value),l.focus(),e.on(l,"blur",f);else if(c=o.getElementsByTagName("button")[0])e.on(c,"click",function(){f(),a.focus()}),c.focus(),e.on(c,"blur",f);return f}),e.defineExtension("openConfirm",function(r,i,s){function c(){if(a)return;a=!0,o.parentNode.removeChild(o),f.focus()}n(this,null);var o=t(this,r,s&&s.bottom),u=o.getElementsByTagName("button"),a=!1,f=this,l=1;u[0].focus();for(var h=0;h<u.length;++h){var p=u[h];(function(t){e.on(p,"click",function(n){e.e_preventDefault(n),c(),t&&t(f)})})(i[h]),e.on(p,"blur",function(
){--l,setTimeout(function(){l<=0&&c()},200)}),e.on(p,"focus",function(){++l})}}),e.defineExtension("openNotification",function(r,i){function f(){if(u)return;u=!0,clearTimeout(a),s.parentNode.removeChild(s)}n(this,f);var s=t(this,r,i&&i.bottom),o=i&&(i.duration===undefined?5e3:i.duration),u=!1,a;e.on(s,"click",function(t){e.e_preventDefault(t),f()}),o&&(a=setTimeout(f,i.duration))})});var emmet=function(e){function o(e,t,n){var r;return t&&t.hasOwnProperty("constructor")?r=t.constructor:r=function(){e.apply(this,arguments)},_.extend(r,e),s.prototype=e.prototype,r.prototype=new s,t&&_.extend(r.prototype,t),n&&_.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r}function a(e){return!(e in i)&&u&&u(e),i[e]}var t="html",n="plain";if(typeof _=="undefined")try{_=e[["require"][0]]("underscore")}catch(r){}if(typeof _=="undefined")throw"Cannot access to Underscore.js lib";var i={_:_},s=function(){},u=null;return{define:function(e,t){e in i||(i[e]=_.isFunction(t)?this.exec(t):t)},require:a,exec:function(t,n){return t.call(n||e,_.bind(a,this),_,this)},extend:function(e,t){var n=o(this,e,t);return n.extend=this.extend,e.hasOwnProperty("toString")&&(n.prototype.toString=e.toString),n},expandAbbreviation:function(e,n,r,i){if(!e)return"";n=n||t;var s=a("filters"),o=a("abbreviationParser");r=a("profile").get(r,n),a("tabStops").resetTabstopIndex();var u=s.extractFromAbbreviation(e),f=o.parse(u[0],{syntax:n,contextNode:i}),l=s.composeList(n,r,u[1]);return s.apply(f,l,r),f.toString()},defaultSyntax:function(){return t},defaultProfile:function(){return n},log:function(){e.console&&e.console.log&&e.console.log.apply(e.console,arguments)},setModuleLoader:function(e){u=e}}}(this);typeof exports!="undefined"&&(typeof module!="undefined"&&module.exports&&(exports=module.exports=emmet),exports.emmet=emmet),typeof define!="undefined"&&define(emmet),emmet.define("abbreviationParser",function(e,t){function f(e){this.parent=null,this.children=[],this._attributes=[],this.abbreviation="",this.counter=1,this._name=null,this._text="",this.repeatCount=1,this.hasImplicitRepeat=!1,this._data={},this.start="",this.end="",this.content="",this.padding=""}function l(e){return e.substring(1,e.length-1)}function c(e,t){var n;while(n=e.next()){if(n===t)return!0;if(n=="\\")continue}return!1}function h(n){n=e("utils").trim(n);var r=new f,s=r.addChild(),o,u=e("stringStream").create(n),a=1e3,c;while(!u.eol()&&--a>0){o=u.peek();switch(o){case"(":u.start=u.pos;if(!u.skipToPair("(",")"))throw'Invalid abbreviation: mo matching ")" found for character at '+u.pos;var p=h(l(u.current()));(c=u.match(/^\*(\d+)?/,!0))&&s._setRepeat(c[1]),t.each(p.children,function(e){s.addChild(e)});break;case">":s=s.addChild(),u.next();break;case"+":s=s.parent.addChild(),u.next();break;case"^":var d=s.parent||s;s=(d.parent||d).addChild(),u.next();break;default:u.start=u.pos,u.eatWhile(function(e){if(e=="["||e=="{"){if(u.skipToPair(e,i[e]))return u.backUp(1),!0;throw'Invalid abbreviation: mo matching "'+i[e]+'" found for character at '+u.pos}if(e=="+"){u.next();var t=u.eol()||~"+>^*".indexOf(u.peek());return u.backUp(1),t}return e!="("&&b(e)}),s.setAbbreviation(u.current()),u.start=u.pos}}if(a<1)throw"Endless loop detected";return r}function p(t,n){t=e("utils").trim(t);var i=[],s=e("stringStream").create(t);s.eatSpace();while(!s.eol()){s.start=s.pos;if(!s.eatWhile(r))break;var o=s.current(),u="";if(s.peek()=="="){s.next(),s.start=s.pos;var a=s.peek();if(a=='"'||a=="'"){s.next();if(!c(s,a))throw"Invalid attribute value";u=s.current(),u=u.substring(1,u.length-1)}else{if(!s.eatWhile(/[^\s\]]/))throw"Invalid attribute value";u=s.current()}}i.push({name:o,value:u}),s.eatSpace()}return i}function d(t){var n=[],i={"#":"id",".":"class"},s=null,o=e("stringStream").create(t);while(!o.eol())switch(o.peek()){case"#":case".":s===null&&(s=o.pos);var u=i[o.peek()];o.next(),o.start=o.pos,o.eatWhile(r),n.push({name:u,value:o.current()});break;case"[":s===null&&(s=o.pos),o.start=o.pos;if(!o.skipToPair("[","]"))throw"Invalid attribute set definition";n=n.concat(p(l(o.current())));break;default:o.next()}return n.length?{element:t.substring(0,s),attributes:v(n)}:null}function v(e){e=t.map(e,function(e){return t.clone(e)});var n={};return t.filter(e,function(e){if(e.name in n){var t=n[e.name];return e.name.toLowerCase()=="class"?t.value+=(t.value.length?" ":"")+e.value:t.value=e.value,!1}return n[e.name]=e})}function m(t){if(!~t.indexOf("{"))return null;var n=e("stringStream").create(t);while(!n.eol())switch(n.peek()){case"[":case"(":n.skipToPair(n.peek(),i[n.peek()]);break;case"{":return n.start=n.pos,n.skipToPair("{","}"),{element:t.substring(0,n.start),text:l(n.current())};default:n.next()}}function g(e){for(var n=e.children.length-1,r,i,s;n>=0;n--){i=e.children[n];if(i.isRepeating()){s=r=i.repeatCount,i.repeatCount=1,i.updateProperty("counter",1),i.updateProperty("maxCount",s);while(--r>0)i.parent.addChild(i.clone(),n+1).updateProperty("counter",r+1).updateProperty("maxCount",s)}}return t.each(e.children,g),e}function y(e){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];r.isGroup()?r.replace(y(r).children):r.isEmpty()&&r.remove()}return t.each(e.children,y),e}function b(e){var t=e.charCodeAt(0),n="#.*:$-_!@|%";return t>64&&t<91||t>96&&t<123||t>47&&t<58||n.indexOf(e)!=-1}var n=/^[\w\-\$\:@\!%]+\+?$/i,r=/[\w\-:\$@]/,i={"[":"]","(":")","{":"}"},s=Array.prototype.splice,o=[],u=[],a=[];return f.prototype={addChild:function(e,n){return e=e||new f,e.parent=this,t.isUndefined(n)?this.children.push(e):this.children.splice(n,0,e),e},clone:function(){var e=new f,n=["abbreviation","counter","_name","_text","repeatCount","hasImplicitRepeat","start","end","content","padding"];return t.each(n,function(t){e[t]=this[t]},this),e._attributes=t.map(this._attributes,function(e){return t.clone(e)}),e._data=t.clone(this._data),e.children=t.map(this.children,function(t){return t=t.clone(),t.parent=e,t}),e},remove:function(){return this.parent&&(this.parent.children=t.without(this.parent.children,this)),this},replace:function(){var e=this.parent,n=t.indexOf(e.children,this),r=t.flatten(arguments);s.apply(e.children,[n,1].concat(r)),t.each(r,function(t){t.parent=e})},updateProperty:function(e,n){return this[e]=n,t.each(this.children,function(t){t.updateProperty(e,n)}),this},find:function(e){return this.findAll(e)[0]},findAll:function(e){if(!t.isFunction(e)){var n=e.toLowerCase();e=function(e){return e.name().toLowerCase()==n}}var r=[];return t.each(this.children,function(t){e(t)&&r.push(t),r=r.concat(t.findAll(e))}),t.compact(r)},data:function(t,n){return arguments.length==2&&(this._data[t]=n,t=="resource"&&e("elements").is(n,"snippet")&&(this.content=n.data,this._text&&(this.content=e("abbreviationUtils").insertChildContent(n.data,this._text)))),this._data[t]},name:function(){var t=this.matchedResource();return e("elements").is(t,"element")?t.name:this._name},attributeList:function(){var n=[],r=this.matchedResource();return e("elements").is(r,"element")&&t.isArray(r.attributes)&&(n=n.concat(r.attributes)),v(n.concat(this._attributes))},attribute:function(e,n){if(arguments.length==2){var r=t.indexOf(t.pluck(this._attributes,"name"),e.toLowerCase());~r?this._attributes[r].value=n:this._attributes.push({name:e,value:n})}return(t.find(this.attributeList(),function(t){return t.name==e})||{}).value},matchedResource:function(){return this.data("resource")},index:function(){return this.parent?t.indexOf(this.parent.children,this):-1},_setRepeat:function(e){e?this.repeatCount=parseInt(e,10)||1:this.hasImplicitRepeat=!0},setAbbreviation:function(e){e=e||"";var t=this;e=e.replace(/\*(\d+)?$/,function(e,n){return t._setRepeat(n),""}),this.abbreviation=e;var r=m(e);r&&(e=r.element,this.content=this._text=r.text);var i=d(e);i&&(e=i.element,this._attributes=i.attributes),this._name=e;if(this._name&&!n.test(this._name))throw"Invalid abbreviation"},toString:function(){var n=e("utils"),r=this.start,i=this.end,s=this.content,o=this;t.each(a,function(e){r=e(r,o,"start"),s=e(s,o,"content"),i=e(i,o,"end")});var u=t.map(this.children,function(e){return e.toString()}).join("");return s=e("abbreviationUtils").insertChildContent(s,u,{keepVariable:!1}),r+n.padString(s,this.padding)+i},hasEmptyChildren:function(){return!!t.find(this.children,function(e){return e.isEmpty()})},hasImplicitName:function(){return!this._name&&!this.isTextNode()},isGroup:function(){return!this.abbreviation},isEmpty:function(){return!this.abbreviation&&!this.children.length},isRepeating:function(){return this.repeatCount>1||this.hasImplicitRepeat},isTextNode:function(){return!this.name()&&!this.attributeList().length},isElement:function(){return!this.isEmpty()&&!this.isTextNode()},deepestChild:function(){if(!this.children.length)return null;var e=this;while(e.children.length)e=t.last(e.children);return e}},a.push(function(t,n){return e("utils").replaceCounter(t,n.counter,n.maxCount)}),{parse:function(e,n){n=n||{};var r=h(e);if(n.contextNode){r._name=n.contextNode.name;var i={};t.each(r._attributes,function(e){i[e.name]=e}),t.each(n.contextNode.attributes,function(e){e.name in i?i[e.name].value=e.value:(e=t.clone(e),r._attributes.push(e),i[e.name]=e)})}return t.each(o,function(e){e(r,n)}),r=y(g(r)),t.each(u,function(e){e(r,n)}),r},AbbreviationNode:f,addPreprocessor:function(e){t.include(o,e)||o.push(e)},removeFilter:function(e){preprocessor=t.without(o,e)},addPostprocessor:function(e){t.include(u,e)||u.push(e)},removePostprocessor:function(e){u=t.without(u,e)},addOutputProcessor:function(e){t.include(a,e)||a.push(e)},removeOutputProcessor:function(e){a=t.without(a,e)},isAllowedChar:function(e){return e=String(e),b(e)||~">+^[](){}".indexOf(e)}}}),emmet.exec(function(e,t){function n(r,i){var s=e("resources"),o=e("elements"),u=e("abbreviationParser");t.each(t.clone(r.children),function(e){var r=s.getMatchedResource(e,i);if(t.isString(r))e.data("resource",o.create("snippet",r));else if(o.is(r,"reference")){var a=u.parse(r.data,{syntax:i});if(e.repeatCount>1){var f=a.findAll(function(e){return e.hasImplicitRepeat});t.each(f,function(t){t.repeatCount=e.repeatCount,t.hasImplicitRepeat=!1})}var l=a.deepestChild();l&&t.each(e.children,function(e){l.addChild(e)}),t.each(a.children,function(n){t.each(e.attributeList(),function(e){n.attribute(e.name,e.value)})}),e.replace(a.children)}else e.data("resource",r);n(e,i)})}e("abbreviationParser").addPreprocessor(function(e,t){var r=t.syntax||emmet.defaultSyntax();n(e,r)})}),emmet.exec(function(e,t){function i(t){var n=e("range"),i=[],s=e("stringStream").create(t);while(!s.eol()){if(s.peek()=="\\")s.next();else{s.start=s.pos;if(s.match(r,!0)){i.push(n.create(s.start,r));continue}}s.next()}return i}function s(n,r){var s=e("utils"),o=i(n);return o.reverse(),t.each(o,function(e){n=s.replaceSubstring(n,r,e)}),n}function o(e){return i(e.content).length?!0:!!t.find(e.attributeList(),function(e){return!!i(e.value).length})}function u(n,r,i){var u=n.findAll(function(e){return o(e)});o(n)&&u.unshift(n);if(u.length)t.each(u,function(e){e.content=s(e.content,r),t.each(e._attributes,function(e){e.value=s(e.value,r)})});else{var a=n.deepestChild()||n;i?a.content=r:a.content=e("abbreviationUtils").insertChildContent(a.content,r)}}var n=e("abbreviationParser"),r="$#";n.addPreprocessor(function(n,r){if(r.pastedContent){var i=e("utils"),s=t.map(i.splitByLines(r.pastedContent,!0),i.trim);n.findAll(function(e){if(e.hasImplicitRepeat)return e.data("paste",s),e.repeatCount=s.length})}}),n.addPostprocessor(function(e,n){var r=e.findAll(function(e){var n=e.data("paste"),r="";return t.isArray(n)?r=n[e.counter-1]:t.isFunction(n)?r=n(e.counter-1,e.content):n&&(r=n),r&&u(e,r,!!e.data("pasteOverwrites")),e.data("paste",null),!!n});!r.length&&n.pastedContent&&u(e,n.pastedContent)})}),emmet.exec(function(e,t){function n(r){var i=e("tagName");return t.each(r.children,function(e){if(e.hasImplicitName()||e.data("forceNameResolving"))e._name=i.resolve(e.parent.name());n(e)}),r}e("abbreviationParser").addPostprocessor(n)}),emmet.define("cssParser",function(e,t){function u(e){return typeof e!="undefined"}function a(){return{"char":n.chnum,line:n.linenum}}function f(e,t,i){var s=n,o=i||{};r.push({charstart:u(o["char"])?o["char"]:s.chnum,charend:u(o.charend)?o.charend:s.chnum,linestart:u(o.line)?o.line:s.linenum,lineend:u(o.lineend)?o.lineend:s.linenum,value:e,type:t||e})}function l(e,t){var i=n,s=t||{},o=u(s["char"])?s["char"]:i.chnum,a=u(s.line)?s.line:i.linenum;return{name:"ParseError",message:e+" at line "+(a+1)+" char "+(o+1),walker:i,tokens:r}}function c(){var e=n.ch,t="",r=a();while(e===" "||e==="	")t+=e,e=n.nextChar();f(t,"white",r)}function h(){var e=n,t=e.ch,r=t,i,s=a();i=e.nextChar();if(i!=="*")return s.charend=s["char"],s.lineend=s.line,f(r,r,s);while(t!=="*"||i!=="/")r+=i,t=i,i=e.nextChar();r+=i,e.nextChar(),f(r,"comment",s)}function p(){var e=n,t=e.ch,r=t,i=t,s,o=a();t=e.nextChar();while(t!==r){if(t==="\n"){s=e.nextChar();if(s!=="\\")throw l("Unterminated string",o);i+=t+s}else t==="\\"?i+=t+e.nextChar():i+=t;t=e.nextChar()}i+=t,e.nextChar(),f(i,"string",o)}function d(){var e=n,t=e.ch,r=0,i=t,s=a();t=e.nextChar();while(t!==")"&&!r){if(t==="(")r++;else if(t===")")r--;else if(t===!1)throw l("Unterminated brace",s);i+=t,t=e.nextChar()}i+=t,e.nextChar(),f(i,"brace",s)}function v(e){var t=n,r=t.ch,i=a(),u=e?e+r:r;r=t.nextChar(),e&&(i["char"]-=e.length);while(s(r)||o(r))u+=r,r=t.nextChar();f(u,"identifier",i)}function m(){var e=n,t=e.ch,r=a(),i=t,s=i===".",u;t=e.nextChar(),u=!o(t);if(s&&u)return r.charend=r["char"],r.lineend=r.line,f(i,".",r);if(i==="-"&&u)return v("-");while(t!==!1&&(o(t)||!s&&t==="."))t==="."&&(s=!0),i+=t,t=e.nextChar();f(i,"number",r)}function g(){var e=n,t=e.ch,r=a(),s=t,o=e.nextChar();if(o==="="&&i(s,!0)){s+=o,f(s,"match",r),e.nextChar();return}r.charend=r["char"]+1,r.lineend=r.line,f(s,s,r)}function y(){var e=n.ch;if(e===" "||e==="	")return c();if(e==="/")return h();if(e==='"'||e==="'")return p();if(e==="(")return d();if(e==="-"||e==="."||o(e))return m();if(s(e))return v();if(i(e))return g();if(e==="\n"){f("line"),n.nextChar();return}throw l("Unrecognized character")}function b(e,t){return e.charAt(t)=="\r"&&e.charAt(t+1)=="\n"?"\r\n":e.charAt(t)}var n,r=[],i,s,o;return n={lines:null,total_lines:0,linenum:-1,line:"",ch:"",chnum:-1,init:function(e){var t=n;t.lines=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"),t.total_lines=t.lines.length,t.chnum=-1,t.linenum=-1,t.ch="",t.line="",t.nextLine(),t.nextChar()},nextLine:function(){var e=this;return e.linenum+=1,e.total_lines<=e.linenum?e.line=!1:e.line=e.lines[e.linenum],e.chnum!==-1&&(e.chnum=0),e.line},nextChar:function(){var e=this;e.chnum+=1;while(e.line.charAt(e.chnum)==="")return this.nextLine()===!1?(e.ch=!1,!1):(e.chnum=-1,e.ch="\n","\n");return e.ch=e.line.charAt(e.chnum),e.ch},peek:function(){return this.line.charAt(this.chnum+1)}},s=function(e){return e=="&"||e==="_"||e==="-"||e>="a"&&e<="z"||e>="A"&&e<="Z"},o=function(e){return e!==!1&&e>="0"&&e<="9"},i=function(){var e="{}[]()+*=.,;:>~|\\%$#@^!".split(""),t="*^|$~".split(""),n={},r={},i=0;for(;i<e.length;i+=1)n[e[i]]=!0;for(i=0;i<t.length;i+=1)r[t[i]]=!0;return function(e,t){return t?!!r[e]:!!n[e]}}(),{lex:function(e){n.init(e),r=[];while(n.ch!==!1)y();return r},parse:function(e){var n=0;return t.map(this.lex(e),function(t){return t.type=="line"&&(t.value=b(e,n)),{type:t.type,start:n,end:n+=t.value.length}})},toSource:function(e){var t=0,n=e.length,r,i="";for(;t<n;t+=1)r=e[t],r.type==="line"?i+="\n":i+=r.value;return i}}}),emmet.define("xmlParser",function(e,t){function s(e,t){function n(n){return t.tokenize=n,n(e,t)}var s=e.next();if(s=="<"){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(f(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta";i=e.eat("/")?"closeTag":"openTag",e.eatSpace(),r="";var u;while(u=e.eat(/[^\s\u00a0=<>\"\'\/?]/))r+=u;return t.tokenize=o,"tag"}if(s=="&"){var l;return e.eat("#")?e.eat("x")?l=e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):l=e.eatWhile(/[\d]/)&&e.eat(";"):l=e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),l?"atom":"error"}return e.eatWhile(/[^&<]/),"text"}function o(e,t){var n=e.next();return n==">"||n=="/"&&e.eat(">")?(t.tokenize=s,i=n==">"?"endTag":"selfcloseTag","tag"):n=="="?(i="equals",null):/[\'\"]/.test(n)?(t.tokenize=u(n),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function u(e){return function(t,n){while(!t.eol())if(t.next()==e){n.tokenize=o;break}return"string"}}function a(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=s;break}n.next()}return e}}function f(e){return function(t,n){var r;while((r=t.next())!=null){if(r=="<")return n.tokenize=f(e+1),n.tokenize(t,n);if(r==">"){if(e==1){n.tokenize=s;break}return n.tokenize=f(e-1),n.tokenize(t,n)}}return"meta"}}function h(){for(var e=arguments.length-1;e>=0;e--)l.cc.push(arguments[e])}function p(){return h.apply(null,arguments),!0}function d(e,t){var r=n.doNotIndent.hasOwnProperty(e)||l.context&&l.context.noIndent;l.context={prev:l.context,tagName:e,indent:l.indented,startOfLine:t,noIndent:r}}function v(){l.context&&(l.context=l.context.prev)}function m(e){if(e=="openTag")return l.tagName=r,p(w,g(l.startOfLine));if(e=="closeTag"){var t=!1;return l.context?l.context.tagName!=r&&(n.implicitlyClosed.hasOwnProperty(l.context.tagName.toLowerCase())&&v(),t=!l.context||l.context.tagName!=r):t=!0,t&&(c="error"),p(y(t))}return p()}function g(e){return function(t){return t=="selfcloseTag"||t=="endTag"&&n.autoSelfClosers.hasOwnProperty(l.tagName.toLowerCase())?(b(l.tagName.toLowerCase()),p()):t=="endTag"?(b(l.tagName.toLowerCase()),d(l.tagName,e),p()):p()}}function y(e){return function(t){return e&&(c="error"),t=="endTag"?(v(),p()):(c="error",p(arguments.callee))}}function b(e){var t;for(;;){if(!l.context)return;t=l.context.tagName.toLowerCase();if(!n.contextGrabbers.hasOwnProperty(t)||!n.contextGrabbers[t].hasOwnProperty(e))return;v()}}function w(e){return e=="word"?(c="attribute",p(E,w)):e=="endTag"||e=="selfcloseTag"?h():(c="error",p(w))}function E(e){return e=="equals"?p(S,w):(n.allowMissing||(c="error"),e=="endTag"||e=="selfcloseTag"?h():p())}function S(e){return e=="string"?p(x):e=="word"&&n.allowUnquoted?(c="string",p()):(c="error",e=="endTag"||e=="selfCloseTag"?h():p())}function x(e){return e=="string"?p(x):h()}function T(){return{tokenize:s,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}}function N(e,t){e.sol()&&(t.startOfLine=!0,t.indented=0);if(e.eatSpace())return null;c=i=r=null;var n=t.tokenize(e,t);t.type=i;if((n||i)&&n!="comment"){l=t;for(;;){var s=t.cc.pop()||m;if(s(i||n))break}}return t.startOfLine=!1,c||n}var n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!0,allowMissing:!0},r=null,i=null,l=null,c;return{parse:function(t,n){n=n||0;var r=T(),i=e("stringStream").create(t),s=[];while(!i.eol())s.push({type:N(i,r),start:i.start+n,end:i.pos+n}),i.start=i.pos;return s}}}),emmet.define("string-score",function(e,t){return{score:function(e,t,n){if(e==t)return 1;if(t=="")return 0;var r=0,i=t.length,s=e.length,o,u,a=1,f;for(var l=0,c,h,p,d,v,m;l<i;++l){p=t.charAt(l),d=e.indexOf(p.toLowerCase()),v=e.indexOf(p.toUpperCase()),m=Math.min(d,v),h=m>-1?m:Math.max(d,v);if(h===-1){if(n){a+=1-n;continue}return 0}c=.1,e[h]===p&&(c+=.1),h===0?(c+=.6,l===0&&(o=1)):e.charAt(h-1)===" "&&(c+=.8),e=e.substring(h+1,s),r+=c}return u=r/i,f=(u*(i/s)+u)/2,f/=a,o&&f+.15<1&&(f+=.15),f}}}),emmet.define("utils",function(e,t){function r(e){this._data=[],this.length=0,e&&this.append(e)}var n="${0}";return r.prototype={append:function(e){this._data.push(e),this.length+=e.length},toString:function(){return this._data.join("")},valueOf:function(){return this.toString()}},{reTag:/<\/?[\w:\-]+(?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*\s*(\/?)>$/,endsWithTag:function(e){return this.reTag.test(e)},isNumeric:function(e){return typeof e=="string"&&(e=e.charCodeAt(0)),e&&e>47&&e<58},trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},getNewline:function(){var n=e("resources");if(!n)return"\n";var r=n.getVariable("newline");return t.isString(r)?r:"\n"},setNewline:function(t){var n=e("resources");n.setVariable("newline",t),n.setVariable("nl",t)},splitByLines:function(e,n){var r=this.getNewline(),i=(e||"").replace(/\r\n/g,"\n").replace(/\n\r/g,"\n").replace(/\r/g,"\n").replace(/\n/g,r).split(r);return n&&(i=t.filter(i,function(e){return e.length&&!!this.trim(e)},this)),i},normalizeNewline:function(e){return this.splitByLines(e).join(this.getNewline())},repeatString:function(e,t){var n=[];for(var r=0;r<t;r++)n.push(e);return n.join("")},getStringsPads:function(e){var n=t.map(e,function(e){return t.isString(e)?e.length:+e}),r=t.max(n);return t.map(n,function(e){var t=r-e;return t?this.repeatString(" ",t):""},this)},padString:function(n,r){var i=t.isNumber(r)?this.repeatString(e("resources").getVariable("indentation")||"	",r):r,s=[],o=this.splitByLines(n),u=this.getNewline();s.push(o[0]);for(var a=1;a<o.length;a++)s.push(u+i+o[a]);return s.join("")},zeroPadString:function(e,t){var n="",r=e.length;while(t>r++)n+="0";return n+e},unindentString:function(e,t){var n=this.splitByLines(e);for(var r=0;r<n.length;r++)n[r].search(t)==0&&(n[r]=n[r].substr(t.length));return n.join(this.getNewline())},replaceUnescapedSymbol:function(e,n,r){var i=0,s=e.length,o=n.length,u=0;while(i<s)if(e.charAt(i)=="\\")i+=o+1;else if(e.substr(i,o)==n){var a=o;u++;var f=r;if(t.isFunction(r)){var l=r(e,n,i,u);l?(a=l[0].length,f=l[1]):f=!1}if(f===!1){i++;continue}e=e.substring(0,i)+f+e.substring(i+a),s=e.length,i+=f.length}else i++;return e},replaceVariables:function(n,r){r=r||{};var i=t.isFunction(r)?r:function(e,t){return t in r?r[t]:null},s=e("resources");return e("tabStops").processText(n,{variable:function(e){var n=i(e.token,e.name,e);n===null&&(n=s.getVariable(e.name));if(n===null||t.isUndefined(n))n=e.token;return n}})},replaceCounter:function(e,n,r){var i="$";e=String(e),n=String(n),/^\-?\d+$/.test(n)&&(n=+n);var s=this;return this.replaceUnescapedSymbol(e,i,function(e,i,o,u){if(e.charAt(o+1)=="{"||s.isNumeric(e.charAt(o+1)))return!1;var a=o+1;while(e.charAt(a)=="$"&&e.charAt(a+1)!="{")a++;var f=a-o,l=0,c=!1,h;if(h=e.substr(a).match(/^@(\-?)(\d*)/))a+=h[0].length,h[1]&&(c=!0),l=parseInt(h[2]||1)-1;return c&&r&&t.isNumber(n)&&(n=r-n+1),n+=l,[e.substring(o,a),s.zeroPadString(n+"",f)]})},matchesTag:function(e){return this.reTag.test(e||"")},escapeText:function(e){return e.replace(/([\$\\])/g,"\\$1")},unescapeText:function(e){return e.replace(/\\(.)/g,"$1")},getCaretPlaceholder:function(){return t.isFunction(n)?n.apply(this,arguments):n},setCaretPlaceholder:function(e){n=e},getLinePadding:function(e){return(e.match(/^(\s+)/)||[""])[0]},getLinePaddingFromPosition:function(e,t){var n=this.findNewlineBounds(e,t);return this.getLinePadding(n.substring(e))},escapeForRegexp:function(e){var t=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return e.replace(t,"\\$&")},prettifyNumber:function(e,t){return e.toFixed(typeof t=="undefined"?2:t).replace(/\.?0+$/,"")},stringBuilder:function(e){return new r(e)},replaceSubstring:function(e,n,r,i){return t.isObject(r)&&"end"in r&&(i=r.end,r=r.start),t.isString(i)&&(i=r+i.length),t.isUndefined(i)&&(i=r),r<0||r>e.length?e:e.substring(0,r)+n+e.substring(i)},narrowToNonSpace:function(t,n,r){var i=e("range").create(n,r),s=/[\s\n\r\u00a0]/;while(i.start<i.end){if(!s.test(t.charAt(i.start)))break;i.start++}while(i.end>i.start){i.end--;if(!s.test(t.charAt(i.end))){i.end++;break}}return i},findNewlineBounds:function(t,n){var r=t.length,i=0,s=r-1;for(var o=n-1;o>0;o--){var u=t.charAt(o);if(u=="\n"||u=="\r"){i=o+1;break}}for(var a=n;a<r;a++){var u=t.charAt(a);if(u=="\n"||u=="\r"){s=a;break}}return e("range").create(i,s-i)},deepMerge:function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length;!t.isObject(u)&&!t.isFunction(u)&&(u={});for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;i&&(t.isObject(i)||(s=t.isArray(i)))?(s?(s=!1,o=r&&t.isArray(r)?r:[]):o=r&&t.isObject(r)?r:{},u[n]=this.deepMerge(o,i)):i!==undefined&&(u[n]=i)}return u}}}),emmet.define("range",function(e,t){function n(e,t,n){switch(n){case"eq":case"==":return e===t;case"lt":case"<":return e<t;case"lte":case"<=":return e<=t;case"gt":case">":return e>t;case"gte":case">=":return e>=t}}function r(e,n){t.isObject(e)&&"start"in e?(this.start=Math.min(e.start,e.end),this.end=Math.max(e.start,e.end)):t.isArray(e)?(this.start=e[0],this.end=e[1]):(n=t.isString(n)?n.length:+n,this.start=e,this.end=e+n)}return r.prototype={length:function(){return Math.abs(this.end-this.start)},equal:function(e){return this.cmp(e,"eq","eq")},shift:function(e){return this.start+=e,this.end+=e,this},overlap:function(e){return e.start<=this.end&&e.end>=this.start},intersection:function(e){if(this.overlap(e)){var t=Math.max(e.start,this.start),n=Math.min(e.end,this.end);return new r(t,n-t)}return null},union:function(e){if(this.overlap(e)){var t=Math.min(e.start,this.start),n=Math.max(e.end,this.end);return new r(t,n-t)}return null},inside:function(e){return this.cmp(e,"lte","gt")},contains:function(e){return this.cmp(e,"lt","gt")},include:function(e){return this.cmp(loc,"lte","gte")},cmp:function(e,t,i){var s,o;return e instanceof r?(s=e.start,o=e.end):s=o=e,n(this.start,s,t||"<=")&&n(this.end,o,i||">")},substring:function(e){return this.length()>0?e.substring(this.start,this.end):""},clone:function(){return new r(this.start,this.length())},toArray:function(){return[this.start,this.end]},toString:function(){return"{"+this.start+", "+this.length()+"}"}},{create:function(e,n){return t.isUndefined(e)||e===null?null:e instanceof r?e:(t.isObject(e)&&"start"in e&&"end"in e&&(n=e.end-e.start,e=e.start),new r(e,n))},create2:function(e,n){return t.isNumber(e)&&t.isNumber(n)&&(n-=e),this.create(e,n)}}}),emmet.define("handlerList",function(e,t){function n(){this._list=[]}return n.prototype={add:function(e,n){this._list.push(t.extend({order:0},n||{},{fn:e}))},remove:function(e){this._list=t.without(this._list,t.find(this._list,function(t){return t.fn===e}))},list:function(){return t.sortBy(this._list,"order").reverse()},listFn:function(){return t.pluck(this.list(),"fn")},exec:function(e,n){n=n||[];var r=null;return t.find(this.list(),function(t){r=t.fn.apply(t,n);if(r!==e)return!0}),r}},{create:function(){return new n}}}),emmet.define("tokenIterator",function(e,t){function n(e){this.tokens=e,this._position=0,this.reset()}return n.prototype={next:function(){if(this.hasNext()){var e=this.tokens[++this._i];return this._position=e.start,e}return null},current:function(){return this.tokens[this._i]},position:function(){return this._position},hasNext:function(){return this._i<this._il-1},reset:function(){this._i=-1,this._il=this.tokens.length},item:function(){return this.tokens[this._i]},itemNext:function(){return this.tokens[this._i+1]},itemPrev:function(){return this.tokens[this._i-1]},nextUntil:function(e,n){var r,i=t.isString(e)?function(t){return t.type==e}:e;while(r=this.next()){n&&n.call(this,r);if(i.call(this,r))break}}},{create:function(e){return new n(e)}}}),emmet.define("stringStream",function(e,t){function n(e){this.pos=this.start=0,this.string=e}return n.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos),n;typeof e=="string"?n=t==e:n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},skipToPair:function(e,t){var n=0,r,i=this.pos,s=this.string.length;while(i<s){r=this.string.charAt(i++);if(r==e)n++;else if(r==t){n--;if(n<1)return this.pos=i,!0}}return!1},backUp:function(e){this.pos-=e},match:function(e,t,n){if(typeof e!="string"){var i=this.string.slice(this.pos).match(e);return i&&t!==!1&&(this.pos+=i[0].length),i}var r=n?function(e){return e.toLowerCase()}:function(e){return e};if(r(this.string).indexOf(r(e),this.pos)==this.pos)return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},{create:function(e){return new n(e)}}}),emmet.define("resources",function(e,t){function f(t){var n=e("utils");return n.replaceUnescapedSymbol(t,"|",n.getCaretPlaceholder())}function l(t,n,r){n=f(n);if(r=="snippets")return e("elements").create("snippet",n);if(r=="abbreviations")return c(t,n)}function c(t,n){t=e("utils").trim(t);var r=e("elements"),i;return(i=s.exec(n))?r.create("element",i[1],i[2],i[4]=="/"):r.create("reference",n)}function h(e){return e.replace(/:$/,"").replace(/:/g,"-")}var n="system",r="user",i={},s=/^<(\w+\:?[\w\-]*)((?:\s+[\w\:\-]+\s*=\s*(['"]).*?\3)*)\s*(\/?)>/,o={},u={},a=e("handlerList").create();return{setVocabulary:function(e,t){i={},t==n?o=e:u=e},getVocabulary:function(e){return e==n?o:u},getMatchedResource:function(e,n){return a.exec(null,t.toArray(arguments))||this.findSnippet(n,e.name())},getVariable:function(e){return(this.getSection("variables")||{})[e]},setVariable:function(e,t){var n=this.getVocabulary("user")||{};"variables"in n||(n.variables={}),n.variables[e]=t,this.setVocabulary(n,"user")},hasSyntax:function(e){return e in this.getVocabulary(r)||e in this.getVocabulary(n)},addResolver:function(e,t){a.add(e,t)},removeResolver:function(e){a.remove(e)},getSection:function(n){if(!n)return null;n in i||(i[n]=e("utils").deepMerge({},o[n],u[n]));var r=i[n],s=t.rest(arguments),a;while(r&&(a=s.shift())){if(!(a in r))return null;r=r[a]}return r},findItem:function(e,t){var n=this.getSection(e);while(n){if(t in n)return n[t];n=this.getSection(n["extends"])}},findSnippet:function(e,n,r){if(!e||!n)return null;r=r||[];var i=[n];~n.indexOf("-")&&i.push(n.replace(/\-/g,":"));var s=this.getSection(e),o=null;return t.find(["snippets","abbreviations"],function(n){var r=this.getSection(e,n);if(r)return t.find(i,function(e){if(r[e])return o=l(e,r[e],n)})},this),r.push(e),!o&&s["extends"]&&!t.include(r,s["extends"])?this.findSnippet(s["extends"],n,r):o},fuzzyFindSnippet:function(n,r,i){i=i||.3;var s=this.getAllSnippets(n),o=e("string-score");r=h(r);var u=t.map(s,function(e,t){return{key:t,score:o.score(e.nk,r,.1)}}),a=t.last(t.sortBy(u,"score"));if(a&&a.score>=i){var f=a.key;return s[f].parsedValue}},getAllSnippets:function(e){var n="all-"+e;if(!i[n]){var r=[],s=e,o=[];do{var u=this.getSection(s);if(!u)break;t.each(["snippets","abbreviations"],function(e){var n={};t.each(u[e]||null,function(t,r){n[r]={nk:h(r),value:t,parsedValue:l(r,t,e),type:e}}),r.push(n)}),o.push(s),s=u["extends"]}while(s&&!t.include(o,s));i[n]=t.extend.apply(t,r.reverse())}return i[n]}}}),emmet.define("actions",function(e,t,n){function i(t){return e("utils").trim(t.charAt(0).toUpperCase()+t.substring(1).replace(/_[a-z]/g,function(e){return" "+e.charAt(1).toUpperCase()}))}var r={};return{add:function(e,t,n){e=e.toLowerCase(),n=n||{},n.label||(n.label=i(e)),r[e]={name:e,fn:t,options:n}},get:function(e){return r[e.toLowerCase()]},run:function(e,n){t.isArray(n)||(n=t.rest(arguments));var r=this.get(e);return r?r.fn.apply(emmet,n):(emmet.log('Action "%s" is not defined',e),!1)},getAll:function(){return r},getList:function(){return t.values(this.getAll())},getMenu:function(e){var n=[];return e=e||[],t.each(this.getList(),function(r){if(r.options.hidden||t.include(e,r.name))return;var s=i(r.name),o=n;if(r.options.label){var u=r.options.label.split("/");s=u.pop();var a,f;while(a=u.shift())f=t.find(o,function(e){return e.type=="submenu"&&e.name==a}),f||(f={name:a,type:"submenu",items:[]},o.push(f)),o=f.items}o.push({type:"action",name:r.name,label:s})}),n},getActionNameForMenuTitle:function(e,n){var r=null;return t.find(n||this.getMenu(),function(t){if(t.type!="action")return r=this.getActionNameForMenuTitle(e,t.items);if(t.label==e||t.name==e)return r=t.name},this),r||null}}}),emmet.define("profile",function(e,t){function i(e){t.extend(this,r,e)}function s(e,t){switch(String(t||"").toLowerCase()){case"lower":return e.toLowerCase();case"upper":return e.toUpperCase()}return e}function o(e,t){return n[e.toLowerCase()]=new i(t)}function u(){o("xhtml"),o("html",{self_closing_tag:!1}),o("xml",{self_closing_tag:!0,tag_nl:!0}),o("plain",{tag_nl:!1,indent:!1,place_cursor:!1}),o("line",{tag_nl:!1,indent:!1,extraFilters:"s"})}var n={},r={tag_case
:"asis",attr_case:"asis",attr_quotes:"double",tag_nl:"decide",tag_nl_leaf:!1,place_cursor:!0,indent:!0,inline_break:3,self_closing_tag:"xhtml",filters:"",extraFilters:""};return i.prototype={tagName:function(e){return s(e,this.tag_case)},attributeName:function(e){return s(e,this.attr_case)},attributeQuote:function(){return this.attr_quotes=="single"?"'":'"'},selfClosing:function(e){return this.self_closing_tag=="xhtml"?" /":this.self_closing_tag===!0?"/":""},cursor:function(){return this.place_cursor?e("utils").getCaretPlaceholder():""}},u(),{create:function(e,n){return arguments.length==2?o(e,n):new i(t.defaults(e||{},r))},get:function(r,s){if(!r&&s){var o=e("resources").findItem(s,"profile");o&&(r=o)}return r?r instanceof i?r:t.isString(r)&&r.toLowerCase()in n?n[r.toLowerCase()]:this.create(r):n.plain},remove:function(e){e=(e||"").toLowerCase(),e in n&&delete n[e]},reset:function(){n={},u()},stringCase:s}}),emmet.define("editorUtils",function(e,t){return{isInsideTag:function(e,t){var n=/^<\/?\w[\w\:\-]*.*?>/,r=t;while(r>-1){if(e.charAt(r)=="<")break;r--}if(r!=-1){var i=n.exec(e.substring(r));if(i&&t>r&&t<r+i[0].length)return!0}return!1},outputInfo:function(e,t,n){return n=n||e.getProfileName(),{syntax:String(t||e.getSyntax()),profile:n?String(n):null,content:String(e.getContent())}},unindent:function(t,n){return e("utils").unindentString(n,this.getCurrentLinePadding(t))},getCurrentLinePadding:function(t){return e("utils").getLinePadding(t.getCurrentLine())}}}),emmet.define("actionUtils",function(e,t){return{mimeTypes:{gif:"image/gif",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml",html:"text/html",htm:"text/html"},extractAbbreviation:function(t){var n=t.length,r=-1,i=0,s=0,o=0,u=e("utils"),a=e("abbreviationParser");for(;;){n--;if(n<0){r=0;break}var f=t.charAt(n);if(f=="]")s++;else if(f=="["){if(!s){r=n+1;break}s--}else if(f=="}")o++;else if(f=="{"){if(!o){r=n+1;break}o--}else if(f==")")i++;else if(f=="("){if(!i){r=n+1;break}i--}else{if(s||o)continue;if(!a.isAllowedChar(f)||f==">"&&u.endsWithTag(t.substring(0,n+1))){r=n+1;break}}}return r!=-1&&!o&&!s&&!i?t.substring(r).replace(/^[\*\+\>\^]+/,""):""},getImageSize:function(e){var t="PNG\r\n\n",n="",r="GIF8",i=function(){return e.charCodeAt(s++)};if(e.substr(0,8)===t){var s=e.indexOf("IHDR")+4;return{width:i()<<24|i()<<16|i()<<8|i(),height:i()<<24|i()<<16|i()<<8|i()}}if(e.substr(0,4)===r)return s=6,{width:i()|i()<<8,height:i()|i()<<8};if(e.substr(0,2)===n){s=2;var o=e.length;while(s<o){if(i()!=255)return;var u=i();if(u==218)break;var a=i()<<8|i();if(u>=192&&u<=207&&!(u&4)&&!(u&8))return s+=1,{height:i()<<8|i(),width:i()<<8|i()};s+=a-2}}},captureContext:function(t){var n={html:1,xml:1,xsl:1},r=String(t.getSyntax());if(r in n){var i=String(t.getContent()),s=e("htmlMatcher").find(i,t.getCaretPos());if(s&&s.type=="tag"){var o=/([\w\-:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,u=s.open,a=u.range.substring(i).replace(/^<[\w\-\:]+/,""),f={name:u.name,attributes:[]},l;while(l=o.exec(a))f.attributes.push({name:l[1],value:l[2]});return f}}return null},findExpressionBounds:function(t,n){var r=String(t.getContent()),i=r.length,s=t.getCaretPos()-1,o=s+1;while(s>=0&&n(r.charAt(s),s,r))s--;while(o<i&&n(r.charAt(o),o,r))o++;if(o>s)return e("range").create([++s,o])},compoundUpdate:function(e,t){if(t){var n=e.getSelectionRange();return e.replaceContent(t.data,t.start,t.end,!0),e.createSelection(t.caret,t.caret+n.end-n.start),!0}return!1},detectSyntax:function(t,n){var r=n||"html";return e("resources").hasSyntax(r)||(r="html"),r=="html"&&(this.isStyle(t)||this.isInlineCSS(t))&&(r="css"),r},detectProfile:function(t){var n=t.getSyntax(),r=e("resources").findItem(n,"profile");if(r)return r;switch(n){case"xml":case"xsl":return"xml";case"css":if(this.isInlineCSS(t))return"line";break;case"html":var r=e("resources").getVariable("profile");return r||(r=this.isXHTML(t)?"xhtml":"html"),r}return"xhtml"},isXHTML:function(e){return e.getContent().search(/<!DOCTYPE[^>]+XHTML/i)!=-1},isStyle:function(t){var n=String(t.getContent()),r=t.getCaretPos(),i=e("htmlMatcher").tag(n,r);return i&&i.open.name.toLowerCase()=="style"&&i.innerRange.cmp(r,"lte","gte")},isInlineCSS:function(t){var n=String(t.getContent()),r=t.getCaretPos(),i=e("xmlEditTree").parseFromPosition(n,r,!0);if(i){var s=i.itemFromPosition(r,!0);return s&&s.name().toLowerCase()=="style"&&s.valueRange(!0).cmp(r,"lte","gte")}return!1}}}),emmet.define("abbreviationUtils",function(e,t){return{isSnippet:function(t){return e("elements").is(t.matchedResource(),"snippet")},isUnary:function(t){var n=t.matchedResource();return t.children.length||this.isSnippet(t)?!1:n&&n.is_empty||e("tagName").isEmptyElement(t.name())},isInline:function(t){return t.isTextNode()||!t.name()||e("tagName").isInlineLevel(t.name())},isBlock:function(e){return this.isSnippet(e)||!this.isInline(e)},isSnippet:function(t){return e("elements").is(t.matchedResource(),"snippet")},hasTagsInContent:function(t){return e("utils").matchesTag(t.content)},hasBlockChildren:function(e){return this.hasTagsInContent(e)&&this.isBlock(e)||t.any(e.children,function(e){return this.isBlock(e)},this)},insertChildContent:function(n,r,i){i=t.extend({keepVariable:!0,appendIfNoChild:!0},i||{});var s=!1,o=e("utils");return n=o.replaceVariables(n,function(e,t,u){var a=e;return t=="child"&&(a=o.padString(r,o.getLinePaddingFromPosition(n,u.start)),s=!0,i.keepVariable&&(a+=e)),a}),!s&&i.appendIfNoChild&&(n+=r),n}}}),emmet.define("base64",function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e){var t=[],r,i,s,o,u,a,f,l,c,h,p=0,d=e.length,v=n;while(p<d)l=e.charCodeAt(p++),c=e.charCodeAt(p++),h=e.charCodeAt(p++),r=l&255,i=c&255,s=h&255,o=r>>2,u=(r&3)<<4|i>>4,a=(i&15)<<2|s>>6,f=s&63,isNaN(c)?a=f=64:isNaN(h)&&(f=64),t.push(v.charAt(o)+v.charAt(u)+v.charAt(a)+v.charAt(f));return t.join("")},decode:function(e){var t,r,i,s,o,u,a,f,l=0,c=0,h=[],p=n,d=e.length;if(!e)return e;e+="";do s=p.indexOf(e.charAt(l++)),o=p.indexOf(e.charAt(l++)),u=p.indexOf(e.charAt(l++)),a=p.indexOf(e.charAt(l++)),f=s<<18|o<<12|u<<6|a,t=f>>16&255,r=f>>8&255,i=f&255,u==64?h[c++]=String.fromCharCode(t):a==64?h[c++]=String.fromCharCode(t,r):h[c++]=String.fromCharCode(t,r,i);while(l<d);return h.join("")}}}),emmet.define("htmlMatcher",function(e,t){function i(t,n){return{name:n[1],selfClose:!!n[3],range:e("range").create(t,n[0]),type:"open"}}function s(t,n){return{name:n[1],range:e("range").create(t,n[0]),type:"close"}}function o(n,r){return{range:e("range").create(n,t.isNumber(r)?r-n:r[0]),type:"comment"}}function u(e){var t={},o;return{open:function(e){var t=this.matches(e);return t&&t.type=="open"?t:null},close:function(e){var t=this.matches(e);return t&&t.type=="close"?t:null},matches:function(u){var a="p"+u;if(!(a in t)&&e.charAt(u)=="<"){var f=e.slice(u);(o=f.match(n))?t[a]=i(u,o):(o=f.match(r))?t[a]=s(u,o):t[a]=!1}return t[a]},text:function(){return e}}}function a(e,t,n){return e.substring(t,t+n.length)==n}function f(e,n){var r=[],i=null,s=n.text();for(var o=e.range.end,u=s.length;o<u;o++){if(a(s,o,"<!--"))for(var f=o;f<u;f++)if(a(s,f,"-->")){o=f+3;break}if(i=n.matches(o))if(i.type=="open"&&!i.selfClose)r.push(i.name);else if(i.type=="close"){if(!r.length)return i.name==e.name?i:null;if(t.last(r)==i.name)r.pop();else{var l=!1;while(r.length&&!l){var c=r.pop();c==i.name&&(l=!0)}if(!r.length&&!l)return i.name==e.name?i:null}}}}var n=/^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/([\w\:\-]+)[^>]*>/;return{find:function(t,n){var r=e("range"),i=u(t),s=null,l=null;for(var c=n;c>=0;c--)if(s=i.open(c)){if(s.selfClose){if(s.range.cmp(n,"lt","gt"))break;continue}l=f(s,i);if(l){var h=r.create2(s.range.start,l.range.end);if(h.contains(n))break}else if(s.range.contains(n))break;s=null}else if(a(t,c,"-->"))for(var p=c-1;p>=0;p--){if(a(t,p,"-->"))break;if(a(t,p,"<!--")){c=p;break}}else if(a(t,c,"<!--")){var p=c+4,d=t.length;for(;p<d;p++)if(a(t,p,"-->")){p+=3;break}s=o(c,p);break}if(s){var v=null,m=null;l?(v=r.create2(s.range.start,l.range.end),m=r.create2(s.range.end,l.range.start)):v=m=r.create2(s.range.start,s.range.end);if(s.type=="comment"){var g=v.substring(t);m.start+=g.length-g.replace(/^<\!--\s*/,"").length,m.end-=g.length-g.replace(/\s*-->$/,"").length}return{open:s,close:l,type:s.type=="comment"?"comment":"tag",innerRange:m,innerContent:function(){return this.innerRange.substring(t)},outerRange:v,outerContent:function(){return this.outerRange.substring(t)},range:!m.length()||!m.cmp(n,"lte","gte")?v:m,content:function(){return this.range.substring(t)},source:t}}},tag:function(e,t){var n=this.find(e,t);if(n&&n.type=="tag")return n}}}),emmet.define("tabStops",function(e,t){var n=100,r=0,i={replaceCarets:!1,escape:function(e){return"\\"+e},tabstop:function(e){return e.token},variable:function(e){return e.token}};return e("abbreviationParser").addOutputProcessor(function(t,n,i){var s=0,o=e("tabStops"),u=e("utils"),a={tabstop:function(e){var t=parseInt(e.group);if(t==0)return"${0}";t>s&&(s=t);if(e.placeholder){var n=t+r,i=o.processText(e.placeholder,a);return"${"+n+":"+i+"}"}return"${"+(t+r)+"}"}};return t=o.processText(t,a),t=u.replaceVariables(t,o.variablesResolver(n)),r+=s+1,t}),{extract:function(n,r){var s=e("utils"),o={carets:""},u=[];r=t.extend({},i,r,{tabstop:function(e){var t=e.token,n="";return e.placeholder=="cursor"?u.push({start:e.start,end:e.start+t.length,group:"carets",value:""}):("placeholder"in e&&(o[e.group]=e.placeholder),e.group in o&&(n=o[e.group]),u.push({start:e.start,end:e.start+t.length,group:e.group,value:n})),t}}),r.replaceCarets&&(n=n.replace(new RegExp(s.escapeForRegexp(s.getCaretPlaceholder()),"g"),"${0:cursor}")),n=this.processText(n,r);var a=s.stringBuilder(),f=0,l=t.map(u,function(e){a.append(n.substring(f,e.start));var t=a.length,r=o[e.group]||"";return a.append(r),f=e.end,{group:e.group,start:t,end:t+r.length}});return a.append(n.substring(f)),{text:a.toString(),tabstops:t.sortBy(l,"start")}},processText:function(n,r){r=t.extend({},i,r);var s=e("utils").stringBuilder(),o=e("stringStream").create(n),u,a,f;while(u=o.next()){if(u=="\\"&&!o.eol()){s.append(r.escape(o.next()));continue}f=u;if(u=="$"){o.start=o.pos-1;if(a=o.match(/^[0-9]+/))f=r.tabstop({start:s.length,group:o.current().substr(1),token:o.current()});else if(a=o.match(/^\{([a-z_\-][\w\-]*)\}/))f=r.variable({start:s.length,name:a[1],token:o.current()});else if(a=o.match(/^\{([0-9]+)(:.+?)?\}/,!1)){o.skipToPair("{","}");var l={start:s.length,group:a[1],token:o.current()},c=l.token.substring(l.group.length+2,l.token.length-1);c&&(l.placeholder=c.substr(1)),f=r.tabstop(l)}}s.append(f)}return s.toString()},upgrade:function(e,n){var r=0,i={tabstop:function(e){var t=parseInt(e.group);return t>r&&(r=t),e.placeholder?"${"+(t+n)+":"+e.placeholder+"}":"${"+(t+n)+"}"}};return t.each(["start","end","content"],function(t){e[t]=this.processText(e[t],i)},this),r},variablesResolver:function(r){var i={},s=e("resources");return function(o,u){if(u=="child")return o;if(u=="cursor")return e("utils").getCaretPlaceholder();var a=r.attribute(u);if(!t.isUndefined(a)&&a!==o)return a;var f=s.getVariable(u);return f?f:(i[u]||(i[u]=n++),"${"+i[u]+":"+u+"}")}},resetTabstopIndex:function(){r=0,n=100}}}),emmet.define("preferences",function(e,t){function o(e){return t.isString(e)?(e=e.toLowerCase(),e=="yes"||e=="true"||e=="1"):!!e}function u(e){return t.isObject(e)&&"value"in e&&t.keys(e).length<3}var n={},r={},i=null,s=null;return{define:function(e,n,i){var s=e;t.isString(e)&&(s={},s[e]={value:n,description:i}),t.each(s,function(e,t){r[t]=u(e)?e:{value:e}})},set:function(e,i){var s=e;t.isString(e)&&(s={},s[e]=i),t.each(s,function(e,t){if(!(t in r))throw'Property "'+t+'" is not defined. You should define it first with `define` method of current module';if(e!==r[t].value){switch(typeof r[t].value){case"boolean":e=o(e);break;case"number":e=parseInt(e+"",10)||0;break;default:e+=""}n[t]=e}else t in n&&delete n[t]})},get:function(e){return e in n?n[e]:e in r?r[e].value:void 0},getArray:function(n){var r=this.get(n);return t.isUndefined(r)||(r=t.map(r.split(","),e("utils").trim),r.length||(r=null)),r},getDict:function(e){var n={};return t.each(this.getArray(e),function(e){var t=e.split(":");n[t[0]]=t[1]}),n},description:function(e){return e in r?r[e].description:void 0},remove:function(e){t.isArray(e)||(e=[e]),t.each(e,function(e){e in n&&delete n[e],e in r&&delete r[e]})},list:function(){return t.map(t.keys(r).sort(),function(e){return{name:e,value:this.get(e),type:typeof r[e].value,description:r[e].description}},this)},load:function(e){t.each(e,function(e,t){this.set(t,e)},this)},exportModified:function(){return t.clone(n)},reset:function(){n={}},_startTest:function(){i=r,s=n,r={},n={}},_stopTest:function(){r=i,n=s}}}),emmet.define("filters",function(e,t){function i(e){return e?t.isString(e)?e.split(/[\|,]/g):e:[]}var n={},r="html";return{add:function(e,t){n[e]=t},apply:function(r,s,o){var u=e("utils");return o=e("profile").get(o),t.each(i(s),function(e){var t=u.trim(e.toLowerCase());t&&t in n&&(r=n[t](r,o))}),r},composeList:function(t,n,s){n=e("profile").get(n);var o=i(n.filters||e("resources").findItem(t,"filters")||r);n.extraFilters&&(o=o.concat(i(n.extraFilters))),s&&(o=o.concat(i(s)));if(!o||!o.length)o=i(r);return o},extractFromAbbreviation:function(e){var t="";return e=e.replace(/\|([\w\|\-]+)$/,function(e,n){return t=n,""}),[e,i(t)]}}}),emmet.define("elements",function(e,t){function s(e){return{data:e}}var n={},r=/([\w\-]+)\s*=\s*(['"])(.*?)\2/g,i={add:function(e,t){var r=this;n[e]=function(){var n=t.apply(r,arguments);return n&&(n.type=e),n}},get:function(e){return n[e]},create:function(e){var t=[].slice.call(arguments,1),n=this.get(e);return n?n.apply(this,t):null},is:function(e,t){return e&&e.type===t}};return i.add("element",function(e,n,i){var s={name:e,is_empty:!!i};if(n){s.attributes=[];if(t.isArray(n))s.attributes=n;else if(t.isString(n)){var o;while(o=r.exec(n))s.attributes.push({name:o[1],value:o[3]})}else t.each(n,function(e,t){s.attributes.push({name:t,value:e})})}return s}),i.add("snippet",s),i.add("reference",s),i.add("empty",function(){return{}}),i}),emmet.define("editTree",function(e,t,n){function i(e,n){this.options=t.extend({offset:0},n),this.source=e,this._children=[],this._positions={name:0},this.initialize.apply(this,arguments)}function s(e,t,n){this.parent=e,this._name=t.value,this._value=n?n.value:"",this._positions={name:t.start,value:n?n.start:-1},this.initialize.apply(this,arguments)}var r=e("range").create;return i.extend=n.extend,i.prototype={initialize:function(){},_updateSource:function(n,i,s){var o=r(i,t.isUndefined(s)?0:s-i),u=n.length-o.length(),a=function(e){t.each(e,function(t,n){t>=o.end&&(e[n]+=u)})};a(this._positions),t.each(this.list(),function(e){a(e._positions)}),this.source=e("utils").replaceSubstring(this.source,n,o)},add:function(e,t,n){var r=new s(e,t);return this._children.push(r),r},get:function(e){return t.isNumber(e)?this.list()[e]:t.isString(e)?t.find(this.list(),function(t){return t.name()===e}):e},getAll:function(e){t.isArray(e)||(e=[e]);var n=[],r=[];return t.each(e,function(e){t.isString(e)?n.push(e):t.isNumber(e)&&r.push(e)}),t.filter(this.list(),function(e,i){return t.include(r,i)||t.include(n,e.name())})},value:function(e,n,r){var i=this.get(e);if(i)return i.value(n);if(!t.isUndefined(n))return this.add(e,n,r)},values:function(e){return t.map(this.getAll(e),function(e){return e.value()})},remove:function(e){var n=this.get(e);n&&(this._updateSource("",n.fullRange()),this._children=t.without(this._children,n))},list:function(){return this._children},indexOf:function(e){return t.indexOf(this.list(),this.get(e))},name:function(e){return!t.isUndefined(e)&&this._name!==(e=String(e))&&(this._updateSource(e,this._positions.name,this._positions.name+this._name.length),this._name=e),this._name},nameRange:function(e){return r(this._positions.name+(e?this.options.offset:0),this.name())},range:function(e){return r(e?this.options.offset:0,this.toString())},itemFromPosition:function(e,n){return t.find(this.list(),function(t){return t.range(n).inside(e)})},toString:function(){return this.source}},s.extend=n.extend,s.prototype={initialize:function(){},_pos:function(e,t){return e+(t?this.parent.options.offset:0)},value:function(e){return!t.isUndefined(e)&&this._value!==(e=String(e))&&(this.parent._updateSource(e,this.valueRange()),this._value=e),this._value},name:function(e){return!t.isUndefined(e)&&this._name!==(e=String(e))&&(this.parent._updateSource(e,this.nameRange()),this._name=e),this._name},namePosition:function(e){return this._pos(this._positions.name,e)},valuePosition:function(e){return this._pos(this._positions.value,e)},range:function(e){return r(this.namePosition(e),this.toString())},fullRange:function(e){return this.range(e)},nameRange:function(e){return r(this.namePosition(e),this.name())},valueRange:function(e){return r(this.valuePosition(e),this.value())},toString:function(){return this.name()+this.value()},valueOf:function(){return this.toString()}},{EditContainer:i,EditElement:s,createToken:function(e,t,n){var r={start:e||0,value:t||"",type:n};return r.end=r.start+r.value.length,r}}}),emmet.define("cssEditTree",function(e,t){function s(t,n){return e("range").create(t,n)}function o(e,n){n=n||r|i;var s=["white","line"];if((n&i)==i)while(e.length&&t.include(s,t.last(e).type))e.pop();if((n&r)==r)while(e.length&&t.include(s,e[0].type))e.shift();return e}function u(e){var n=[],r,i=e.position(),u;while(r=e.next()){if(r.type=="{")break;n.push(r)}return o(n),n.length?(i=n[0].start,u=t.last(n).end):u=i,s(i,u-i)}function a(e){var n=["white","line",":"],u=[],a,f,l;e.nextUntil(function(e){return!t.include(n,this.itemNext().type)}),f=e.current().end;while(a=e.next()){if(a.type=="}"||a.type==";")return o(u,r|(a.type=="}"?i:0)),u.length?(f=u[0].start,l=t.last(u).end):l=f,s(f,l-f);u.push(a)}if(u.length)return s(u[0].start,t.last(u).end-u[0].start)}function f(n){var r=e("stringStream").create(n),i,o=[],u=/[\s\u00a0,]/,a=function(){r.next(),o.push(s(r.start,r.current())),r.start=r.pos};r.eatSpace(),r.start=r.pos;while(i=r.next())if(i=='"'||i=="'"){r.next();if(!r.skipTo(i))break;a()}else if(i=="("){r.backUp(1);if(!r.skipToPair("(",")"))break;r.backUp(1),a()}else u.test(i)&&(o.push(s(r.start,r.current().length-1)),r.eatWhile(u),r.start=r.pos);return a(),t.chain(o).filter(function(e){return!!e.length()}).uniq(!1,function(e){return e.toString()}).value()}function l(e){var t=e.tokens;for(var n=e._i+1,r=t.length;n<r;n++){if(t[n].type==":")return!0;if(t[n].type=="identifier"||t[n].type=="line")return!1}return!1}var n={styleBefore:"\n	",styleSeparator:": ",offset:0},r=1,i=2,c=e("editTree").EditContainer.extend({initialize:function(r,i){t.defaults(this.options,n);var o=e("editTree"),f=e("tokenIterator").create(e("cssParser").parse(r)),c=u(f);this._positions.name=c.start,this._name=c.substring(r);if(!f.current()||f.current().type!="{")throw"Invalid CSS rule";this._positions.contentStart=f.position()+1;var p,d,v;while(v=f.next())if(v.type=="identifier"&&l(f)){p=s(v),d=a(f);var m=f.current()&&f.current().type==";"?s(f.current()):s(d.end,0);this._children.push(new h(this,o.createToken(p.start,p.substring(r)),o.createToken(d.start,d.substring(r)),o.createToken(m.start,m.substring(r))))}this._saveStyle()},_saveStyle:function(){var n=this._positions.contentStart,r=this.source,i=e("utils");t.each(this.list(),function(e){e.styleBefore=r.substring(n,e.namePosition());var s=i.splitByLines(e.styleBefore);s.length>1&&(e.styleBefore="\n"+t.last(s)),e.styleSeparator=r.substring(e.nameRange().end,e.valuePosition()),e.styleBefore=t.last(e.styleBefore.split("*/")),e.styleSeparator=e.styleSeparator.replace(/\/\*.*?\*\//g,""),n=e.range().end})},add:function(n,r,i){var s=this.list(),o=this._positions.contentStart,u=t.pick(this.options,"styleBefore","styleSeparator"),a=e("editTree");t.isUndefined(i)&&(i=s.length);var f=s[i];if(f)o=f.fullRange().start;else if(f=s[i-1])f.end(";"),o=f.range().end;f&&(u=t.pick(f,"styleBefore","styleSeparator"));var l=a.createToken(o+u.styleBefore.length,n),c=a.createToken(l.end+u.styleSeparator.length,r),p=new h(this,l,c,a.createToken(c.end,";"));return t.extend(p,u),this._updateSource(p.styleBefore+p.toString(),o),this._children.splice(i,0,p),p}}),h=e("editTree").EditElement.extend({initialize:function(e,t,n,r){this.styleBefore=e.options.styleBefore,this.styleSeparator=e.options.styleSeparator,this._end=r.value,this._positions.end=r.start},valueParts:function(e){var n=f(this.value());if(e){var r=this.valuePosition(!0);t.each(n,function(e){e.shift(r)})}return n},end:function(e){return!t.isUndefined(e)&&this._end!==e&&(this.parent._updateSource(e,this._positions.end,this._positions.end+this._end.length),this._end=e),this._end},fullRange:function(e){var t=this.range(e);return t.start-=this.styleBefore.length,t},toString:function(){return this.name()+this.styleSeparator+this.value()+this.end()}});return{parse:function(e,t){return new c(e,t)},parseFromPosition:function(e,t,n){var r=this.extractRule(e,t,n);return!r||!r.inside(t)?null:this.parse(r.substring(e),{offset:r.start})},extractRule:function(t,n,r){var i="",s=t.length,o=n,u="{}/\\<>\n\r",a=-1,f;while(o>=0){f=t.charAt(o);if(f=="{"){a=o;break}if(f=="}"&&!r){o++;break}o--}while(o<s){f=t.charAt(o);if(f=="{")a=o;else if(f=="}"){a!=-1&&(i=t.substring(a,o+1));break}o++}if(i){o=a-1;var l="";while(o>=0){f=t.charAt(o);if(u.indexOf(f)!=-1)break;o--}return l=t.substring(o+1,a).replace(/^[\s\n\r]+/m,""),e("range").create(a-l.length,i.length+l.length)}return null},baseName:function(e){return e.replace(/^\s*\-\w+\-/,"")},findParts:f}}),emmet.define("xmlEditTree",function(e,t){var n={styleBefore:" ",styleSeparator:"=",styleQuote:'"',offset:0},r=/^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/m,i=e("editTree").EditContainer.extend({initialize:function(r,i){t.defaults(this.options,n),this._positions.name=1;var o=null,u=e("xmlParser").parse(r),a=e("range");t.each(u,function(e){e.value=a.create(e).substring(r);switch(e.type){case"tag":/^<[^\/]+/.test(e.value)&&(this._name=e.value.substring(1));break;case"attribute":o&&this._children.push(new s(this,o)),o=e;break;case"string":this._children.push(new s(this,o,e)),o=null}},this),o&&this._children.push(new s(this,o)),this._saveStyle()},_saveStyle:function(){var e=this.nameRange().end,n=this.source;t.each(this.list(),function(t){t.styleBefore=n.substring(e,t.namePosition()),t.valuePosition()!==-1&&(t.styleSeparator=n.substring(t.namePosition()+t.name().length,t.valuePosition()-t.styleQuote.length)),e=t.range().end})},add:function(n,r,i){var o=this.list(),u=this.nameRange().end,a=e("editTree"),f=t.pick(this.options,"styleBefore","styleSeparator","styleQuote");t.isUndefined(i)&&(i=o.length);var l=o[i];if(l)u=l.fullRange().start;else if(l=o[i-1])u=l.range().end;l&&(f=t.pick(l,"styleBefore","styleSeparator","styleQuote")),r=f.styleQuote+r+f.styleQuote;var c=new s(this,a.createToken(u+f.styleBefore.length,n),a.createToken(u+f.styleBefore.length+n.length+f.styleSeparator.length,r));return t.extend(c,f),this._updateSource(c.styleBefore+c.toString(),u),this._children.splice(i,0,c),c}}),s=e("editTree").EditElement.extend({initialize:function(e,t,n){this.styleBefore=e.options.styleBefore,this.styleSeparator=e.options.styleSeparator;var r="",i=e.options.styleQuote;n&&(r=n.value,i=r.charAt(0),i=='"'||i=="'"?r=r.substring(1):i="",i&&r.charAt(r.length-1)==i&&(r=r.substring(0,r.length-1))),this.styleQuote=i,this._value=r,this._positions.value=n?n.start+i.length:-1},fullRange:function(e){var t=this.range(e);return t.start-=this.styleBefore.length,t},toString:function(){return this.name()+this.styleSeparator+this.styleQuote+this.value()+this.styleQuote}});return{parse:function(e,t){return new i(e,t)},parseFromPosition:function(e,t,n){var r=this.extractTag(e,t,n);return!r||!r.inside(t)?null:this.parse(r.substring(e),{offset:r.start})},extractTag:function(t,n,i){var s=t.length,o,u=e("range"),a=Math.min(2e3,s),f=null,l=function(e){var n;if(t.charAt(e)=="<"&&(n=t.substr(e,a).match(r)))return u.create(e,n[0])};for(o=n;o>=0;o--)if(f=l(o))break;if(f&&(f.inside(n)||i))return f;if(!f&&i)return null;for(o=n;o<s;o++)if(f=l(o))return f}}}),emmet.define("expandAbbreviation",function(e,t){var n=e("handlerList").create(),r=null,i=e("actions");return i.add("expand_abbreviation",function(r,i,s){var o=t.toArray(arguments),u=e("editorUtils").outputInfo(r,i,s);return o[1]=u.syntax,o[2]=u.profile,n.exec(!1,o)}),i.add("expand_abbreviation_with_tab",function(t,n,r){var s=t.getSelection(),o=e("resources").getVariable("indentation");if(s){var u=e("utils"),a=e("range").create(t.getSelectionRange()),f=u.padString(s,o);t.replaceContent(o+"${0}",t.getCaretPos());var l=e("range").create(t.getCaretPos(),a.length());return t.replaceContent(f,l.start,l.end,!0),t.createSelection(l.start,l.start+f.length),!0}return i.run("expand_abbreviation",t,n,r)||t.replaceContent(o,t.getCaretPos()),!0},{hidden:!0}),n.add(function(t,n,i){var s=t.getSelectionRange().end,o=r.findAbbreviation(t);if(o){var u=emmet.expandAbbreviation(o,n,i,e("actionUtils").captureContext(t));if(u)return t.replaceContent(u,s-o.length,s),!0}return!1},{order:-1}),r={addHandler:function(e,t){n.add(e,t)},removeHandler:function(e){n.remove(e,options)},findAbbreviation:function(t){var n=e("range").create(t.getSelectionRange()),r=String(t.getContent());if(n.length())return n.substring(r);var i=t.getCurrentLineRange();return e("actionUtils").extractAbbreviation(r.substring(i.start,n.start))}}}),emmet.define("wrapWithAbbreviation",function(e,t){var n=null;return e("actions").add("wrap_with_abbreviation",function(t,r,i,s){var o=e("editorUtils").outputInfo(t,i,s),u=e("utils"),a=e("editorUtils");r=r||t.prompt("Enter abbreviation");if(!r)return null;r=String(r);var f=e("range").create(t.getSelectionRange());if(!f.length()){var l=e("htmlMatcher").tag(o.content,f.start);if(!l)return!1;f=u.narrowToNonSpace(o.content,l.range)}var c=u.escapeText(f.substring(o.content)),h=n.wrap(r,a.unindent(t,c),o.syntax,o.profile,e("actionUtils").captureContext(t));return h?(t.replaceContent(h,f.start,f.end),!0):!1}),n={wrap:function(t,n,r,i,s){var o=e("filters"),u=e("utils");r=r||emmet.defaultSyntax(),i=e("profile").get(i,r),e("tabStops").resetTabstopIndex();var a=o.extractFromAbbreviation(t),f=e("abbreviationParser").parse(a[0],{syntax:r,pastedContent:n,contextNode:s});if(f){var l=o.composeList(r,i,a[1]);return o.apply(f,l,i),u.replaceVariables(f.toString())}return null}}}),emmet.exec(function(e,t){function n(t){var n=e("range").create(t.getSelectionRange()),r=e("editorUtils").outputInfo(t);if(!n.length()){var i=e("htmlMatcher").tag(r.content,t.getCaretPos());i&&(n=i.outerRange)}return o(t,"<!--","-->",n)}function r(t){var n=e("range").create(t.getSelectionRange()),r=e("editorUtils").outputInfo(t);if(!n.length()){var s=e("cssEditTree").parseFromPosition(r.content,t.getCaretPos());if(s){var u=i(s,t.getCaretPos());n=u?u.range(!0):e("range").create(s.nameRange(!0).start,s.source)}}return n.length()||(n=e("range").create(t.getCurrentLineRange()),e("utils").narrowToNonSpace(r.content,n)),o(t,"/*","*/",n)}function i(e,n){var r=n-(e.options.offset||0),i=/^[\s\n\r]/;return t.find(e.list(),function(t){return t.range().end===r?i.test(e.source.charAt(r)):t.range().inside(r)})}function s(t,n,r,i){var s=-1,o=-1,u=function(e,n){return t.substr(n,e.length)==e};while(n--)if(u(r,n)){s=n;break}if(s!=-1){n=s;var a=t.length;while(a>=n++)if(u(i,n)){o=n+i.length;break}}return s!=-1&&o!=-1?e("range").create(s,o-s):null}function o(t,n,r,i){function c(e){return e.replace(new RegExp("^"+l.escapeForRegexp(n)+"\\s*"),function(e){return a-=e.length,""}).replace(new RegExp("\\s*"+l.escapeForRegexp(r)+"$"),"")}var o=e("editorUtils"),u=o.outputInfo(t).content,a=t.getCaretPos(),f=null,l=e("utils"),h=s(u,a,n,r);return h&&h.overlap(i)?(i=h,f=c(i.substring(u))):(f=n+" "+i.substring(u).replace(new RegExp(l.escapeForRegexp(n)+"\\s*|\\s*"+l.escapeForRegexp(r),"g"),"")+" "+r,a+=n.length+1),f!==null?(f=l.escapeText(f),t.setCaretPos(i.start),t.replaceContent(o.unindent(t,f),i.start,i.end),t.setCaretPos(a),!0):!1}e("actions").add("toggle_comment",function(t){var i=e("editorUtils").outputInfo(t);if(i.syntax=="css"){var s=t.getCaretPos(),o=e("htmlMatcher").tag(i.content,s);o&&o.open.range.inside(s)&&(i.syntax="html")}return i.syntax=="css"?r(t):n(t)})}),emmet.exec(function(e,t){function n(e,t,n){function a(e){var t=e;while(t>=0){var n=i.charAt(t);if(n=="\n"||n=="\r")break;t--}return i.substring(t,e)}t=t||1,n=n||0;var r=e.getCaretPos()+n,i=String(e.getContent()),s=i.length,o=-1,u=/^\s+$/;while(r<=s&&r>=0){r+=t;var f=i.charAt(r),l=i.charAt(r+1),c=i.charAt(r-1);switch(f){case'"':case"'":l==f&&c=="="&&(o=r+1);break;case">":l=="<"&&(o=r+1);break;case"\n":case"\r":u.test(a(r-1))&&(o=r)}if(o!=-1)break}return o}var r=e("actions");r.add("prev_edit_point",function(e){var t=e.getCaretPos(),r=n(e,-1);return r==t&&(r=n(e,-1,-2)),r!=-1?(e.setCaretPos(r),!0):!1},{label:"Previous Edit Point"}),r.add("next_edit_point",function(e){var t=n(e,1);return t!=-1?(e.setCaretPos(t),!0):!1})}),emmet.exec(function(e,t){function r(t,n,r,i){var s=e("range"),o=e("editorUtils").outputInfo(t).content,u=o.length,a,f,l=s.create(-1,0),c=s.create(t.getSelectionRange()),h=c.start,p=1e5;while(h>=0&&h<u&&--p>0){if(a=r(o,h,n)){if(l.equal(a))break;l=a.clone(),f=i(a.substring(o),a.start,c.clone());if(f)return t.createSelection(f.start,f.end),!0;h=n?a.start:a.end-1}h+=n?-1:1}return!1}function i(e){var t=!0;return r(e,!1,function(e,n){return t?(t=!1,f(e,n)):l(e,n)},function(e,t,n){return a(e,t,n,!1)})}function s(e){return r(e,!0,l,function(e,t,n){return a(e,t,n,!0)})}function o(n,r,i){i=i||0;var s=e("range"),o=[],a=-1,f="",l="",h,p;return t.each(r,function(e){switch(e.type){case"tag":p=n.substring(e.start,e.end),/^<[\w\:\-]/.test(p)&&o.push(s.create({start:e.start+1,end:e.end}));break;case"attribute":a=e.start,f=n.substring(e.start,e.end);break;case"string":o.push(s.create(a,e.end-a)),h=s.create(e),l=h.substring(n),c(l.charAt(0))&&h.start++,c(l.charAt(l.length-1))&&h.end--,o.push(h),f=="class"&&(o=o.concat(u(h.substring(n),h.start)))}}),t.each(o,function(e){e.shift(i)}),t.chain(o).filter(function(e){return!!e.length()}).uniq(!1,function(e){return e.toString()}).value()}function u(t,n){n=n||0;var r=[],i=e("stringStream").create(t),s=e("range");i.eatSpace(),i.start=i.pos;var o;while(o=i.next())/[\s\u00a0]/.test(o)&&(r.push(s.create(i.start+n,i.pos-i.start-1)),i.eatSpace(),i.start=i.pos);return r.push(s.create(i.start+n,i.pos-i.start)),r}function a(n,r,i,s){var u=o(n,e("xmlParser").parse(n),r);s&&u.reverse();var a=t.find(u,function(e){return e.equal(i)});if(a){var f=t.indexOf(u,a);return f<u.length-1?u[f+1]:null}if(s)return t.find(u,function(e){return e.start<i.start});if(!a){var l=t.filter(u,function(e){return e.inside(i.end)});if(l.length>1)return l[1]}return t.find(u,function(e){return e.end>i.end})}function f(e,t){var n;while(t>=0){if(n=l(e,t))return n;t--}return null}function l(t,r){var i;if(t.charAt(r)=="<"&&(i=t.substring(r,t.length).match(n)))return e("range").create(r,i[0])}function c(e){return e=='"'||e=="'"}function h(n){var r=n.valueRange(!0),i=[n.range(!0),r],s=e("stringStream"),o=e("cssEditTree"),u=e("range"),a=n.value();return t.each(n.valueParts(),function(e){var n=e.clone();i.push(n.shift(r.start));var f=s.create(e.substring(a));if(f.match(/^[\w\-]+\(/,!0)){f.start=f.pos,f.skipToPair("(",")");var l=f.current();i.push(u.create(n.start+f.start,l)),t.each(o.findParts(l),function(e){i.push(u.create(n.start+f.start+e.start,e.substring(l)))})}}),t.chain(i).filter(function(e){return!!e.length()}).uniq(!1,function(e){return e.toString()}).value()}function p(e,n,r){var i=null,s,o=null,u,a=e.list(),f,l;r?(a.reverse(),f=function(e){return e.range(!0).start<=n.start},l=function(e){return e.start<n.start}):(f=function(e){return e.range(!0).end>=n.end},l=function(e){return e.end>n.start});while(i=t.find(a,f)){s=h(i),r&&s.reverse(),o=t.find(s,function(e){return e.equal(n)});if(!o){var c=t.filter(s,function(e){return e.inside(n.end)});if(c.length>1){o=c[1];break}if(o=t.find(s,l))break}else{u=t.indexOf(s,o);if(u!=s.length-1){o=s[u+1];break}}o=null,n.start=n.end=r?i.range(!0).start-1:i.range(!0).end+1}return o}function d(t){return r(t,!1,e("cssEditTree").extractRule,m)}function v(t){return r(t,!0,e("cssEditTree").extractRule,g)}function m(t,n,r){var i=e("cssEditTree").parse(t,{offset:n}),s=i.nameRange(!0);return r.end<s.end?s:p(i,r,!1)}function g(t,n,r){var i=e("cssEditTree").parse(t,{offset:n}),s=p(i,r,!0);if(!s){var o=i.nameRange(!0);if(r.start>o.start)return o}return s}var n=/^<([\w\:\-]+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/
,y=e("actions");y.add("select_next_item",function(e){return e.getSyntax()=="css"?d(e):i(e)}),y.add("select_previous_item",function(e){return e.getSyntax()=="css"?v(e):s(e)})}),emmet.exec(function(e,t){function s(t,n){n=String((n||"out").toLowerCase());var s=e("editorUtils").outputInfo(t),o=e("range"),u=o.create(t.getSelectionRange()),a=s.content;i&&!i.range.equal(u)&&(i=null);if(i&&u.length())if(n=="in"){if(i.type=="tag"&&!i.close)return!1;if(i.range.equal(i.outerRange))i.range=i.innerRange;else{var f=e("utils").narrowToNonSpace(a,i.innerRange);i=r.find(a,f.start+1),i&&i.range.equal(u)&&i.outerRange.equal(u)&&(i.range=i.innerRange)}}else!i.innerRange.equal(i.outerRange)&&i.range.equal(i.innerRange)&&u.equal(i.range)?i.range=i.outerRange:(i=r.find(a,u.start),i&&i.range.equal(u)&&i.innerRange.equal(u)&&(i.range=i.outerRange));else i=r.find(a,u.start);return i&&!i.range.equal(u)?(t.createSelection(i.range.start,i.range.end),!0):(i=null,!1)}var n=e("actions"),r=e("htmlMatcher"),i=null;n.add("match_pair",s,{hidden:!0}),n.add("match_pair_inward",function(e){return s(e,"in")},{label:"HTML/Match Pair Tag (inward)"}),n.add("match_pair_outward",function(e){return s(e,"out")},{label:"HTML/Match Pair Tag (outward)"}),n.add("matching_pair",function(e){var t=String(e.getContent()),n=e.getCaretPos();t.charAt(n)=="<"&&n++;var i=r.tag(t,n);return i&&i.close?(i.open.range.inside(n)?e.setCaretPos(i.close.range.start):e.setCaretPos(i.open.range.start),!0):!1},{label:"HTML/Go To Matching Tag Pair"})}),emmet.exec(function(e,t){e("actions").add("remove_tag",function(t){var n=e("utils"),r=e("editorUtils").outputInfo(t),i=e("htmlMatcher").tag(r.content,t.getCaretPos());if(i){if(!i.close)t.replaceContent(n.getCaretPlaceholder(),i.range.start,i.range.end);else{var s=n.narrowToNonSpace(r.content,i.innerRange),o=n.findNewlineBounds(r.content,s.start),u=n.getLinePadding(o.substring(r.content)),a=s.substring(r.content);a=n.unindentString(a,u),t.replaceContent(n.getCaretPlaceholder()+n.escapeText(a),i.outerRange.start,i.outerRange.end)}return!0}return!1},{label:"HTML/Remove Tag"})}),emmet.exec(function(e,t){function n(t,n,r){var i=e("utils"),s=n.selfClosing()||" /",o=r.open.range.substring(r.source).replace(/\s*>$/,s+">"),u=t.getCaretPos();return o.length+r.outerRange.start<u&&(u=o.length+r.outerRange.start),o=i.escapeText(o),t.replaceContent(o,r.outerRange.start,r.outerRange.end),t.setCaretPos(u),!0}function r(t,n,r){var i=e("utils"),s=i.getNewline(),o=e("resources").getVariable("indentation"),u=t.getCaretPos(),a=n.tag_nl===!0?s+o+s:"",f=r.outerContent().replace(/\s*\/>$/,">");return u=r.outerRange.start+f.length,f+=a+"</"+r.open.name+">",f=i.escapeText(f),t.replaceContent(f,r.outerRange.start,r.outerRange.end),t.setCaretPos(u),!0}e("actions").add("split_join_tag",function(t,i){var s=e("htmlMatcher"),o=e("editorUtils").outputInfo(t,null,i),u=e("profile").get(o.profile),a=s.tag(o.content,t.getCaretPos());return a?a.close?n(t,u,a):r(t,u,a):!1},{label:"HTML/Split\\Join Tag Declaration"})}),emmet.define("reflectCSSValue",function(e,t){function r(t){var r=e("cssEditTree"),i=e("editorUtils").outputInfo(t),s=t.getCaretPos(),o=r.parseFromPosition(i.content,s);if(!o)return;var u=o.itemFromPosition(s,!0);if(!u)return;var a=o.source,f=o.options.offset,l=s-f-u.range().start;n.exec(!1,[u]);if(a!==o.source)return{data:o.source,start:f,end:f+a.length,caret:f+u.range().start+l}}function i(t){t=e("cssEditTree").baseName(t);var n="^(?:\\-\\w+\\-)?",r;return t=="opacity"||t=="filter"?new RegExp(n+"(?:opacity|filter)$"):(r=t.match(/^border-radius-(top|bottom)(left|right)/))?new RegExp(n+"(?:"+t+"|border-"+r[1]+"-"+r[2]+"-radius)$"):(r=t.match(/^border-(top|bottom)-(left|right)-radius/))?new RegExp(n+"(?:"+t+"|border-radius-"+r[1]+r[2]+")$"):new RegExp(n+t+"$")}function s(e,t){var n=o(e.name(),e.value(),t.name(),t.value());t.value(n)}function o(t,n,r,i){var s=e("cssEditTree"),o=e("utils");t=s.baseName(t),r=s.baseName(r);if(t=="opacity"&&r=="filter")return i.replace(/opacity=[^)]*/i,"opacity="+Math.floor(parseFloat(n)*100));if(t=="filter"&&r=="opacity"){var u=n.match(/opacity=([^)]*)/i);return u?o.prettifyNumber(parseInt(u[1])/100):i}return n}var n=e("handlerList").create();return e("actions").add("reflect_css_value",function(t){return t.getSyntax()!="css"?!1:e("actionUtils").compoundUpdate(t,r(t))},{label:"CSS/Reflect Value"}),n.add(function(e){var n=i(e.name());t.each(e.parent.list(),function(t){n.test(t.name())&&s(e,t)})},{order:-1}),{addHandler:function(e,t){n.add(e,t)},removeHandler:function(e){n.remove(e,options)}}}),emmet.exec(function(e,t){e("actions").add("evaluate_math_expression",function(t){var n=e("actionUtils"),r=e("utils"),i=String(t.getContent()),s=".+-*/\\",o=e("range").create(t.getSelectionRange());o.length()||(o=n.findExpressionBounds(t,function(e){return r.isNumeric(e)||s.indexOf(e)!=-1}));if(o&&o.length()){var u=o.substring(i);u=u.replace(/([\d\.\-]+)\\([\d\.\-]+)/g,"Math.round($1/$2)");try{var a=r.prettifyNumber((new Function("return "+u))());return t.replaceContent(a,o.start,o.end),t.setCaretPos(o.start+a.length),!0}catch(f){}}return!1},{label:"Numbers/Evaluate Math Expression"})}),emmet.exec(function(e,t){function n(n,i){var s=e("utils"),o=e("actionUtils"),u=!1,a=!1,f=o.findExpressionBounds(n,function(e,t,n){return s.isNumeric(e)?!0:e=="."?s.isNumeric(n.charAt(t+1))?a?!1:a=!0:!1:e=="-"?u?!1:u=!0:!1});if(f&&f.length()){var l=f.substring(String(n.getContent())),c=parseFloat(l);if(!t.isNaN(c)){c=s.prettifyNumber(c+i);if(/^(\-?)0+[1-9]/.test(l)){var h="";RegExp.$1&&(h="-",c=c.substring(1));var p=c.split(".");p[0]=s.zeroPadString(p[0],r(l)),c=h+p.join(".")}return n.replaceContent(c,f.start,f.end),n.createSelection(f.start,f.start+c.length),!0}}return!1}function r(e){return e=e.replace(/^\-/,""),~e.indexOf(".")?e.split(".")[0].length:e.length}var i=e("actions");t.each([1,-1,10,-10,.1,-0.1],function(e){var t=e>0?"increment":"decrement";i.add(t+"_number_by_"+String(Math.abs(e)).replace(".","").substring(0,2),function(t){return n(t,e)},{label:"Numbers/"+t.charAt(0).toUpperCase()+t.substring(1)+" number by "+Math.abs(e)})})}),emmet.exec(function(e,t){var n=e("actions"),r=e("preferences");r.define("css.closeBraceIndentation","\n","Indentation before closing brace of CSS rule. Some users prefere indented closing brace of CSS rule for better readability. This preferences value will be automatically inserted before closing brace when user adds newline in newly created CSS rule (e.g. when Insert formatted linebreak action will be performed in CSS file). If youre such user, you may want to write put a value like <code>\\n\\t</code> in this preference."),n.add("insert_formatted_line_break_only",function(n){var i=e("utils"),s=e("resources"),o=e("editorUtils").outputInfo(n),u=n.getCaretPos(),a=i.getNewline();if(t.include(["html","xml","xsl"],o.syntax)){var f=s.getVariable("indentation"),l=e("htmlMatcher").tag(o.content,u);if(l&&!l.innerRange.length())return n.replaceContent(a+f+i.getCaretPlaceholder()+a,u),!0}else if(o.syntax=="css"){var c=o.content;if(u&&c.charAt(u-1)=="{"){var h=r.get("css.closeBraceIndentation"),f=s.getVariable("indentation"),p=c.charAt(u)=="}";if(!p)for(var d=u,v=c.length,m;d<v;d++){m=c.charAt(d);if(m=="{")break;if(m=="}"){h="",p=!0;break}}p||(h+="}");var g=a+f+i.getCaretPlaceholder()+h;return n.replaceContent(g,u),!0}}return!1},{hidden:!0}),n.add("insert_formatted_line_break",function(t){if(!n.run("insert_formatted_line_break_only",t)){var r=e("utils"),i=e("editorUtils").getCurrentLinePadding(t),s=String(t.getContent()),o=t.getCaretPos(),u=s.length,a=r.getNewline(),f=t.getCurrentLineRange(),l="";for(var c=f.end+1,h;c<u;c++){h=s.charAt(c);if(h!=" "&&h!="	")break;l+=h}l.length>i.length?t.replaceContent(a+l,o,o,!0):t.replaceContent(a,o)}return!0},{hidden:!0})}),emmet.exec(function(e,t){e("actions").add("merge_lines",function(t){var n=e("htmlMatcher"),r=e("utils"),i=e("editorUtils"),s=i.outputInfo(t),o=e("range").create(t.getSelectionRange());if(!o.length()){var u=n.find(s.content,t.getCaretPos());u&&(o=u.outerRange)}if(o.length()){var a=o.substring(s.content),f=r.splitByLines(a);for(var l=1;l<f.length;l++)f[l]=f[l].replace(/^\s+/,"");a=f.join("").replace(/\s{2,}/," ");var c=a.length;return a=r.escapeText(a),t.replaceContent(a,o.start,o.end),t.createSelection(o.start,o.start+c),!0}return!1})}),emmet.exec(function(e,t){function n(e,t,n){return n=n||0,t.charAt(n)==e.charAt(0)&&t.substr(n,e.length)==e}function r(t,n,r){var i=e("file"),s=e("actionUtils"),o=t.getFilePath(),u="application/octet-stream";if(o===null)throw"You should save your file before using this action";var a=i.locateFile(o,n);if(a===null)throw"Can't find "+n+" file";return i.read(a,function(o,f){if(o)throw"Unable to read "+a+": "+o;var l=e("base64").encode(String(f));if(!l)throw"Can't encode file content to base64";l="data:"+(s.mimeTypes[String(i.getExt(a))]||u)+";base64,"+l,t.replaceContent("$0"+l,r,r+n.length)}),!0}function i(t,n,r){var i=String(t.prompt("Enter path to file (absolute or relative)"));if(!i)return!1;var s=e("file"),o=s.createPath(t.getFilePath(),i);if(!o)throw"Can't save file";return s.save(o,e("base64").decode(n.replace(/^data\:.+?;.+?,/,""))),t.replaceContent("$0"+i,r,r+n.length),!0}e("actions").add("encode_decode_data_url",function(e){var t=String(e.getSelection()),s=e.getCaretPos();if(!t){var o=String(e.getContent()),u;while(s-->=0){if(n("src=",o,s)){if(u=o.substr(s).match(/^(src=(["'])?)([^'"<>\s]+)\1?/))t=u[3],s+=u[1].length;break}if(n("url(",o,s)){if(u=o.substr(s).match(/^(url\((['"])?)([^'"\)\s]+)\1?/))t=u[3],s+=u[1].length;break}}}return t?n("data:",t)?i(e,t,s):r(e,t,s):!1},{label:"Encode\\Decode data:URL image"})}),emmet.exec(function(e,t){function n(n){var r=n.getCaretPos(),s=e("editorUtils").outputInfo(n),o=e("xmlEditTree").parseFromPosition(s.content,r,!0);o&&(o.name()||"").toLowerCase()=="img"&&i(n,o.value("src"),function(i){if(i){var s=o.range(!0);o.value("width",i.width),o.value("height",i.height,o.indexOf("width")+1),e("actionUtils").compoundUpdate(n,t.extend(s,{data:o.toString(),caret:r}))}})}function r(n){var r=n.getCaretPos(),s=e("editorUtils").outputInfo(n),o=e("cssEditTree").parseFromPosition(s.content,r,!0);if(o){var u=o.itemFromPosition(r,!0),a;u&&(a=/url\((["']?)(.+?)\1\)/i.exec(u.value()||""))&&i(n,a[2],function(i){if(i){var s=o.range(!0);o.value("width",i.width+"px"),o.value("height",i.height+"px",o.indexOf("width")+1),e("actionUtils").compoundUpdate(n,t.extend(s,{data:o.toString(),caret:r}))}})}}function i(t,n,r){var i,s=e("actionUtils");if(n){if(/^data:/.test(n))return i=e("base64").decode(n.replace(/^data\:.+?;.+?,/,"")),r(s.getImageSize(i));var o=e("file"),u=o.locateFile(t.getFilePath(),n);if(u===null)throw"Can't find "+n+" file";o.read(u,function(e,t){if(e)throw"Unable to read "+u+": "+e;t=String(t),r(s.getImageSize(t))})}}e("actions").add("update_image_size",function(e){return t.include(["css","less","scss"],String(e.getSyntax()))?r(e):n(e),!0})}),emmet.define("cssResolver",function(e,t){function l(e){var t=e&&e.charCodeAt(0);return e&&e=="."||t>47&&t<58}function c(t){var n=e("utils");return t=n.trim(t),~t.indexOf("/*")||/[\n\r]/.test(t)?!1:/^[a-z0-9\-]+\s*\:/i.test(t)?(t=e("tabStops").processText(t,{replaceCarets:!0,tabstop:function(){return"value"}}),t.split(":").length==2):!1}function h(e){return e.charAt(0)=="-"&&!/^\-[\.\d]/.test(e)&&(e=e.replace(/^\-+/,"")),e.charAt(0)=="#"?p(e):d(e)}function p(t){var n=t.replace(/^#+/,"")||"0";if(n.toLowerCase()=="t")return"transparent";var r=e("utils").repeatString,i=null;switch(n.length){case 1:i=r(n,6);break;case 2:i=r(n,3);break;case 3:i=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2);break;case 4:i=n+n.substr(0,2);break;case 5:i=n+n.charAt(0);break;default:i=n.substr(0,6)}if(o.get("css.color.short")){var s=i.split("");s[0]==s[1]&&s[2]==s[3]&&s[4]==s[5]&&(i=s[0]+s[2]+s[4])}switch(o.get("css.color.case")){case"upper":i=i.toUpperCase();break;case"lower":i=i.toLowerCase()}return"#"+i}function d(e){var t=o.getDict("css.keywordAliases");return e in t?t[e]:e}function v(e){var t=o.getDict("css.unitAliases");return e in t?t[e]:e}function m(e){return t.include(o.getArray("css.keywords"),d(e))}function g(e,n){var r=i[n];return r||(r=t.find(i,function(e){return e.prefix==n})),r&&r.supports(e)}function y(e,n){var r=[];return t.each(i,function(t,n){g(e,n)&&r.push(n)}),!r.length&&!n&&t.each(i,function(e,t){e.obsolete||r.push(t)}),r}function b(e,n){t.isString(n)&&(n={prefix:n}),i[e]=t.extend({},r,n)}function w(e,n){if(n){var r=o.get(n+"."+e);if(!t.isUndefined(r))return r}return o.get("css."+e)}function E(t,n){var r=t.indexOf(":");return t=t.substring(0,r).replace(/\s+$/,"")+w("valueSeparator",n)+e("utils").trim(t.substring(r+1)),t.replace(/\s*;\s*$/,w("propertyEnd",n))}function S(e,n,r){return t.isString(e)||(e=e.data),c(e)?(n&&(~e.indexOf(";")?e=e.split(";").join(" !important;"):e+=" !important"),E(e,r)):e}function x(n){var r=t.map((n||"").split(","),e("utils").trim);return r.length?r:null}function T(e){var n=o.getArray(e);return t.each(o.getArray(e+"Addon"),function(e){e.charAt(0)=="-"?n=t.without(n,e.substr(1)):(e.charAt(0)=="+"&&(e=e.substr(1)),n.push(e))}),n}var n=null,r={prefix:"emmet",obsolete:!1,transformName:function(e){return"-"+this.prefix+"-"+e},properties:function(){return T("css."+this.prefix+"Properties")||[]},supports:function(e){return t.include(this.properties(),e)}},i={},s="${1};",o=e("preferences");o.define("css.valueSeparator",": ","Defines a symbol that should be placed between CSS property and value when expanding CSS abbreviations."),o.define("css.propertyEnd",";","Defines a symbol that should be placed at the end of CSS property  when expanding CSS abbreviations."),o.define("stylus.valueSeparator"," ","Defines a symbol that should be placed between CSS property and value when expanding CSS abbreviations in Stylus dialect."),o.define("stylus.propertyEnd","","Defines a symbol that should be placed at the end of CSS property  when expanding CSS abbreviations in Stylus dialect."),o.define("sass.propertyEnd","","Defines a symbol that should be placed at the end of CSS property  when expanding CSS abbreviations in SASS dialect."),o.define("css.autoInsertVendorPrefixes",!0,"Automatically generate vendor-prefixed copies of expanded CSS property. By default, Emmet will generate vendor-prefixed properties only when you put dash before abbreviation (e.g. <code>-bxsh</code>). With this option enabled, you dont need dashes before abbreviations: Emmet will produce vendor-prefixed properties for you.");var u=t.template("A comma-separated list of CSS properties that may have <code><%= vendor %></code> vendor prefix. This list is used to generate a list of prefixed properties when expanding <code>-property</code> abbreviations. Empty list means that all possible CSS values may have <code><%= vendor %></code> prefix."),a=t.template("A comma-separated list of <em>additional</em> CSS properties for <code>css.<%= vendor %>Preperties</code> preference. You should use this list if you want to add or remove a few CSS properties to original set. To add a new property, simply write its name, to remove it, precede property with hyphen.<br>For example, to add <em>foo</em> property and remove <em>border-radius</em> one, the preference value will look like this: <code>foo, -border-radius</code>."),f={webkit:"animation, animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, appearance, backface-visibility, background-clip, background-composite, background-origin, background-size, border-fit, border-horizontal-spacing, border-image, border-vertical-spacing, box-align, box-direction, box-flex, box-flex-group, box-lines, box-ordinal-group, box-orient, box-pack, box-reflect, box-shadow, color-correction, column-break-after, column-break-before, column-break-inside, column-count, column-gap, column-rule-color, column-rule-style, column-rule-width, column-span, column-width, dashboard-region, font-smoothing, highlight, hyphenate-character, hyphenate-limit-after, hyphenate-limit-before, hyphens, line-box-contain, line-break, line-clamp, locale, margin-before-collapse, margin-after-collapse, marquee-direction, marquee-increment, marquee-repetition, marquee-style, mask-attachment, mask-box-image, mask-box-image-outset, mask-box-image-repeat, mask-box-image-slice, mask-box-image-source, mask-box-image-width, mask-clip, mask-composite, mask-image, mask-origin, mask-position, mask-repeat, mask-size, nbsp-mode, perspective, perspective-origin, rtl-ordering, text-combine, text-decorations-in-effect, text-emphasis-color, text-emphasis-position, text-emphasis-style, text-fill-color, text-orientation, text-security, text-stroke-color, text-stroke-width, transform, transition, transform-origin, transform-style, transition-delay, transition-duration, transition-property, transition-timing-function, user-drag, user-modify, user-select, writing-mode, svg-shadow, box-sizing, border-radius",moz:"animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, appearance, backface-visibility, background-inline-policy, binding, border-bottom-colors, border-image, border-left-colors, border-right-colors, border-top-colors, box-align, box-direction, box-flex, box-ordinal-group, box-orient, box-pack, box-shadow, box-sizing, column-count, column-gap, column-rule-color, column-rule-style, column-rule-width, column-width, float-edge, font-feature-settings, font-language-override, force-broken-image-icon, hyphens, image-region, orient, outline-radius-bottomleft, outline-radius-bottomright, outline-radius-topleft, outline-radius-topright, perspective, perspective-origin, stack-sizing, tab-size, text-blink, text-decoration-color, text-decoration-line, text-decoration-style, text-size-adjust, transform, transform-origin, transform-style, transition, transition-delay, transition-duration, transition-property, transition-timing-function, user-focus, user-input, user-modify, user-select, window-shadow, background-clip, border-radius",ms:"accelerator, backface-visibility, background-position-x, background-position-y, behavior, block-progression, box-align, box-direction, box-flex, box-line-progression, box-lines, box-ordinal-group, box-orient, box-pack, content-zoom-boundary, content-zoom-boundary-max, content-zoom-boundary-min, content-zoom-chaining, content-zoom-snap, content-zoom-snap-points, content-zoom-snap-type, content-zooming, filter, flow-from, flow-into, font-feature-settings, grid-column, grid-column-align, grid-column-span, grid-columns, grid-layer, grid-row, grid-row-align, grid-row-span, grid-rows, high-contrast-adjust, hyphenate-limit-chars, hyphenate-limit-lines, hyphenate-limit-zone, hyphens, ime-mode, interpolation-mode, layout-flow, layout-grid, layout-grid-char, layout-grid-line, layout-grid-mode, layout-grid-type, line-break, overflow-style, perspective, perspective-origin, perspective-origin-x, perspective-origin-y, scroll-boundary, scroll-boundary-bottom, scroll-boundary-left, scroll-boundary-right, scroll-boundary-top, scroll-chaining, scroll-rails, scroll-snap-points-x, scroll-snap-points-y, scroll-snap-type, scroll-snap-x, scroll-snap-y, scrollbar-arrow-color, scrollbar-base-color, scrollbar-darkshadow-color, scrollbar-face-color, scrollbar-highlight-color, scrollbar-shadow-color, scrollbar-track-color, text-align-last, text-autospace, text-justify, text-kashida-space, text-overflow, text-size-adjust, text-underline-position, touch-action, transform, transform-origin, transform-origin-x, transform-origin-y, transform-origin-z, transform-style, transition, transition-delay, transition-duration, transition-property, transition-timing-function, user-select, word-break, word-wrap, wrap-flow, wrap-margin, wrap-through, writing-mode",o:"dashboard-region, animation, animation-delay, animation-direction, animation-duration, animation-fill-mode, animation-iteration-count, animation-name, animation-play-state, animation-timing-function, border-image, link, link-source, object-fit, object-position, tab-size, table-baseline, transform, transform-origin, transition, transition-delay, transition-duration, transition-property, transition-timing-function, accesskey, input-format, input-required, marquee-dir, marquee-loop, marquee-speed, marquee-style"};t.each(f,function(e,t){o.define("css."+t+"Properties",e,u({vendor:t})),o.define("css."+t+"PropertiesAddon","",a({vendor:t}))}),o.define("css.unitlessProperties","z-index, line-height, opacity, font-weight, zoom","The list of properties whose values must not contain units."),o.define("css.intUnit","px","Default unit for integer values"),o.define("css.floatUnit","em","Default unit for float values"),o.define("css.keywords","auto, inherit","A comma-separated list of valid keywords that can be used in CSS abbreviations."),o.define("css.keywordAliases","a:auto, i:inherit, s:solid, da:dashed, do:dotted, t:transparent","A comma-separated list of keyword aliases, used in CSS abbreviation. Each alias should be defined as <code>alias:keyword_name</code>."),o.define("css.unitAliases","e:em, p:%, x:ex, r:rem","A comma-separated list of unit aliases, used in CSS abbreviation. Each alias should be defined as <code>alias:unit_value</code>."),o.define("css.color.short",!0,"Should color values like <code>#ffffff</code> be shortened to <code>#fff</code> after abbreviation with color was expanded."),o.define("css.color.case","keep","Letter case of color values generated by abbreviations with color (like <code>c#0</code>). Possible values are <code>upper</code>, <code>lower</code> and <code>keep</code>."),o.define("css.fuzzySearch",!0,"Enable fuzzy search among CSS snippet names. When enabled, every <em>unknown</em> snippet will be scored against available snippet names (not values or CSS properties!). The match with best score will be used to resolve snippet value. For example, with this preference enabled, the following abbreviations are equal: <code>ov:h</code> == <code>ov-h</code> == <code>o-h</code> == <code>oh</code>"),o.define("css.fuzzySearchMinScore",.3,"The minium score (from 0 to 1) that fuzzy-matched abbreviation should achive. Lower values may produce many false-positive matches, higher values may reduce possible matches."),o.define("css.alignVendor",!1,"If set to <code>true</code>, all generated vendor-prefixed properties will be aligned by real property name."),b("w",{prefix:"webkit"}),b("m",{prefix:"moz"}),b("s",{prefix:"ms"}),b("o",{prefix:"o"});var N=["css","less","sass","scss","stylus"];e("resources").addResolver(function(e,r){return t.include(N,r)&&e.isElement()?n.expandToSnippet(e.abbreviation,r):null});var C=e("expandAbbreviation");return C.addHandler(function(e,n,r){if(!t.include(N,n))return!1;var i=e.getSelectionRange().end,s=C.findAbbreviation(e);if(s){var o=emmet.expandAbbreviation(s,n,r);if(o){var u=i-s.length,a=i;return e.getContent().charAt(i)==";"&&o.charAt(o.length-1)==";"&&a++,e.replaceContent(o,u,a),!0}}return!1}),n={addPrefix:b,supportsPrefix:g,prefixed:function(e,t){return g(e,t)?"-"+t+"-"+e:e},listPrefixes:function(){return t.map(i,function(e){return e.prefix})},getPrefix:function(e){return i[e]},removePrefix:function(e){e in i&&delete i[e]},extractPrefixes:function(e){if(e.charAt(0)!="-")return{property:e,prefixes:null};var t=1,n=e.length,r,s=[];while(t<n){r=e.charAt(t);if(r=="-"){t++;break}if(!(r in i)){s.length=0,t=1;break}s.push(r),t++}return t==n-1&&(t=1,s.length=1),{property:e.substring(t),prefixes:s.length?s:"all"}},findValuesInAbbreviation:function(t,n){n=n||"css";var r=0,i=t.length,s="",o;while(r<i){o=t.charAt(r);if(l(o)||o=="#"||o=="-"&&l(t.charAt(r+1))){s=t.substring(r);break}r++}var u=t.substring(0,t.length-s.length),a=e("resources"),f=[];while(~u.indexOf("-")&&!a.findSnippet(n,u)){var c=u.split("-"),h=c.pop();if(!m(h))break;f.unshift(h),u=c.join("-")}return f.join("-")+s},parseValues:function(n){var r=e("stringStream").create(n),i=[],s=null;while(s=r.next()){if(s=="#")r.match(/^t|[0-9a-f]+/i,!0),i.push(r.current());else if(s=="-"){if(m(t.last(i))||r.start&&l(n.charAt(r.start-1)))r.start=r.pos;r.match(/^\-?[0-9]*(\.[0-9]+)?[a-z%\.]*/,!0),i.push(r.current())}else r.match(/^[0-9]*(\.[0-9]*)?[a-z%]*/,!0),i.push(r.current());r.start=r.pos}return t.map(t.compact(i),h)},extractValues:function(e){var t=this.findValuesInAbbreviation(e);return t?{property:e.substring(0,e.length-t.length).replace(/-$/,""),values:this.parseValues(t)}:{property:e,values:null}},normalizeValue:function(e,n){n=(n||"").toLowerCase();var r=o.getArray("css.unitlessProperties");return e.replace(/^(\-?[0-9\.]+)([a-z]*)$/,function(e,i,s){return!s&&(i=="0"||t.include(r,n))?i:s?i+v(s):i.replace(/\.$/,"")+o.get(~i.indexOf(".")?"css.floatUnit":"css.intUnit")})},expand:function(n,r,u){u=u||"css";var a=e("resources"),f=o.get("css.autoInsertVendorPrefixes"),l;if(l=/^(.+)\!$/.test(n))n=RegExp.$1;var h=a.findSnippet(u,n);if(h&&!f)return S(h,l,u);var p=this.extractPrefixes(n),d=this.extractValues(p.property),v=t.extend(p,d);h?v.values=null:h=a.findSnippet(u,v.property),!h&&o.get("css.fuzzySearch")&&(h=a.fuzzyFindSnippet(u,v.property,parseFloat(o.get("css.fuzzySearchMinScore")))),h?t.isString(h)||(h=h.data):h=v.property+":"+s;if(!c(h))return h;var m=this.splitSnippet(h),g=[];!r&&v.values&&(r=t.map(v.values,function(e){return this.normalizeValue(e,m.name)},this).join(" ")+";"),m.value=r||m.value;var b=v.prefixes=="all"||!v.prefixes&&f?y(m.name,f&&v.prefixes!="all"):v.prefixes,w=[],E;t.each(b,function(e){e in i&&(E=i[e].transformName(m.name),w.push(E),g.push(S(E+":"+m.value,l,u)))}),g.push(S(m.name+":"+m.value,l,u)),w.push(m.name);if(o.get("css.alignVendor")){var x=e("utils").getStringsPads(w);g=t.map(g,function(e,t){return x[t]+e})}return g},expandToSnippet:function(e,n){var r=this.expand(e,null,n);return t.isArray(r)?r.join("\n"):t.isString(r)?String(r):r.data},splitSnippet:function(t){var n=e("utils");t=n.trim(t);if(t.indexOf(":")==-1)return{name:t,value:s};var r=t.split(":");return{name:n.trim(r.shift()),value:n.trim(r.join(":")).replace(/^(\$\{0\}|\$0)(\s*;?)$/,"${1}$2")}},getSyntaxPreference:w,transformSnippet:S}}),emmet.define("cssGradient",function(e,t){function a(t){return e("utils").trim(t).replace(/\s+/g," ")}function f(r){var i=n[0],u=e("stringStream").create(e("utils").trim(r)),f=[],c;while(c=u.next())u.peek()==","?(f.push(u.current()),u.next(),u.eatSpace(),u.start=u.pos):c=="("&&u.skipTo(")");f.push(u.current()),f=t.compact(t.map(f,a));if(!f.length)return null;if(s.test(f[0])||o.test(f[0]))i=f.shift();return{type:"linear",direction:i,colorStops:t.map(f,l)}}function l(e){e=a(e);var t=null;e=e.replace(/^(\w+\(.+?\))\s*/,function(e,n){return t=n,""});if(!t){var n=e.split(" ");t=n[0],e=n[1]||""}var r={color:t};return e&&e.replace(/^(\-?[\d\.]+)([a-z%]+)?$/,function(e,t,n){r.position=t,~t.indexOf(".")?n="":n||(n="%"),n&&(r.unit=n)}),r}function c(n,r){var i=e("resources"),s=e("preferences"),o=i.findSnippet(r,n);!o&&s.get("css.fuzzySearch")&&(o=i.fuzzyFindSnippet(r,n,parseFloat(s.get("css.fuzzySearchMinScore"))));if(o)return t.isString(o)||(o=o.data),e("cssResolver").splitSnippet(o).name}function h(e){var n=0;t.each(e,function(r,i){if(!i)return r.position=r.position||0;i==e.length-1&&!("position"in r)&&(r.position=1);if("position"in r){var s=e[n].position||0,o=(r.position-s)/(i-n);t.each(e.slice(n,i),function(e,t){e.position=s+o*t}),n=i}})}function p(e){var n=parseFloat(e);if(!t.isNaN(n))switch(n%360){case 0:return"left";case 90:return"bottom";case 180:return"right";case 240:return"top"}return e}function d(e){e=p(e);if(s.test(e))throw"The direction is an angle that cant be converted.";var t=function(t){return~e.indexOf(t)?"100%":"0"};return t("right")+" "+t("bottom")+", "+t("left")+" "+t("top")}function v(e){var n=u.getArray("css.gradient.prefixes"),r=t.map(n,function(t){return"-"+t+"-"+e});return r.push(e),r}function m(n,i){var s=[],o=e("cssResolver");return u.get("css.gradient.fallback")&&~i.toLowerCase().indexOf("background")&&s.push({name:"background-color",value:"${1:"+n.colorStops[0].color+"}"}),t.each(u.getArray("css.gradient.prefixes"),function(e){var t=o.prefixed(i,e);if(e=="webkit"&&u.get("css.gradient.oldWebkit"))try{s.push({name:t,value:r.oldWebkitLinearGradient(n)})}catch(a){}s.push({name:t,value:r.toString(n,e)})}),s.sort(function(e,t){return t.name.length-e.name.length})}function g(n,i,s){var o=n.parent,u=e("utils"),a=e("preferences").get("css.alignVendor"),f=n.styleSeparator,l=n.styleBefore;t.each(o.getAll(v(n.name())),function(e){e!=n&&/gradient/i.test(e.value())&&(e.styleSeparator.length<f.length&&(f=e.styleSeparator),e.styleBefore.length<l.length&&(l=e.styleBefore),o.remove(e))});if(a){if(l!=n.styleBefore){var c=n.fullRange();o._updateSource(l,c.start,c.start+n.styleBefore.length),n.styleBefore=l}f!=n.styleSeparator&&(o._updateSource(f,n.nameRange().end,n.valueRange().start),n.styleSeparator=f)}var h=n.value();s||(s=e("range").create(0,n.value()));var p=function(e){return u.replaceSubstring(h,e,s)};n.value(p(r.toString(i))+"${2}");var d=m(i,n.name());if(a){var g=t.pluck(d,"value"),y=t.pluck(d,"name");g.push(n.value()),y.push(n.name());var b=u.getStringsPads(t.map(g,function(e){return e.substring(0,e.indexOf("("))})),w=u.getStringsPads(y);n.name(t.last(w)+n.name()),t.each(d,function(e,t){e.name=w[t]+e.name,e.value=b[t]+e.value}),n.value(t.last(b)+n.value())}t.each(d,function(e){o.add(e.name,e.value,o.indexOf(n))})}function y(e){var n=e.value(),i=null,s=t.find(e.valueParts(),function(e){return i=r.parse(e.substring(n))});return s&&i?{gradient:i,valueRange:s}:null}function b(n,i){var s=u.get("css.gradient.defaultProperty");if(!s)return!1;var o=String(n.getContent()),a=e("range").create(n.getCurrentLineRange()),f=a.substring(o).replace(/^\s+/,function(e){return a.start+=e.length,""}).replace(/\s+$/,function(e){return a.end-=e.length,""}),l=e("cssResolver"),c=r.parse(f);if(c){var h=m(c,s);h.push({name:s,value:r.toString(c)+"${2}"});var p=l.getSyntaxPreference("valueSeparator",i),d=l.getSyntaxPreference("propertyEnd",i);if(e("preferences").get("css.alignVendor")){var v=e("utils").getStringsPads(t.map(h,function(e){return e.value.substring(0,e.value.indexOf("("))}));t.each(h,function(e,t){e.value=v[t]+e.value})}return h=t.map(h,function(e){return e.name+p+e.value+d}),n.replaceContent(h.join("\n"),a.start,a.end),!0}return!1}function w(n,r){var i=null,s=e("cssEditTree").parseFromPosition(n,r,!0);return s&&(i=s.itemFromPosition(r,!0),i||(i=t.find(s.list(),function(e){return e.range(true).end==r}))),{rule:s,property:i}}var n=["top","to bottom","0deg"],r=null,i=["css","less","sass","scss","stylus","styl"],s=/\d+deg/i,o=/top|bottom|left|right/i,u=e("preferences");return u.define("css.gradient.prefixes","webkit, moz, o","A comma-separated list of vendor-prefixes for which values should be generated."),u.define("css.gradient.oldWebkit",!0,"Generate gradient definition for old Webkit implementations"),u.define("css.gradient.omitDefaultDirection",!0,"Do not output default direction definition in generated gradients."),u.define("css.gradient.defaultProperty","background-image","When gradient expanded outside CSS value context, it will produce properties with this name."),u.define("css.gradient.fallback",!1,"With this option enabled, CSS gradient generator will produce <code>background-color</code> property with gradient first color as fallback for old browsers."),e("expandAbbreviation").addHandler(function(n,r,s){var o=e("editorUtils").outputInfo(n,r,s);if(!t.include(i,o.syntax))return!1;var u=n.getCaretPos(),a=o.content,f=w(a,u);if(f.property){var l=y(f.property);if(l){var h=f.rule.options.offset||0,p=h+f.rule.toString().length;if(/[\n\r]/.test(f.property.value())){var d=f.property.valueRange(!0).start+l.valueRange.end;a=e("utils").replaceSubstring(a,";",d);var v=w(a,u);v.property&&(l=y(v.property),f=v)}f.property.end(";");var m=c(f.property.name(),r);return m&&f.property.name(m),g(f.property,l.gradient,l.valueRange),n.replaceContent(f.rule.toString(),h,p,!0),!0}}return b(n,r)}),e("reflectCSSValue").addHandler(function(n){var i=e("utils"),s=y(n);if(!s)return!1;var o=n.value(),u=function(e){return i.replaceSubstring(o,e,s.valueRange)};return t.each(n.parent.getAll(v(n.name())),function(e){if(e===n)return;var t=e.value().match(/^\s*(\-([a-z]+)\-)?linear\-gradient/);t?e.value(u(r.toString(s.gradient,t[2]||""))):(t=e.value().match(/\s*\-webkit\-gradient/))&&e.value(u(r.oldWebkitLinearGradient(s.gradient)))}),!0}),r={parse:function(t){var n=null;return e("utils").trim(t).replace(/^([\w\-]+)\((.+?)\)$/,function(e,t,r){return t=t.toLowerCase().replace(/^\-[a-z]+\-/,""),t=="linear-gradient"||
t=="lg"?(n=f(r),""):e}),n},oldWebkitLinearGradient:function(e){t.isString(e)&&(e=this.parse(e));if(!e)return null;var n=t.map(e.colorStops,t.clone);return t.each(n,function(e){if(!("position"in e))return;if(!~e.position.indexOf(".")&&e.unit!="%")throw"Can't convert color stop '"+(e.position+(e.unit||""))+"'";e.position=parseFloat(e.position)/(e.unit=="%"?100:1)}),h(n),n=t.map(n,function(e,t){return!e.position&&!t?"from("+e.color+")":e.position==1&&t==n.length-1?"to("+e.color+")":"color-stop("+e.position.toFixed(2).replace(/\.?0+$/,"")+", "+e.color+")"}),"-webkit-gradient(linear, "+d(e.direction)+", "+n.join(", ")+")"},toString:function(e,r){if(e.type=="linear"){var i=(r?"-"+r+"-":"")+"linear-gradient",s=t.map(e.colorStops,function(e){return e.color+("position"in e?" "+e.position+(e.unit||""):"")});return e.direction&&(!u.get("css.gradient.omitDefaultDirection")||!t.include(n,e.direction))&&s.unshift(e.direction),i+"("+s.join(", ")+")"}}}}),emmet.exec(function(e,t){var n=e("handlerList").create(),r=e("resources");t.extend(r,{addGenerator:function(e,r,i){t.isString(e)&&(e=new RegExp(e)),n.add(function(t,n){var i;return(i=e.exec(t.name()))?r(i,t,n):null},i)}}),r.addResolver(function(e,r){return n.exec(null,t.toArray(arguments))})}),emmet.define("tagName",function(e,t){var n={empty:"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,keygen,command".split(","),blockLevel:"address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,link,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul,h1,h2,h3,h4,h5,h6".split(","),inlineLevel:"a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var".split(",")},r={p:"span",ul:"li",ol:"li",table:"tr",tr:"td",tbody:"tr",thead:"tr",tfoot:"tr",colgroup:"col",select:"option",optgroup:"option",audio:"source",video:"source",object:"param",map:"area"};return{resolve:function(e){return e=(e||"").toLowerCase(),e in r?this.getMapping(e):this.isInlineLevel(e)?"span":"div"},getMapping:function(e){return r[e.toLowerCase()]},isInlineLevel:function(e){return this.isTypeOf(e,"inlineLevel")},isBlockLevel:function(e){return this.isTypeOf(e,"blockLevel")},isEmptyElement:function(e){return this.isTypeOf(e,"empty")},isTypeOf:function(e,r){return t.include(n[r],e)},addMapping:function(e,t){r[e]=t},removeMapping:function(e){e in r&&delete r[e]},addElementToCollection:function(e,r){n[r]||(n[r]=[]);var i=this.getCollection(r);t.include(i,e)||i.push(e)},removeElementFromCollection:function(e,r){r in n&&(n[r]=t.without(this.getCollection(r),e))},getCollection:function(e){return n[e]}}}),emmet.exec(function(e,t){function i(){return{element:n.get("bem.elementSeparator"),modifier:n.get("bem.modifierSeparator")}}function s(n){if(e("abbreviationUtils").isSnippet(n))return n;n.__bem={block:"",element:"",modifier:""};var r=o(n.attribute("class")).split(" "),i=/^[a-z]\-/i;return n.__bem.block=t.find(r,function(e){return i.test(e)}),n.__bem.block||(i=/^[a-z]/i,n.__bem.block=t.find(r,function(e){return i.test(e)})||""),r=t.chain(r).map(function(e){return u(e,n)}).flatten().uniq().value().join(" "),r&&n.attribute("class",r),n}function o(t){var r=e("utils");t=(" "+(t||"")+" ").replace(/\s+/g," ");var s=n.get("bem.shortElementPrefix");if(s){var o=new RegExp("\\s("+r.escapeForRegexp(s)+"+)","g");t=t.replace(o,function(e,t){return" "+r.repeatString(i().element,t.length)})}return r.trim(t)}function u(e,t){e=a(e,t,"element"),e=a(e,t,"modifier");var n="",r="",s="",o=i();if(~e.indexOf(o.element)){var u=e.split(o.element),f=u[1].split(o.modifier);n=u[0],r=f.shift(),s=f.join(o.modifier)}else if(~e.indexOf(o.modifier)){var l=e.split(o.modifier);n=l.shift(),s=l.join(o.modifier)}if(n||r||s){n||(n=t.__bem.block);var c=n,h=[];return r?(c+=o.element+r,h.push(c)):h.push(c),s&&h.push(c+o.modifier+s),t.__bem.block=n,t.__bem.element=r,t.__bem.modifier=s,h}return e}function a(e,t,n){var r=i(),s=new RegExp("^("+r[n]+")+","g");if(s.test(e)){var o=0,u=e.replace(s,function(e,t){return o=e.length/r[n].length,""}),a=t;while(a.parent&&o--)a=a.parent;if(!a||!a.__bem)a=t;if(a&&a.__bem){var f=a.__bem.block;return n=="modifier"&&a.__bem.element&&(f+=r.element+a.__bem.element),f+r[n]+u}}return e}function f(n,i){n.name&&s(n,i);var o=e("abbreviationUtils");return t.each(n.children,function(e){f(e,i),!o.isSnippet(e)&&e.start&&(r=!0)}),n}var n=e("preferences");n.define("bem.elementSeparator","__","Class names element separator."),n.define("bem.modifierSeparator","_","Class names modifier separator."),n.define("bem.shortElementPrefix","-","Symbol for describing short block-element notation. Class names prefixed with this symbol will be treated as element name for parents block name. Each symbol instance traverses one level up in parsed tree for block name lookup. Empty value will disable short notation.");var r=!1;e("filters").add("bem",function(t,n){return r=!1,t=f(t,n),r&&(t=e("filters").apply(t,"html",n)),t})}),emmet.exec(function(e,t){function r(r,i,s){var o=e("utils"),u=n.get("filter.commentTrigger");if(u!="*"){var a=t.find(u.split(","),function(e){return!!r.attribute(o.trim(e))});if(!a)return}var f={node:r,name:r.name(),padding:r.parent?r.parent.padding:"",attr:function(e,t,n){var i=r.attribute(e);return i?(t||"")+i+(n||""):""}},l=o.normalizeNewline(i?i(f):""),c=o.normalizeNewline(s?s(f):"");r.start=r.start.replace(/</,l+"<"),r.end=r.end.replace(/>/,">"+c)}function i(n,s,o){var u=e("abbreviationUtils");return t.each(n.children,function(e){u.isBlock(e)&&r(e,s,o),i(e,s,o)}),n}var n=e("preferences");n.define("filter.commentAfter",'\n<!-- /<%= attr("id", "#") %><%= attr("class", ".") %> -->',"A definition of comment that should be placed <i>after</i> matched element when <code>comment</code> filter is applied. This definition is an ERB-style template passed to <code>_.template()</code> function (see Underscore.js docs for details). In template context, the following properties and functions are availabe:\n<ul><li><code>attr(name, before, after)</code>  a function that outputsspecified attribute value concatenated with <code>before</code> and <code>after</code> strings. If attribute doesn't exists, the empty string will be returned.</li><li><code>node</code>  current node (instance of <code>AbbreviationNode</code>)</li><li><code>name</code>  name of current tag</li><li><code>padding</code>  current string padding, can be used for formatting</li></ul>"),n.define("filter.commentBefore","","A definition of comment that should be placed <i>before</i> matched element when <code>comment</code> filter is applied. For more info, read description of <code>filter.commentAfter</code> property"),n.define("filter.commentTrigger","id, class","A comma-separated list of attribute names that should exist in abbreviatoin where comment should be added. If you wish to add comment for every element, set this option to <code>*</code>"),e("filters").add("c",function(e){var r=t.template(n.get("filter.commentBefore")),s=t.template(n.get("filter.commentAfter"));return i(e,r,s)})}),emmet.exec(function(e,t){function r(e){return e.replace(/([<>&])/g,function(e,t){return n[t]})}var n={"<":"&lt;",">":"&gt;","&":"&amp;"};e("filters").add("e",function i(e){return t.each(e.children,function(e){e.start=r(e.start),e.end=r(e.end),e.content=r(e.content),i(e)}),e})}),emmet.exec(function(e,t){function i(n){return t.include(r.getArray("format.noIndentTags")||[],n.name())?"":e("resources").getVariable("indentation")}function s(t){return t.parent&&e("abbreviationUtils").hasBlockChildren(t.parent)}function o(e){return e.parent&&!e.parent.parent&&!e.index()}function u(t,n){var r=e("abbreviationUtils");return n.tag_nl===!0||r.isBlock(t)?!0:!t.parent||!n.inline_break?!1:f(t.parent,n)}function a(e,t){return e.children.length&&u(e.children[0],t)}function f(n,r){var i=0,s=e("abbreviationUtils");return!!t.find(n.children,function(e){e.isTextNode()||!s.isInline(e)?i=0:s.isInline(e)&&i++;if(i>=r.inline_break)return!0})}function l(e){return!e.parent}function c(t,n,r){return t.start=t.end="",!o(t)&&n.tag_nl!==!1&&u(t,n)&&(l(t.parent)||!e("abbreviationUtils").isInline(t.parent))&&(t.start=e("utils").getNewline()+t.start),t}function h(n,r){var i=e("abbreviationUtils"),s=t.any(n.children,function(e){return i.isSnippet(e)?!1:!i.isInline(e)});return s?!0:f(n,r)}function p(f,l,c){f.start=f.end=n;var p=e("utils"),d=e("abbreviationUtils"),v=d.isUnary(f),m=p.getNewline(),g=i(f);if(l.tag_nl!==!1){var y=l.tag_nl===!0&&(l.tag_nl_leaf||f.children.length);y||(y=t.include(r.getArray("format.forceIndentationForTags")||[],f.name()));if(!f.isTextNode()){if(u(f,l)){!o(f)&&(!d.isSnippet(f.parent)||f.index())&&(f.start=m+f.start);if(d.hasBlockChildren(f)||a(f,l)||y&&!v)f.end=m+f.end;if(d.hasTagsInContent(f)||y&&!f.children.length&&!v)f.start+=m+g}else d.isInline(f)&&s(f)&&!o(f)?f.start=m+f.start:d.isInline(f)&&h(f,l)&&(f.end=m+f.end);f.padding=g}}return f}var n="%s",r=e("preferences");r.define("format.noIndentTags","html","A comma-separated list of tag names that should not get inner indentation."),r.define("format.forceIndentationForTags","body","A comma-separated list of tag names that should <em>always</em> get inner indentation."),e("filters").add("_format",function d(n,r,i){i=i||0;var s=e("abbreviationUtils");return t.each(n.children,function(e){s.isSnippet(e)?c(e,r,i):p(e,r,i),d(e,r,i+1)}),n})}),emmet.exec(function(e,t){function r(t){return e("utils").trim(t).replace(/\s+/g,".")}function i(e,n){var i="",s=[],o=n.attributeQuote(),u=n.cursor();return t.each(e.attributeList(),function(e){var t=n.attributeName(e.name);switch(t.toLowerCase()){case"id":i+="#"+(e.value||u);break;case"class":i+="."+r(e.value||u);break;default:s.push(":"+t+" => "+o+(e.value||u)+o)}}),s.length&&(i+="{"+s.join(", ")+"}"),i}function s(e){return e.parent&&e.parent.hasBlockChildren()}function o(t,n,r){if(!t.parent)return t;var s=e("abbreviationUtils"),o=e("utils"),u=i(t,n),a=n.cursor(),f=s.isUnary(t),l=n.self_closing_tag&&f?"/":"",c="",h="%"+n.tagName(t.name());h.toLowerCase()=="%div"&&u&&u.indexOf("{")==-1&&(h=""),t.end="",c=h+u+l+" ";var p="%s";return t.start=o.replaceSubstring(t.start,c,t.start.indexOf(p),p),!t.children.length&&!f&&(t.start+=a),t}var n="${child}";e("filters").add("haml",function u(n,r,i){i=i||0;var s=e("abbreviationUtils");return i||(n=e("filters").apply(n,"_format",r)),t.each(n.children,function(e){s.isSnippet(e)||o(e,r,i),u(e,r,i+1)}),n})}),emmet.exec(function(e,t){function n(e,n){var r=n.attributeQuote(),i=n.cursor();return t.map(e.attributeList(),function(e){var t=n.attributeName(e.name);return" "+t+"="+r+(e.value||i)+r}).join("")}function r(t,r,i){if(!t.parent)return t;var s=e("abbreviationUtils"),o=e("utils"),u=n(t,r),a=r.cursor(),f=s.isUnary(t),l="",c="";if(!t.isTextNode()){var h=r.tagName(t.name());f?(l="<"+h+u+r.selfClosing()+">",t.end=""):(l="<"+h+u+">",c="</"+h+">")}var p="%s";return t.start=o.replaceSubstring(t.start,l,t.start.indexOf(p),p),t.end=o.replaceSubstring(t.end,c,t.end.indexOf(p),p),!t.children.length&&!f&&!~t.content.indexOf(a)&&!e("tabStops").extract(t.content).tabstops.length&&(t.start+=a),t}e("filters").add("html",function i(n,s,o){o=o||0;var u=e("abbreviationUtils");return o||(n=e("filters").apply(n,"_format",s)),t.each(n.children,function(e){u.isSnippet(e)||r(e,s,o),i(e,s,o+1)}),n})}),emmet.exec(function(e,t){var n=/^\s+/,r=/[\n\r]/g;e("filters").add("s",function i(s,o,u){var a=e("abbreviationUtils");return t.each(s.children,function(e){a.isSnippet(e)||(e.start=e.start.replace(n,""),e.end=e.end.replace(n,"")),e.start=e.start.replace(r,""),e.end=e.end.replace(r,""),e.content=e.content.replace(r,""),i(e)}),s})}),emmet.exec(function(e,t){function n(e,r){return t.each(e.children,function(e){e.content&&(e.content=e.content.replace(r,"")),n(e,r)}),e}e("preferences").define("filter.trimRegexp","[\\s|\\u00a0]*[\\d|#|\\-|*|\\u2022]+\\.?\\s*","Regular expression used to remove list markers (numbers, dashes, bullets, etc.) in <code>t</code> (trim) filter. The trim filter is useful for wrapping with abbreviation lists, pased from other documents (for example, Word documents)."),e("filters").add("t",function(t){var r=new RegExp(e("preferences").get("filter.trimRegexp"));return n(t,r)})}),emmet.exec(function(e,t){function r(e){e.start=e.start.replace(/\s+select\s*=\s*(['"]).*?\1/,"")}var n={"xsl:variable":1,"xsl:with-param":1};e("filters").add("xsl",function i(s){var o=e("abbreviationUtils");return t.each(s.children,function(e){!o.isSnippet(e)&&(e.name()||"").toLowerCase()in n&&e.children.length&&r(e),i(e)}),s})}),emmet.exec(function(e,t){function i(e,t){return Math.round(Math.random()*(t-e)+e)}function s(e,n){var r=e.length,s=Math.min(r,n),o=[];while(o.length<s){var u=i(0,r-1);t.include(o,u)||o.push(u)}return t.map(o,function(t){return e[t]})}function o(e){return t.isString(e)?e.charAt(i(0,e.length-1)):e[i(0,e.length-1)]}function u(e,t){return e.length&&(e[0]=e[0].charAt(0).toUpperCase()+e[0].substring(1)),e.join(" ")+(t||o("?!..."))}function a(e){var n=e.length,r=0;n>3&&n<=6?r=i(0,1):n>6&&n<=12?r=i(0,2):r=i(1,4),t.each(s(t.range(r)),function(t){e[t]+=","})}function f(e,t){var o=[],f=0,l;e=parseInt(e,10),t&&(l=n.slice(0,e),l.length>5&&(l[4]+=","),f+=l.length,o.push(u(l,".")));while(f<e)l=s(r,Math.min(i(3,12)*i(1,5),e-f)),f+=l.length,a(l),o.push(u(l));return o.join(" ")}e("abbreviationParser").addPreprocessor(function(e,t){var n=/^(?:lorem|lipsum)(\d*)$/i,r;e.findAll(function(e){if(e._name&&(r=e._name.match(n))){var t=r[1]||30;e._name="",e.data("forceNameResolving",e.isRepeating()||e.attributeList().length),e.data("pasteOverwrites",!0),e.data("paste",function(e,n){return f(t,!e)})}})});var n="lorem ipsum dolor sit amet consectetur adipisicing elit".split(" "),r=["exercitationem","perferendis","perspiciatis","laborum","eveniet","sunt","iure","nam","nobis","eum","cum","officiis","excepturi","odio","consectetur","quasi","aut","quisquam","vel","eligendi","itaque","non","odit","tempore","quaerat","dignissimos","facilis","neque","nihil","expedita","vitae","vero","ipsum","nisi","animi","cumque","pariatur","velit","modi","natus","iusto","eaque","sequi","illo","sed","ex","et","voluptatibus","tempora","veritatis","ratione","assumenda","incidunt","nostrum","placeat","aliquid","fuga","provident","praesentium","rem","necessitatibus","suscipit","adipisci","quidem","possimus","voluptas","debitis","sint","accusantium","unde","sapiente","voluptate","qui","aspernatur","laudantium","soluta","amet","quo","aliquam","saepe","culpa","libero","ipsa","dicta","reiciendis","nesciunt","doloribus","autem","impedit","minima","maiores","repudiandae","ipsam","obcaecati","ullam","enim","totam","delectus","ducimus","quis","voluptates","dolores","molestiae","harum","dolorem","quia","voluptatem","molestias","magni","distinctio","omnis","illum","dolorum","voluptatum","ea","quas","quam","corporis","quae","blanditiis","atque","deserunt","laboriosam","earum","consequuntur","hic","cupiditate","quibusdam","accusamus","ut","rerum","error","minus","eius","ab","ad","nemo","fugit","officia","at","in","id","quos","reprehenderit","numquam","iste","fugiat","sit","inventore","beatae","repellendus","magnam","recusandae","quod","explicabo","doloremque","aperiam","consequatur","asperiores","commodi","optio","dolor","labore","temporibus","repellat","veniam","architecto","est","esse","mollitia","nulla","a","similique","eos","alias","dolore","tenetur","deleniti","porro","facere","maxime","corrupti"]}),emmet.exec(function(e,t){e("actions").add("select_line",function(e){var t=e.getCurrentLineRange();return e.createSelection(t.start,t.end),!0})}),emmet.exec(function(e,t){e("resources").setVocabulary({variables:{lang:"en",locale:"en-US",charset:"UTF-8",indentation:"	",newline:"\n"},css:{filters:"html",snippets:{"@i":"@import url(|);","@import":"@import url(|);","@m":"@media ${1:screen} {\n	|\n}","@media":"@media ${1:screen} {\n	|\n}","@f":"@font-face {\n	font-family:|;\n	src:url(|);\n}","@f+":"@font-face {\n	font-family: '${1:FontName}';\n	src: url('${2:FileName}.eot');\n	src: url('${2:FileName}.eot?#iefix') format('embedded-opentype'),\n		 url('${2:FileName}.woff') format('woff'),\n		 url('${2:FileName}.ttf') format('truetype'),\n		 url('${2:FileName}.svg#${1:FontName}') format('svg');\n	font-style: ${3:normal};\n	font-weight: ${4:normal};\n}","@kf":"@-webkit-keyframes ${1:identifier} {\n	${2:from} { ${3} }${6}\n	${4:to} { ${5} }\n}\n@-o-keyframes ${1:identifier} {\n	${2:from} { ${3} }${6}\n	${4:to} { ${5} }\n}\n@-moz-keyframes ${1:identifier} {\n	${2:from} { ${3} }${6}\n	${4:to} { ${5} }\n}\n@keyframes ${1:identifier} {\n	${2:from} { ${3} }${6}\n	${4:to} { ${5} }\n}",anim:"animation:|;","anim-":"animation:${1:name} ${2:duration} ${3:timing-function} ${4:delay} ${5:iteration-count} ${6:direction} ${7:fill-mode};",animdel:"animation-delay:${1:time};",animdir:"animation-direction:${1:normal};","animdir:n":"animation-direction:normal;","animdir:r":"animation-direction:reverse;","animdir:a":"animation-direction:alternate;","animdir:ar":"animation-direction:alternate-reverse;",animdur:"animation-duration:${1:0}s;",animfm:"animation-fill-mode:${1:both};","animfm:f":"animation-fill-mode:forwards;","animfm:b":"animation-fill-mode:backwards;","animfm:bt":"animation-fill-mode:both;","animfm:bh":"animation-fill-mode:both;",animic:"animation-iteration-count:${1:1};","animic:i":"animation-iteration-count:infinite;",animn:"animation-name:${1:none};",animps:"animation-play-state:${1:running};","animps:p":"animation-play-state:paused;","animps:r":"animation-play-state:running;",animtf:"animation-timing-function:${1:linear};","animtf:e":"animation-timing-function:ease;","animtf:ei":"animation-timing-function:ease-in;","animtf:eo":"animation-timing-function:ease-out;","animtf:eio":"animation-timing-function:ease-in-out;","animtf:l":"animation-timing-function:linear;","animtf:cb":"animation-timing-function:cubic-bezier(${1:0.1}, ${2:0.7}, ${3:1.0}, ${3:0.1});",ap:"appearance:${none}","!":"!important",pos:"position:${1:relative};","pos:s":"position:static;","pos:a":"position:absolute;","pos:r":"position:relative;","pos:f":"position:fixed;",t:"top:|;","t:a":"top:auto;",r:"right:|;","r:a":"right:auto;",b:"bottom:|;","b:a":"bottom:auto;",l:"left:|;","l:a":"left:auto;",z:"z-index:|;","z:a":"z-index:auto;",fl:"float:${1:left};","fl:n":"float:none;","fl:l":"float:left;","fl:r":"float:right;",cl:"clear:${1:both};","cl:n":"clear:none;","cl:l":"clear:left;","cl:r":"clear:right;","cl:b":"clear:both;",colm:"columns:|;",colmc:"column-count:|;",colmf:"column-fill:|;",colmg:"column-gap:|;",colmr:"column-rule:|;",colmrc:"column-rule-color:|;",colmrs:"column-rule-style:|;",colmrw:"column-rule-width:|;",colms:"column-span:|;",colmw:"column-width:|;",d:"display:${1:block};","d:n":"display:none;","d:b":"display:block;","d:i":"display:inline;","d:ib":"display:inline-block;","d:li":"display:list-item;","d:ri":"display:run-in;","d:cp":"display:compact;","d:tb":"display:table;","d:itb":"display:inline-table;","d:tbcp":"display:table-caption;","d:tbcl":"display:table-column;","d:tbclg":"display:table-column-group;","d:tbhg":"display:table-header-group;","d:tbfg":"display:table-footer-group;","d:tbr":"display:table-row;","d:tbrg":"display:table-row-group;","d:tbc":"display:table-cell;","d:rb":"display:ruby;","d:rbb":"display:ruby-base;","d:rbbg":"display:ruby-base-group;","d:rbt":"display:ruby-text;","d:rbtg":"display:ruby-text-group;",v:"visibility:${1:hidden};","v:v":"visibility:visible;","v:h":"visibility:hidden;","v:c":"visibility:collapse;",ov:"overflow:${1:hidden};","ov:v":"overflow:visible;","ov:h":"overflow:hidden;","ov:s":"overflow:scroll;","ov:a":"overflow:auto;",ovx:"overflow-x:${1:hidden};","ovx:v":"overflow-x:visible;","ovx:h":"overflow-x:hidden;","ovx:s":"overflow-x:scroll;","ovx:a":"overflow-x:auto;",ovy:"overflow-y:${1:hidden};","ovy:v":"overflow-y:visible;","ovy:h":"overflow-y:hidden;","ovy:s":"overflow-y:scroll;","ovy:a":"overflow-y:auto;",ovs:"overflow-style:${1:scrollbar};","ovs:a":"overflow-style:auto;","ovs:s":"overflow-style:scrollbar;","ovs:p":"overflow-style:panner;","ovs:m":"overflow-style:move;","ovs:mq":"overflow-style:marquee;",zoo:"zoom:1;",zm:"zoom:1;",cp:"clip:|;","cp:a":"clip:auto;","cp:r":"clip:rect(${1:top} ${2:right} ${3:bottom} ${4:left});",bxz:"box-sizing:${1:border-box};","bxz:cb":"box-sizing:content-box;","bxz:bb":"box-sizing:border-box;",bxsh:"box-shadow:${1:inset }${2:hoff} ${3:voff} ${4:blur} ${5:color};","bxsh:r":"box-shadow:${1:inset }${2:hoff} ${3:voff} ${4:blur} ${5:spread }rgb(${6:0}, ${7:0}, ${8:0});","bxsh:ra":"box-shadow:${1:inset }${2:h} ${3:v} ${4:blur} ${5:spread }rgba(${6:0}, ${7:0}, ${8:0}, .${9:5});","bxsh:n":"box-shadow:none;",m:"margin:|;","m:a":"margin:auto;",mt:"margin-top:|;","mt:a":"margin-top:auto;",mr:"margin-right:|;","mr:a":"margin-right:auto;",mb:"margin-bottom:|;","mb:a":"margin-bottom:auto;",ml:"margin-left:|;","ml:a":"margin-left:auto;",p:"padding:|;",pt:"padding-top:|;",pr:"padding-right:|;",pb:"padding-bottom:|;",pl:"padding-left:|;",w:"width:|;","w:a":"width:auto;",h:"height:|;","h:a":"height:auto;",maw:"max-width:|;","maw:n":"max-width:none;",mah:"max-height:|;","mah:n":"max-height:none;",miw:"min-width:|;",mih:"min-height:|;",mar:"max-resolution:${1:res};",mir:"min-resolution:${1:res};",ori:"orientation:|;","ori:l":"orientation:landscape;","ori:p":"orientation:portrait;",ol:"outline:|;","ol:n":"outline:none;",olo:"outline-offset:|;",olw:"outline-width:|;",ols:"outline-style:|;",olc:"outline-color:#${1:000};","olc:i":"outline-color:invert;",bd:"border:|;","bd+":"border:${1:1px} ${2:solid} ${3:#000};","bd:n":"border:none;",bdbk:"border-break:${1:close};","bdbk:c":"border-break:close;",bdcl:"border-collapse:|;","bdcl:c":"border-collapse:collapse;","bdcl:s":"border-collapse:separate;",bdc:"border-color:#${1:000};","bdc:t":"border-color:transparent;",bdi:"border-image:url(|);","bdi:n":"border-image:none;",bdti:"border-top-image:url(|);","bdti:n":"border-top-image:none;",bdri:"border-right-image:url(|);","bdri:n":"border-right-image:none;",bdbi:"border-bottom-image:url(|);","bdbi:n":"border-bottom-image:none;",bdli:"border-left-image:url(|);","bdli:n":"border-left-image:none;",bdci:"border-corner-image:url(|);","bdci:n":"border-corner-image:none;","bdci:c":"border-corner-image:continue;",bdtli:"border-top-left-image:url(|);","bdtli:n":"border-top-left-image:none;","bdtli:c":"border-top-left-image:continue;",bdtri:"border-top-right-image:url(|);","bdtri:n":"border-top-right-image:none;","bdtri:c":"border-top-right-image:continue;",bdbri:"border-bottom-right-image:url(|);","bdbri:n":"border-bottom-right-image:none;","bdbri:c":"border-bottom-right-image:continue;",bdbli:"border-bottom-left-image:url(|);","bdbli:n":"border-bottom-left-image:none;","bdbli:c":"border-bottom-left-image:continue;",bdf:"border-fit:${1:repeat};","bdf:c":"border-fit:clip;","bdf:r":"border-fit:repeat;","bdf:sc":"border-fit:scale;","bdf:st":"border-fit:stretch;","bdf:ow":"border-fit:overwrite;","bdf:of":"border-fit:overflow;","bdf:sp":"border-fit:space;",bdlen:"border-length:|;","bdlen:a":"border-length:auto;",bdsp:"border-spacing:|;",bds:"border-style:|;","bds:n":"border-style:none;","bds:h":"border-style:hidden;","bds:dt":"border-style:dotted;","bds:ds":"border-style:dashed;","bds:s":"border-style:solid;","bds:db":"border-style:double;","bds:dtds":"border-style:dot-dash;","bds:dtdtds":"border-style:dot-dot-dash;","bds:w":"border-style:wave;","bds:g":"border-style:groove;","bds:r":"border-style:ridge;","bds:i":"border-style:inset;","bds:o":"border-style:outset;",bdw:"border-width:|;",bdtw:"border-top-width:|;",bdrw:"border-right-width:|;",bdbw:"border-bottom-width:|;",bdlw:"border-left-width:|;",bdt:"border-top:|;",bt:"border-top:|;","bdt+":"border-top:${1:1px} ${2:solid} ${3:#000};","bdt:n":"border-top:none;",bdts:"border-top-style:|;","bdts:n":"border-top-style:none;",bdtc:"border-top-color:#${1:000};","bdtc:t":"border-top-color:transparent;",bdr:"border-right:|;",br:"border-right:|;","bdr+":"border-right:${1:1px} ${2:solid} ${3:#000};","bdr:n":"border-right:none;",bdrst:"border-right-style:|;","bdrst:n":"border-right-style:none;",bdrc:"border-right-color:#${1:000};","bdrc:t":"border-right-color:transparent;",bdb:"border-bottom:|;",bb:"border-bottom:|;","bdb+":"border-bottom:${1:1px} ${2:solid} ${3:#000};","bdb:n":"border-bottom:none;",bdbs:"border-bottom-style:|;","bdbs:n":"border-bottom-style:none;",bdbc:"border-bottom-color:#${1:000};","bdbc:t":"border-bottom-color:transparent;",bdl:"border-left:|;",bl:"border-left:|;","bdl+":"border-left:${1:1px} ${2:solid} ${3:#000};","bdl:n":"border-left:none;",bdls:"border-left-style:|;","bdls:n":"border-left-style:none;",bdlc:"border-left-color:#${1:000};","bdlc:t":"border-left-color:transparent;",bdrs:"border-radius:|;",bdtrrs:"border-top-right-radius:|;",bdtlrs:"border-top-left-radius:|;",bdbrrs:"border-bottom-right-radius:|;",bdblrs:"border-bottom-left-radius:|;",bg:"background:|;","bg+":"background:${1:#fff} url(${2}) ${3:0} ${4:0} ${5:no-repeat};","bg:n":"background:none;","bg:ie":"filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='${1:x}.png',sizingMethod='${2:crop}');",bgc:"background-color:#${1:fff};","bgc:t":"background-color:transparent;",bgi:"background-image:url(|);","bgi:n":"background-image:none;",bgr:"background-repeat:|;","bgr:n":"background-repeat:no-repeat;","bgr:x":"background-repeat:repeat-x;","bgr:y":"background-repeat:repeat-y;","bgr:sp":"background-repeat:space;","bgr:rd":"background-repeat:round;",bga:"background-attachment:|;","bga:f":"background-attachment:fixed;","bga:s":"background-attachment:scroll;",bgp:"background-position:${1:0} ${2:0};",bgpx:"background-position-x:|;",bgpy:"background-position-y:|;",bgbk:"background-break:|;","bgbk:bb":"background-break:bounding-box;","bgbk:eb":"background-break:each-box;","bgbk:c":"background-break:continuous;",bgcp:"background-clip:${1:padding-box};","bgcp:bb":"background-clip:border-box;","bgcp:pb":"background-clip:padding-box;","bgcp:cb":"background-clip:content-box;","bgcp:nc":"background-clip:no-clip;",bgo:"background-origin:|;","bgo:pb":"background-origin:padding-box;","bgo:bb":"background-origin:border-box;","bgo:cb":"background-origin:content-box;",bgsz:"background-size:|;","bgsz:a":"background-size:auto;","bgsz:ct":"background-size:contain;","bgsz:cv":"background-size:cover;",c:"color:#${1:000};","c:r":"color:rgb(${1:0}, ${2:0}, ${3:0});","c:ra":"color:rgba(${1:0}, ${2:0}, ${3:0}, .${4:5});",cm:"/* |${child} */",cnt:"content:'|';","cnt:n":"content:normal;","cnt:oq":"content:open-quote;","cnt:noq":"content:no-open-quote;","cnt:cq":"content:close-quote;","cnt:ncq":"content:no-close-quote;","cnt:a":"content:attr(|);","cnt:c":"content:counter(|);","cnt:cs":"content:counters(|);",tbl:"table-layout:|;","tbl:a":"table-layout:auto;","tbl:f":"table-layout:fixed;",cps:"caption-side:|;","cps:t":"caption-side:top;","cps:b":"caption-side:bottom;",ec:"empty-cells:|;","ec:s":"empty-cells:show;","ec:h":"empty-cells:hide;",lis:"list-style:|;","lis:n":"list-style:none;",lisp:"list-style-position:|;","lisp:i":"list-style-position:inside;","lisp:o":"list-style-position:outside;",list:"list-style-type:|;","list:n":"list-style-type:none;","list:d":"list-style-type:disc;","list:c":"list-style-type:circle;","list:s":"list-style-type:square;","list:dc":"list-style-type:decimal;","list:dclz":"list-style-type:decimal-leading-zero;","list:lr":"list-style-type:lower-roman;","list:ur":"list-style-type:upper-roman;",lisi:"list-style-image:|;","lisi:n":"list-style-image:none;",q:"quotes:|;","q:n":"quotes:none;","q:ru":"quotes:'\\00AB' '\\00BB' '\\201E' '\\201C';","q:en":"quotes:'\\201C' '\\201D' '\\2018' '\\2019';",ct:"content:|;","ct:n":"content:normal;","ct:oq":"content:open-quote;","ct:noq":"content:no-open-quote;","ct:cq":"content:close-quote;","ct:ncq":"content:no-close-quote;","ct:a":"content:attr(|);","ct:c":"content:counter(|);","ct:cs":"content:counters(|);",coi:"counter-increment:|;",cor:"counter-reset:|;",va:"vertical-align:${1:top};","va:sup":"vertical-align:super;","va:t":"vertical-align:top;","va:tt":"vertical-align:text-top;","va:m":"vertical-align:middle;","va:bl":"vertical-align:baseline;","va:b":"vertical-align:bottom;","va:tb":"vertical-align:text-bottom;","va:sub":"vertical-align:sub;",ta:"text-align:${1:left};","ta:l":"text-align:left;","ta:c":"text-align:center;","ta:r":"text-align:right;","ta:j":"text-align:justify;","ta-lst":"text-align-last:|;","tal:a":"text-align-last:auto;","tal:l":"text-align-last:left;","tal:c":"text-align-last:center;","tal:r":"text-align-last:right;",td:"text-decoration:${1:none};","td:n":"text-decoration:none;","td:u":"text-decoration:underline;","td:o":"text-decoration:overline;","td:l":"text-decoration:line-through;",te:"text-emphasis:|;","te:n":"text-emphasis:none;","te:ac":"text-emphasis:accent;","te:dt":"text-emphasis:dot;","te:c":"text-emphasis:circle;","te:ds":"text-emphasis:disc;","te:b":"text-emphasis:before;","te:a":"text-emphasis:after;",th:"text-height:|;","th:a":"text-height:auto;","th:f":"text-height:font-size;","th:t":"text-height:text-size;","th:m":"text-height:max-size;",ti:"text-indent:|;","ti:-":"text-indent:-9999px;",tj:"text-justify:|;","tj:a":"text-justify:auto;","tj:iw":"text-justify:inter-word;","tj:ii":"text-justify:inter-ideograph;","tj:ic":"text-justify:inter-cluster;","tj:d":"text-justify:distribute;","tj:k":"text-justify:kashida;","tj:t":"text-justify:tibetan;",tov:"text-overflow:${ellipsis};","tov:e":"text-overflow:ellipsis;","tov:c":"text-overflow:clip;",to:"text-outline:|;","to+":"text-outline:${1:0} ${2:0} ${3:#000};","to:n":"text-outline:none;",tr:"text-replace:|;","tr:n":"text-replace:none;",tt:"text-transform:${1:uppercase};","tt:n":"text-transform:none;","tt:c":"text-transform:capitalize;","tt:u":"text-transform:uppercase;","tt:l":"text-transform:lowercase;",tw:"text-wrap:|;","tw:n":"text-wrap:normal;","tw:no":"text-wrap:none;","tw:u":"text-wrap:unrestricted;","tw:s":"text-wrap:suppress;",tsh:"text-shadow:${1:hoff} ${2:voff} ${3:blur} ${4:#000};","tsh:r":"text-shadow:${1:h} ${2:v} ${3:blur} rgb(${4:0}, ${5:0}, ${6:0});","tsh:ra":"text-shadow:${1:h} ${2:v} ${3:blur} rgba(${4:0}, ${5:0}, ${6:0}, .${7:5});","tsh+":"text-shadow:${1:0} ${2:0} ${3:0} ${4:#000};","tsh:n":"text-shadow:none;",trf:"transform:|;","trf:skx":"transform: skewX(${1:angle});","trf:sky":"transform: skewY(${1:angle});","trf:sc":"transform: scale(${1:x}, ${2:y});","trf:scx":"transform: scaleX(${1:x});","trf:scy":"transform: scaleY(${1:y});","trf:r":"transform: rotate(${1:angle});","trf:t":"transform: translate(${1:x}, ${2:y});","trf:tx":"transform: translateX(${1:x});","trf:ty":"transform: translateY(${1:y});",trfo:"transform-origin:|;",trfs:"transform-style:${1:preserve-3d};",trs:"transition:${1:prop} ${2:time};",trsde:"transition-delay:${1:time};",trsdu:"transition-duration:${1:time};",trsp:"transition-property:${1:prop};",trstf:"transition-timing-function:${1:tfunc};",lh:"line-height:|;",whs:"white-space:|;","whs:n":"white-space:normal;","whs:p":"white-space:pre;","whs:nw":"white-space:nowrap;","whs:pw":"white-space:pre-wrap;","whs:pl":"white-space:pre-line;",whsc:"white-space-collapse:|;","whsc:n":"white-space-collapse:normal;","whsc:k":"white-space-collapse:keep-all;","whsc:l":"white-space-collapse:loose;","whsc:bs":"white-space-collapse:break-strict;","whsc:ba":"white-space-collapse:break-all;",wob:"word-break:|;","wob:n":"word-break:normal;","wob:k":"word-break:keep-all;","wob:l":"word-break:loose;","wob:bs":"word-break:break-strict;","wob:ba":"word-break:break-all;",wos:"word-spacing:|;",wow:"word-wrap:|;","wow:nm":"word-wrap:normal;","wow:n":"word-wrap:none;","wow:u":"word-wrap:unrestricted;","wow:s":"word-wrap:suppress;",lts:"letter-spacing:|;",f:"font:|;","f+":"font:${1:1em} ${2:Arial,sans-serif};",fw:"font-weight:|;","fw:n":"font-weight:normal;","fw:b":"font-weight:bold;","fw:br":"font-weight:bolder;","fw:lr":"font-weight:lighter;",fs:"font-style:${italic};","fs:n":"font-style:normal;","fs:i":"font-style:italic;","fs:o":"font-style:oblique;",fv:"font-variant:|;","fv:n":"font-variant:normal;","fv:sc":"font-variant:small-caps;",fz:"font-size:|;",fza:"font-size-adjust:|;","fza:n":"font-size-adjust:none;",ff:"font-family:|;","ff:s":"font-family:serif;","ff:ss":"font-family:sans-serif;","ff:c":"font-family:cursive;","ff:f":"font-family:fantasy;","ff:m":"font-family:monospace;",fef:"font-effect:|;","fef:n":"font-effect:none;","fef:eg":"font-effect:engrave;","fef:eb":"font-effect:emboss;","fef:o":"font-effect:outline;",fem:"font-emphasize:|;",femp:"font-emphasize-position:|;","femp:b":"font-emphasize-position:before;"
,"femp:a":"font-emphasize-position:after;",fems:"font-emphasize-style:|;","fems:n":"font-emphasize-style:none;","fems:ac":"font-emphasize-style:accent;","fems:dt":"font-emphasize-style:dot;","fems:c":"font-emphasize-style:circle;","fems:ds":"font-emphasize-style:disc;",fsm:"font-smooth:|;","fsm:a":"font-smooth:auto;","fsm:n":"font-smooth:never;","fsm:aw":"font-smooth:always;",fst:"font-stretch:|;","fst:n":"font-stretch:normal;","fst:uc":"font-stretch:ultra-condensed;","fst:ec":"font-stretch:extra-condensed;","fst:c":"font-stretch:condensed;","fst:sc":"font-stretch:semi-condensed;","fst:se":"font-stretch:semi-expanded;","fst:e":"font-stretch:expanded;","fst:ee":"font-stretch:extra-expanded;","fst:ue":"font-stretch:ultra-expanded;",op:"opacity:|;","op:ie":"filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);","op:ms":"-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=100)';",rsz:"resize:|;","rsz:n":"resize:none;","rsz:b":"resize:both;","rsz:h":"resize:horizontal;","rsz:v":"resize:vertical;",cur:"cursor:${pointer};","cur:a":"cursor:auto;","cur:d":"cursor:default;","cur:c":"cursor:crosshair;","cur:ha":"cursor:hand;","cur:he":"cursor:help;","cur:m":"cursor:move;","cur:p":"cursor:pointer;","cur:t":"cursor:text;",pgbb:"page-break-before:|;","pgbb:au":"page-break-before:auto;","pgbb:al":"page-break-before:always;","pgbb:l":"page-break-before:left;","pgbb:r":"page-break-before:right;",pgbi:"page-break-inside:|;","pgbi:au":"page-break-inside:auto;","pgbi:av":"page-break-inside:avoid;",pgba:"page-break-after:|;","pgba:au":"page-break-after:auto;","pgba:al":"page-break-after:always;","pgba:l":"page-break-after:left;","pgba:r":"page-break-after:right;",orp:"orphans:|;",us:"user-select:${none};",wid:"widows:|;",wfsm:"-webkit-font-smoothing:${antialiased};","wfsm:a":"-webkit-font-smoothing:antialiased;","wfsm:s":"-webkit-font-smoothing:subpixel-antialiased;","wfsm:sa":"-webkit-font-smoothing:subpixel-antialiased;","wfsm:n":"-webkit-font-smoothing:none;"}},html:{filters:"html",profile:"html",snippets:{"!!!":"<!doctype html>","!!!4t":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',"!!!4s":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',"!!!xt":'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',"!!!xs":'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">',"!!!xxs":'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">',c:"<!-- |${child} -->","cc:ie6":"<!--[if lte IE 6]>\n	${child}|\n<![endif]-->","cc:ie":"<!--[if IE]>\n	${child}|\n<![endif]-->","cc:noie":"<!--[if !IE]><!-->\n	${child}|\n<!--<![endif]-->"},abbreviations:{"!":"html:5",a:'<a href="">',"a:link":'<a href="http://|">',"a:mail":'<a href="mailto:|">',abbr:'<abbr title="">',acronym:'<acronym title="">',base:'<base href="" />',bdo:'<bdo dir="">',"bdo:r":'<bdo dir="rtl">',"bdo:l":'<bdo dir="ltr">',link:'<link rel="stylesheet" href="" />',"link:css":'<link rel="stylesheet" href="${1:style}.css" media="all" />',"link:print":'<link rel="stylesheet" href="${1:print}.css" media="print" />',"link:favicon":'<link rel="shortcut icon" type="image/x-icon" href="${1:favicon.ico}" />',"link:touch":'<link rel="apple-touch-icon" href="${1:favicon.png}" />',"link:rss":'<link rel="alternate" type="application/rss+xml" title="RSS" href="${1:rss.xml}" />',"link:atom":'<link rel="alternate" type="application/atom+xml" title="Atom" href="${1:atom.xml}" />',"meta:utf":'<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />',"meta:win":'<meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />',"meta:vp":'<meta name="viewport" content="width=${1:device-width}, user-scalable=${2:no}, initial-scale=${3:1.0}, maximum-scale=${4:1.0}, minimum-scale=${5:1.0}" />',"meta:compat":'<meta http-equiv="X-UA-Compatible" content="${1:IE=7}" />',style:"<style>",script:"<script>","script:src":'<script src="">',img:'<img src="" alt="" />',iframe:'<iframe src="" frameborder="0">',embed:'<embed src="" type="" />',object:'<object data="" type="">',param:'<param name="" value="" />',map:'<map name="">',area:'<area shape="" coords="" href="" alt="" />',"area:d":'<area shape="default" href="" alt="" />',"area:c":'<area shape="circle" coords="" href="" alt="" />',"area:r":'<area shape="rect" coords="" href="" alt="" />',"area:p":'<area shape="poly" coords="" href="" alt="" />',form:'<form action="">',"form:get":'<form action="" method="get">',"form:post":'<form action="" method="post">',label:'<label for="">',input:'<input type="${1:text}" />',inp:'<input type="${1:text}" name="" id="" />',"input:hidden":"input[type=hidden name]","input:h":"input:hidden","input:text":"inp","input:t":"inp","input:search":"inp[type=search]","input:email":"inp[type=email]","input:url":"inp[type=url]","input:password":"inp[type=password]","input:p":"input:password","input:datetime":"inp[type=datetime]","input:date":"inp[type=date]","input:datetime-local":"inp[type=datetime-local]","input:month":"inp[type=month]","input:week":"inp[type=week]","input:time":"inp[type=time]","input:number":"inp[type=number]","input:color":"inp[type=color]","input:checkbox":"inp[type=checkbox]","input:c":"input:checkbox","input:radio":"inp[type=radio]","input:r":"input:radio","input:range":"inp[type=range]","input:file":"inp[type=file]","input:f":"input:file","input:submit":'<input type="submit" value="" />',"input:s":"input:submit","input:image":'<input type="image" src="" alt="" />',"input:i":"input:image","input:button":'<input type="button" value="" />',"input:b":"input:button","input:reset":"input:button[type=reset]",select:'<select name="" id="">',option:'<option value="">',textarea:'<textarea name="" id="" cols="${1:30}" rows="${2:10}">',"menu:context":"menu[type=context]>","menu:c":"menu:context","menu:toolbar":"menu[type=toolbar]>","menu:t":"menu:toolbar",video:'<video src="">',audio:'<audio src="">',"html:xml":'<html xmlns="http://www.w3.org/1999/xhtml">',bq:"blockquote",acr:"acronym",fig:"figure",figc:"figcaption",ifr:"iframe",emb:"embed",obj:"object",src:"source",cap:"caption",colg:"colgroup",fst:"fieldset",btn:"button",optg:"optgroup",opt:"option",tarea:"textarea",leg:"legend",sect:"section",art:"article",hdr:"header",ftr:"footer",adr:"address",dlg:"dialog",str:"strong",prog:"progress",fset:"fieldset",datag:"datagrid",datal:"datalist",kg:"keygen",out:"output",det:"details",cmd:"command",doc:"html>(head>meta[charset=UTF-8]+title{${1:Document}})+body",doc4:'html>(head>meta[http-equiv="Content-Type" content="text/html;charset=${charset}"]+title{${1:Document}})',"html:4t":"!!!4t+doc4[lang=${lang}]","html:4s":"!!!4s+doc4[lang=${lang}]","html:xt":"!!!xt+doc4[xmlns=http://www.w3.org/1999/xhtml xml:lang=${lang}]","html:xs":"!!!xs+doc4[xmlns=http://www.w3.org/1999/xhtml xml:lang=${lang}]","html:xxs":"!!!xxs+doc4[xmlns=http://www.w3.org/1999/xhtml xml:lang=${lang}]","html:5":"!!!+doc[lang=${lang}]","ol+":"ol>li","ul+":"ul>li","dl+":"dl>dt+dd","map+":"map>area","table+":"table>tr>td","colgroup+":"colgroup>col","colg+":"colgroup>col","tr+":"tr>td","select+":"select>option","optgroup+":"optgroup>option","optg+":"optgroup>option"}},xml:{"extends":"html",profile:"xml",filters:"html"},xsl:{"extends":"html",profile:"xml",filters:"html, xsl",abbreviations:{tm:'<xsl:template match="" mode="">',tmatch:"tm",tn:'<xsl:template name="">',tname:"tn",call:'<xsl:call-template name=""/>',ap:'<xsl:apply-templates select="" mode=""/>',api:"<xsl:apply-imports/>",imp:'<xsl:import href=""/>',inc:'<xsl:include href=""/>',ch:"<xsl:choose>","xsl:when":'<xsl:when test="">',wh:"xsl:when",ot:"<xsl:otherwise>","if":'<xsl:if test="">',par:'<xsl:param name="">',pare:'<xsl:param name="" select=""/>',"var":'<xsl:variable name="">',vare:'<xsl:variable name="" select=""/>',wp:'<xsl:with-param name="" select=""/>',key:'<xsl:key name="" match="" use=""/>',elem:'<xsl:element name="">',attr:'<xsl:attribute name="">',attrs:'<xsl:attribute-set name="">',cp:'<xsl:copy select=""/>',co:'<xsl:copy-of select=""/>',val:'<xsl:value-of select=""/>',each:'<xsl:for-each select="">',"for":"each",tex:"<xsl:text></xsl:text>",com:"<xsl:comment>",msg:'<xsl:message terminate="no">',fall:"<xsl:fallback>",num:'<xsl:number value=""/>',nam:'<namespace-alias stylesheet-prefix="" result-prefix=""/>',pres:'<xsl:preserve-space elements=""/>',strip:'<xsl:strip-space elements=""/>',proc:'<xsl:processing-instruction name="">',sort:'<xsl:sort select="" order=""/>',"choose+":"xsl:choose>xsl:when+xsl:otherwise",xsl:"!!!+xsl:stylesheet[version=1.0 xmlns:xsl=http://www.w3.org/1999/XSL/Transform]>{\n|}"},snippets:{"!!!":'<?xml version="1.0" encoding="UTF-8"?>'}},haml:{filters:"haml","extends":"html",profile:"xml"},"text/x-scss":{"extends":"css"},scss:{"extends":"css"},sass:{"extends":"css"},less:{"extends":"css"},stylus:{"extends":"css"}},"system")}),emmet.define("cm-editor-proxy",function(e,t){function u(){var t=o.getSyntax();return e("resources").hasSyntax(t)}function a(){if(CodeMirror.version>="3.1")return CodeMirror.Pass;throw CodeMirror.Pass}function f(t,n){o.setupContext(n);if(t=="expand_abbreviation_with_tab"&&(o.getSelection()||!u()))return a();var r=!0;try{var i=e("actions").run(t,o);(t=="next_edit_point"||t=="prev_edit_point")&&n.replaceSelection(""),!i&&t=="insert_formatted_line_break_only"&&(r=!1)}catch(s){}if(!r)return a()}var n=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),r=n||/Mac/.test(navigator.platform),i={"Cmd-E":"expand_abbreviation",Tab:"expand_abbreviation_with_tab","Cmd-D":"match_pair_outward","Shift-Cmd-D":"match_pair_inward","Cmd-T":"matching_pair","Shift-Cmd-A":"wrap_with_abbreviation","Ctrl-Alt-Right":"next_edit_point","Ctrl-Alt-Left":"prev_edit_point","Cmd-L":"select_line","Cmd-Shift-M":"merge_lines","Cmd-/":"toggle_comment","Cmd-J":"split_join_tag","Cmd-K":"remove_tag","Shift-Cmd-Y":"evaluate_math_expression","Ctrl-Up":"increment_number_by_1","Ctrl-Down":"decrement_number_by_1","Alt-Up":"increment_number_by_01","Alt-Down":"decrement_number_by_01","Ctrl-Alt-Up":"increment_number_by_10","Ctrl-Alt-Down":"decrement_number_by_10","Shift-Cmd-.":"select_next_item","Shift-Cmd-,":"select_previous_item","Cmd-B":"reflect_css_value",Enter:"insert_formatted_line_break_only"},s={"text/html":"html","application/xml":"xml","text/xsl":"xsl","text/css":"css","text/x-less":"less"};CodeMirror.defineOption?CodeMirror.defineOption("profile","html"):CodeMirror.defaults.profile="html";var o={context:null,getSelectionRange:function(){var e=this.getCaretPos();return{start:e,end:e+this.getSelection().length}},createSelection:function(e,t){e==t?this.context.setCursor(this.context.posFromIndex(e)):this.context.setSelection(this.context.posFromIndex(e),this.context.posFromIndex(t))},getCurrentLineRange:function(){var e=this.context.getCursor(!0);return{start:this.context.indexFromPos({line:e.line,ch:0}),end:this.context.indexFromPos({line:e.line,ch:this.context.getLine(e.line).length})}},getCaretPos:function(){return this.context.indexFromPos(this.context.getCursor(!0))},setCaretPos:function(e){this.createSelection(e,e)},getCurrentLine:function(){return this.context.getLine(this.context.getCursor(!0).line)||""},replaceContent:function(n,r,i,s){t.isUndefined(i)&&(i=t.isUndefined(r)?content.length:r),t.isUndefined(r)&&(r=0);var o=e("utils");s||(n=o.padString(n,o.getLinePaddingFromPosition(this.getContent(),r)));var u=e("tabStops").extract(n,{escape:function(e){return e}});n=u.text;var a=u.tabstops[0];a?(a.start+=r,a.end+=r):a={start:n.length+r,end:n.length+r};var f=this,l=this.context.operation||this.context.compoundChange;l.call(this.context,function(){f.context.replaceRange(n,f.context.posFromIndex(r),f.context.posFromIndex(i)),f.createSelection(a.start,a.end)})},getContent:function(){return this.context.getValue()},getSyntax:function(){var t=this.context.getOption("mode");return t in s&&(t=s[t]),t=="text/x-scss"&&(t="scss"),e("actionUtils").detectSyntax(this,t)},getProfileName:function(){return this.context.getOption("profile")?this.context.getOption("profile"):e("actionUtils").detectProfile(this)},prompt:function(e){return prompt(e)},getSelection:function(){return this.context.getSelection()||""},getFilePath:function(){return location.href},setupContext:function(t){this.context=t;var n="	";t.getOption("indentWithTabs")||(n=e("utils").repeatString(" ",t.getOption("indentUnit"))),e("resources").setVariable("indentation",n)},addAction:function(e,t,n){var i="emmet."+e;CodeMirror.commands[i]||(CodeMirror.commands[i]=function(t){return f(e,t)}),t&&(n||(CodeMirror.keyMap&&CodeMirror.keyMap["default"]?n=CodeMirror.keyMap["default"]:(CodeMirror.defaults.extraKeys||(CodeMirror.defaults.extraKeys={}),n=CodeMirror.defaults.extraKeys)),r||(t=t.replace("Cmd","Ctrl")),n&&(n[t]=i))}};return typeof emmetKeymap!="undefined"&&(i=emmetKeymap),t.each(i,function(e,t){i,o.addAction(e,t)}),o}),window.Keytrap=function(){"use strict";function r(e){var t=e.keyCode||e.which,n=[t];return e.shiftKey&&e.keyCode!==16&&n.push(16),e.ctrlKey&&e.keyCode!==17&&n.push(17),e.altKey&&e.keyCode!==18&&n.push(18),e.metaKey&&e.keyCode!==91&&n.push(91),n.sort(),n.join("+")}function i(e){return n[e]?n[e]:e.toUpperCase().charCodeAt(0)}function s(e){var t=e.split("+"),n=[];for(var r=0;r<t.length;r++)n.push(i(t[r]));return n.sort(),n.join("+")}function o(e){var t=[],n=e.split(",");for(var r=0;r<n.length;r++)t.push(s(n[r]));return t}function u(n,r){if(e[r]){var i=e[r];for(var s=0;s<i.length;s++)i[s](n);if(t[r]&&n)return jQuery.Event(n).stopPropagation(),!1}}function a(e){return u(e,r(e))}var e={},t={},n={backspace:8,tab:9,enter:13,"return":13,shift:16,ctrl:17,comctrl:17,alt:18,option:18,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:46,meta:91,command:91,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,'"':222};return navigator.appVersion.indexOf("Mac")!==-1&&(n.comctrl=91),jQuery(document).on("keydown",a),{bind:function(n,r,i){var s=o(n);for(var u=s.length-1;u>=0;u--)jQuery.isArray(e[s[u]])||(e[s[u]]=[]),e[s[u]].push(r),t[s[u]]=i?!0:!1},getKeyCode:function(e){return i(e)},getKeyEventID:function(e){return typeof e=="string"?s(e):r(e)},keyEventMatchesKeyCombo:function(e,t){return r(e)===s(t)},trigger:function(e,t){u(e,t)}}}(),function(e){var t="0.9.3",n={isMsie:function(){var e=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return e?parseInt(e[2],10):!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e=="undefined"},bind:e.proxy,bindAll:function(t){var n;for(var r in t)e.isFunction(n=t[r])&&(t[r]=e.proxy(n,t))},indexOf:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},each:e.each,map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){if(!(r=n.call(null,i,e,t)))return!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){if(r=n.call(null,i,e,t))return!1}),!!r):r},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s=this,o=arguments,u,a;return u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r,clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},tokenizeQuery:function(t){return e.trim(t).toLowerCase().split(/[\s]+/)},tokenizeText:function(t){return e.trim(t).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},r=function(){var e=/\s+/;return{on:function(t,n){var r;if(!n)return this;this._callbacks=this._callbacks||{},t=t.split(e);while(r=t.shift())this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push(n);return this},trigger:function(t,n){var r,i;if(!this._callbacks)return this;t=t.split(e);while(r=t.shift())if(i=this._callbacks[r])for(var s=0;s<i.length;s+=1)i[s].call(this,{type:r,data:n});return this}}}(),i=function(){function r(t){(!t||!t.el)&&e.error("EventBus initialized without el"),this.$el=e(t.el)}var t="typeahead:";return n.mixin(r.prototype,{trigger:function(e){var n=[].slice.call(arguments,1);this.$el.trigger(t+e,n)}}),r}(),s=function(){function i(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function s(){return(new Date).getTime()}function o(e){return JSON.stringify(n.isUndefined(e)?null:e)}function u(e){return JSON.parse(e)}var e,t;try{e=window.localStorage,e.setItem("~~~","!"),e.removeItem("~~~")}catch(r){e=null}return e&&window.JSON?t={_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),u(e.getItem(this._prefix(t)))},set:function(t,r,i){return n.isNumber(i)?e.setItem(this._ttlKey(t),o(s()+i)):e.removeItem(this._ttlKey(t)),e.setItem(this._prefix(t),o(r))},remove:function(t){return e.removeItem(this._ttlKey(t)),e.removeItem(this._prefix(t)),this},clear:function(){var t,n,r=[],i=e.length;for(t=0;t<i;t++)(n=e.key(t)).match(this.keyMatcher)&&r.push(n.replace(this.keyMatcher,""));for(t=r.length;t--;)this.remove(r[t]);return this},isExpired:function(t){var r=u(e.getItem(this._ttlKey(t)));return n.isNumber(r)&&s()>r?!0:!1}}:t={get:n.noop,set:n.noop,remove:n.noop,clear:n.noop,isExpired:n.noop},n.mixin(i.prototype,t),i}(),o=function(){function e(e){n.bindAll(this),e=e||{},this.sizeLimit=e.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return n.mixin(e.prototype,{get:function(e){return this.cache[e]},set:function(e,t){var n;this.cachedKeysByAge.length===this.sizeLimit&&(n=this.cachedKeysByAge.shift(),delete this.cache[n]),this.cache[e]=t,this.cachedKeysByAge.push(e)}}),e}(),u=function(){function u(e){n.bindAll(this),e=n.isString(e)?{url:e}:e,s=s||new o,i=n.isNumber(e.maxParallelRequests)?e.maxParallelRequests:i||6,this.url=e.url,this.wildcard=e.wildcard||"%QUERY",this.filter=e.filter,this.replace=e.replace,this.ajaxSettings={type:"get",cache:e.cache,timeout:e.timeout,dataType:e.dataType||"json",beforeSend:e.beforeSend},this._get=(/^throttle$/i.test(e.rateLimitFn)?n.throttle:n.debounce)(this._get,e.rateLimitWait||300)}function a(){t++}function f(){t--}function l(){return t<i}var t=0,r={},i,s;return n.mixin(u.prototype,{_get:function(e,t){function r(r){var i=n.filter?n.filter(r):r;t&&t(i),s.set(e,r)}var n=this;l()?this._sendRequest(e).done(r):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(t){function s(){f(),r[t]=null,n.onDeckRequestArgs&&(n._get.apply(n,n.onDeckRequestArgs),n.onDeckRequestArgs=null)}var n=this,i=r[t];return i||(a(),i=r[t]=e.ajax(t,this.ajaxSettings).always(s)),i},get:function(e,t){var r=this,i=encodeURIComponent(e||""),o,u;return t=t||n.noop,o=this.replace?this.replace(this.url,i):this.url.replace(this.wildcard,i),(u=s.get(o))?n.defer(function(){t(r.filter?r.filter(u):u)}):this._get(o,t),!!u}}),u}(),a=function(){function i(t){n.bindAll(this),n.isString(t.template)&&!t.engine&&e.error("no template engine specified"),!t.local&&!t.prefetch&&!t.remote&&e.error("one of local, prefetch, or remote is required"),this.name=t.name||n.getUniqueId(),this.limit=t.limit||5,this.minLength=t.minLength||1,this.header=t.header,this.footer=t.footer,this.valueKey=t.valueKey||"value",this.template=o(t.template,t.engine,this.valueKey),this.local=t.local,this.prefetch=t.prefetch,this.remote=t.remote,this.itemHash={},this.adjacencyList={},this.storage=t.name?new s(t.name):null}function o(e,t,r){var i,s;return n.isFunction(e)?i=e:n.isString(e)?(s=t.compile(e),i=n.bind(s.render,s)):i=function(e){return"<p>"+e[r]+"</p>"},i}var r={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return n.mixin(i.prototype,{_processLocalData:function(e){this._mergeProcessedData(this._processData(e))},_loadPrefetchData:function(i){function p(e){var t=i.filter?i.filter(e):e,u=s._processData(t),a=u.itemHash,f=u.adjacencyList;s.storage&&(s.storage.set(r.itemHash,a,i.ttl),s.storage.set(r.adjacencyList,f,i.ttl),s.storage.set(r.thumbprint,o,i.ttl),s.storage.set(r.protocol,n.getProtocol(),i.ttl)),s._mergeProcessedData(u)}var s=this,o=t+(i.thumbprint||""),u,a,f,l,c,h;return this.storage&&(u=this.storage.get(r.thumbprint),a=this.storage.get(r.protocol),f=this.storage.get(r.itemHash),l=this.storage.get(r.adjacencyList)),c=u!==o||a!==n.getProtocol(),i=n.isString(i)?{url:i}:i,i.ttl=n.isNumber(i.ttl)?i.ttl:864e5,f&&l&&!c?(this._mergeProcessedData({itemHash:f,adjacencyList:l}),h=e.Deferred().resolve()):h=e.getJSON(i.url).done(p),h},_transformDatum:function(e){var t=n.isString(e)?e:e[this.valueKey],r=e.tokens||n.tokenizeText(t),i={value:t,tokens:r};return n.isString(e)?(i.datum={},i.datum[this.valueKey]=e):i.datum=e,i.tokens=n.filter(i.tokens,function(e){return!n.isBlankString(e)}),i.tokens=n.map(i.tokens,function(e){return e.toLowerCase()}),i},_processData:function(e){var t=this,r={},i={};return n.each(e,function(e,s){var o=t._transformDatum(s),u=n.getUniqueId(o.value);r[u]=o,n.each(o.tokens,function(e,t){var r=t.charAt(0),s=i[r]||(i[r]=[u]);!~n.indexOf(s,u)&&s.push(u)})}),{itemHash:r,adjacencyList:i}},_mergeProcessedData:function(e){var t=this;n.mixin(this.itemHash,e.itemHash),n.each(e.adjacencyList,function(e,n){var r=t.adjacencyList[e];t.adjacencyList[e]=r?r.concat(n):n})},_getLocalSuggestions:function(e){var t=this,r=[],i=[],s,o=[];return n.each(e,function(e,t){var i=t.charAt(0);!~n.indexOf(r,i)&&r.push(i)}),n.each(r,function(e,n){var r=t.adjacencyList[n];if(!r)return!1;i.push(r);if(!s||r.length<s.length)s=r}),i.length<r.length?[]:(n.each(s,function(r,s){var u=t.itemHash[s],a,f;a=n.every(i,function(e){return~n.indexOf(e,s)}),f=a&&n.every(e,function(e){return n.some(u.tokens,function(t){return t.indexOf(e)===0})}),f&&o.push(u)}),o)},initialize:function(){var t;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new u(this.remote):null,t=this.prefetch?this._loadPrefetchData(this.prefetch):e.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return t},t},getSuggestions:function(e,t){function u(e){s=s.slice(0),n.each(e,function(e,t){var i=r._transformDatum(t),o;return o=n.some(s,function(e){return i.value===e.value}),!o&&s.push(i),s.length<r.limit}),t&&t(s)}var r=this,i,s,o=!1;if(e.length<this.minLength)return;i=n.tokenizeQuery(e),s=this._getLocalSuggestions(i).slice(0,this.limit),s.length<this.limit&&this.transport&&(o=this.transport.get(e,u)),!o&&t&&t(s)}}),i}(),f=function(){function t(t){var r=this;n.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=e(t.hint),this.$input=e(t.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),n.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){if(r.specialKeyCodeMap[e.which||e.keyCode])return;n.defer(r._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(e,t){return e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e===t}return n.mixin(t.prototype,r,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(e){var t=this.specialKeyCodeMap[e.which||e.keyCode];t&&this.trigger(t+"Keyed",e)},_compareQueryToInputValue:function(){var e=this.query||[],t=this.getInputValue(),n=s(this.query,t),r=n?e.length!==t.length:!1;r?this.trigger("whitespaceChanged",{value:this.query}):n||this.trigger("queryChanged",{value:this.query=t})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),!t&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(e){this.$hint.val(e)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var e=this.$input.val().length,t=this.$input[0].selectionStart,r;return n.isNumber(t)?t===e:document.selection?(r=document.selection.createRange(),r.moveStart("character",-e),e===r.text.length):!0}}),t}(),l=function(){function s(t){n.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=e(t.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function o(e){return e.data("suggestion")}var t={suggestionsList:'<span class="tt-suggestions"></span>'},i={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return n.mixin(s.prototype,r,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(t){var n=e(t.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),n.addClass("tt-is-under-cursor")},_handleSelection:function(t){var n=e(t.currentTarget);this.trigger("suggestionSelected",o(n))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(e){var t,n,r,i;if(!this.isVisible())return;t=this._getSuggestions(),n=t.filter(".tt-is-under-cursor"),n.removeClass("tt-is-under-cursor"),r=t.index(n)+e,r=(r+1)%(t.length+1)-1;if(r===-1){this.trigger("cursorRemoved");return}r<-1&&(r=t.length-1),i=t.eq(r).addClass("tt-is-under-cursor"),this._ensureVisibility(i),this.trigger("cursorMoved",o(i))},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(e){var t=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),n=this.$menu.scrollTop(),r=e.position().top,i=r+e.outerHeight(!0);r<0?this.$menu.scrollTop(n+r):t<i&&this.$menu.scrollTop(n+(i-t))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){var t={left:"0",right:"auto"},n={left:"auto",right:" 0"};e==="ltr"?this.$menu.css(t):this.$menu.css(n)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var e=this._getSuggestions().filter(".tt-is-under-cursor").first();return e.length>0?o(e):null},getFirstSuggestion:function(){var e=this._getSuggestions().first();return e.length>0?o(e):null},renderSuggestions:function(r,s){var o="tt-dataset-"+r.name,u='<div class="tt-suggestion">%body</div>',a,f,l=this.$menu.find("."+o),c,h,p;l.length===0&&(f=e(t.suggestionsList).css(i.suggestionsList),l=e("<div></div>").addClass(o).append(r.header).append(f).append(r.footer).appendTo(this.$menu)),s.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),c=document.createElement("div"),h=document.createDocumentFragment(),n.each(s,function(t,n){n.dataset=r.name,a=r.template(n.datum),c.innerHTML=u.replace("%body",a),p=e(c.firstChild).css(i.suggestion).data("suggestion",n),p.children().each(function(){e(this).css(i.suggestionChild)}),h.appendChild(p[0])}),l.show().find(".tt-suggestions").html(h)):this.clearSuggestions(r.name),this.trigger("suggestionsRendered")},clearSuggestions:function(e){var t=e?this.$menu.find(".tt-dataset-"+e):this.$menu.find('[class^="tt-dataset-"]'),n=t.find(".tt-suggestions");t.hide(),n.empty(),this._getSuggestions().length===0&&(this.isEmpty=!0,this._hide())}}),s}(),c=function(){function s(e){var t,r,i;n.bindAll(this),this.$node=o(e.input),this.datasets=e.datasets,this.dir=null,this.eventBus=e.eventBus,t=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-query"),i=this.$node.find(".tt-hint"),this.dropdownView=(new l({menu:t})).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=(new f({input:r,hint:i})).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function o(n){var r=e(t.wrapper),s=e(t.dropdown),o=e(n),u=e(t.hint);r=r.css(i.wrapper),s=s.css(i.dropdown),u.css(i.hint).css({backgroundAttachment:o.css("background-attachment"),backgroundClip:o.css("background-clip"),backgroundColor:o.css("background-color"),backgroundImage:o.css("background-image"),backgroundOrigin:o.css("background-origin"),backgroundPosition:o.css("background-position"),backgroundRepeat:o.css("background-repeat"),backgroundSize:o.css("background-size")}),o.data("ttAttrs",{dir:o.attr("dir"),autocomplete:o.attr("autocomplete"),spellcheck:o.attr("spellcheck"),style:o.attr("style")}),o.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(i.query);try{!o.attr("dir")&&o.attr("dir","auto")}catch(a){}return o.wrap(r).parent().prepend(u).append(s)}function u(e){var t=e.find(".tt-query");n.each(t.data("ttAttrs"),function(e,r){n.isUndefined(r)?t.removeAttr(e):t.attr(e,r)}),t.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(e),e.remove()}var t={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},i={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return n.isMsie()&&n.mixin(i.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&(n.mixin(i.wrapper,{display:"inline",zoom:"1"}),n.mixin(i.query,{marginTop:"-1px"})),n.mixin(s.prototype,r,{_managePreventDefault:function(e){var t=e.data,n,r,i=!1;switch(e.type){case"tabKeyed":n=this.inputView.getHintValue(),r=this.inputView.getInputValue(),i=n&&n!==r;break;case"upKeyed"
:case"downKeyed":i=!t.shiftKey&&!t.ctrlKey&&!t.metaKey}i&&t.preventDefault()},_setLanguageDirection:function(){var e=this.inputView.getLanguageDirection();e!==this.dir&&(this.dir=e,this.$node.css("direction",e),this.dropdownView.setLanguageDirection(e))},_updateHint:function(){var e=this.dropdownView.getFirstSuggestion(),t=e?e.value:null,r=this.dropdownView.isVisible(),i=this.inputView.isOverflow(),s,o,u,a,f;t&&r&&!i&&(s=this.inputView.getInputValue(),o=s.replace(/\s{2,}/g," ").replace(/^\s+/g,""),u=n.escapeRegExChars(o),a=new RegExp("^(?:"+u+")(.*$)","i"),f=a.exec(t),this.inputView.setHintValue(s+(f?f[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(e){var t=e.data;this.inputView.setInputValue(t.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(e){this.dropdownView[e.type==="blured"?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(e){var t=e.data;!t.shiftKey&&!t.ctrlKey&&!t.metaKey&&this.dropdownView[e.type==="upKeyed"?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(e){var t=e.type==="suggestionSelected",r=t?e.data:this.dropdownView.getSuggestionUnderCursor();r&&(this.inputView.setInputValue(r.value),t?this.inputView.focus():e.data.preventDefault(),t&&n.isMsie()?n.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",r.datum,r.dataset))},_getSuggestions:function(){var e=this,t=this.inputView.getQuery();if(n.isBlankString(t))return;n.each(this.datasets,function(n,r){r.getSuggestions(t,function(n){t===e.inputView.getQuery()&&e.dropdownView.renderSuggestions(r,n)})})},_autocomplete:function(e){var t,n,r,i,s;if(e.type==="rightKeyed"||e.type==="leftKeyed"){t=this.inputView.isCursorAtEnd(),n=this.inputView.getLanguageDirection()==="ltr"?e.type==="leftKeyed":e.type==="rightKeyed";if(!t||n)return}r=this.inputView.getQuery(),i=this.inputView.getHintValue(),i!==""&&r!==i&&(s=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.datum,s.dataset))},_propagateEvent:function(e){this.eventBus.trigger(e.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),u(this.$node),this.$node=null},setQuery:function(e){this.inputView.setQuery(e),this.inputView.setInputValue(e),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),s}();(function(){var t={},r="ttView",s;s={initialize:function(s){function u(){var t=e(this),s,u=new i({el:t});s=n.map(o,function(e){return e.initialize()}),t.data(r,new c({input:t,eventBus:u=new i({el:t}),datasets:o})),e.when.apply(e,s).always(function(){n.defer(function(){u.trigger("initialized")})})}var o;return s=n.isArray(s)?s:[s],s.length===0&&e.error("no datasets provided"),o=n.map(s,function(e){var n=t[e.name]?t[e.name]:new a(e);return e.name&&(t[e.name]=n),n}),this.each(u)},destroy:function(){function t(){var t=e(this),n=t.data(r);n&&(n.destroy(),t.removeData(r))}return this.each(t)},setQuery:function(t){function n(){var n=e(this).data(r);n&&n.setQuery(t)}return this.each(n)}},jQuery.fn.typeahead=function(e){return s[e]?s[e].apply(this,[].slice.call(arguments,1)):s.initialize.apply(this,arguments)}})()}(window.jQuery),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function m(e,t){var n=!1,r;while((r=e.next())!=null){if(n&&r=="/"){t.tokenize=null;break}n=r=="*"}return["comment","comment"]}function g(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,n){function v(e,t){return p=t,e}function m(e,t){var n=e.next();if(i[n]){var r=i[n](e,t);if(r!==!1)return r}if(n=="@")return e.eatWhile(/[\w\\\-]/),v("def",e.current());if(n=="="||(n=="~"||n=="|")&&e.eat("="))return v(null,"compare");if(n=='"'||n=="'")return t.tokenize=g(n),t.tokenize(e,t);if(n=="#")return e.eatWhile(/[\w\\\-]/),v("atom","hash");if(n=="!")return e.match(/^\s*\w*/),v("keyword","important");if(/\d/.test(n)||n=="."&&e.eat(/\d/))return e.eatWhile(/[\w.%]/),v("number","unit");if(n!=="-")return/[,+>*\/]/.test(n)?v(null,"select-op"):n=="."&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?v("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?v(null,n):n=="u"&&e.match("rl(")?(e.backUp(1),t.tokenize=y,v("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),v("property","word")):v(null,null);if(/[\d.]/.test(e.peek()))return e.eatWhile(/[\w.%]/),v("number","unit");if(e.match(/^\w+-/))return v("meta","meta")}function g(e){return function(t,n){var r=!1,i;while((i=t.next())!=null){if(i==e&&!r){e==")"&&t.backUp(1);break}r=!r&&i=="\\"}if(i==e||!r&&e!=")")n.tokenize=null;return v("string","string")}}function y(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=g(")"),v(null,"(")}function b(e,t,n){this.type=e,this.indent=t,this.prev=n}function w(e,t,n){return e.context=new b(n,t.indentation()+r,e.context),n}function E(e){return e.context=e.context.prev,e.context.type}function S(e,t,n){return N[n.context.type](e,t,n)}function x(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return S(e,t,n)}function T(e){var t=e.current().toLowerCase();l.hasOwnProperty(t)?d="atom":f.hasOwnProperty(t)?d="keyword":d="variable"}n.propertyKeywords||(n=e.resolveMode("text/css"));var r=t.indentUnit,i=n.tokenHooks,s=n.mediaTypes||{},o=n.mediaFeatures||{},u=n.propertyKeywords||{},a=n.nonStandardPropertyKeywords||{},f=n.colorKeywords||{},l=n.valueKeywords||{},c=n.fontProperties||{},h=n.allowNested,p,d,N={};return N.top=function(e,t,n){if(e=="{")return w(n,t,"block");if(e=="}"&&n.context.prev)return E(n);if(e=="@media")return w(n,t,"media");if(e=="@font-face")return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&e.charAt(0)=="@")return w(n,t,"at");if(e=="hash")d="builtin";else if(e=="word")d="tag";else{if(e=="variable-definition")return"maybeprop";if(e=="interpolation")return w(n,t,"interpolation");if(e==":")return"pseudo";if(h&&e=="(")return w(n,t,"parens")}return n.context.type},N.block=function(e,t,n){if(e=="word"){var r=t.current().toLowerCase();return u.hasOwnProperty(r)?(d="property","maybeprop"):a.hasOwnProperty(r)?(d="string-2","maybeprop"):h?(d=t.match(/^\s*:/,!1)?"property":"tag","block"):(d+=" error","maybeprop")}return e=="meta"?"block":!!h||e!="hash"&&e!="qualifier"?N.top(e,t,n):(d="error","block")},N.maybeprop=function(e,t,n){return e==":"?w(n,t,"prop"):S(e,t,n)},N.prop=function(e,t,n){if(e==";")return E(n);if(e=="{"&&h)return w(n,t,"propBlock");if(e=="}"||e=="{")return x(e,t,n);if(e=="(")return w(n,t,"parens");if(e=="hash"&&!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current()))d+=" error";else if(e=="word")T(t);else if(e=="interpolation")return w(n,t,"interpolation");return"prop"},N.propBlock=function(e,t,n){return e=="}"?E(n):e=="word"?(d="property","maybeprop"):n.context.type},N.parens=function(e,t,n){return e=="{"||e=="}"?x(e,t,n):e==")"?E(n):e=="("?w(n,t,"parens"):(e=="word"&&T(t),"parens")},N.pseudo=function(e,t,n){return e=="word"?(d="variable-3",n.context.type):S(e,t,n)},N.media=function(e,t,n){if(e=="(")return w(n,t,"media_parens");if(e=="}")return x(e,t,n);if(e=="{")return E(n)&&w(n,t,h?"block":"top");if(e=="word"){var r=t.current().toLowerCase();r=="only"||r=="not"||r=="and"?d="keyword":s.hasOwnProperty(r)?d="attribute":o.hasOwnProperty(r)?d="property":d="error"}return n.context.type},N.media_parens=function(e,t,n){return e==")"?E(n):e=="{"||e=="}"?x(e,t,n,2):N.media(e,t,n)},N.font_face_before=function(e,t,n){return e=="{"?w(n,t,"font_face"):S(e,t,n)},N.font_face=function(e,t,n){return e=="}"?E(n):e=="word"?(c.hasOwnProperty(t.current().toLowerCase())?d="property":d="error","maybeprop"):"font_face"},N.keyframes=function(e,t,n){return e=="word"?(d="variable","keyframes"):e=="{"?w(n,t,"top"):S(e,t,n)},N.at=function(e,t,n){return e==";"?E(n):e=="{"||e=="}"?x(e,t,n):(e=="word"?d="tag":e=="hash"&&(d="builtin"),"at")},N.interpolation=function(e,t,n){return e=="}"?E(n):e=="{"||e==";"?x(e,t,n):(e!="variable"&&(d="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new b("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||m)(e,t);return n&&typeof n=="object"&&(p=n[1],n=n[0]),d=n,t.state=N[t.state](p,e,t),d},indent:function(e,t){var n=e.context,i=t&&t.charAt(0),s=n.indent;return n.type=="prop"&&(i=="}"||i==")")&&(n=n.prev),n.prev&&(i=="}"&&(n.type=="block"||n.type=="top"||n.type=="interpolation"||n.type=="font_face")||i==")"&&(n.type=="parens"||n.type=="media_parens")||i=="{"&&(n.type=="at"||n.type=="media"))&&(s=n.indent-r,n=n.prev),s},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var n=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],r=t(n),i=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],s=t(i),o=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],u=t(o),a=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],a=t(a),f=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],l=t(f),c=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],h=t(c),p=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],d=t(p),v=n.concat(i).concat(o).concat(a).concat(f).concat(c);e.registerHelper("hintWords","css",v),e.defineMIME("text/css",{mediaTypes:r,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:a,colorKeywords:l,valueKeywords:h,fontProperties:d,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=g,g(e,t)):!1},"/":function(e,t){return e.eat("*")?(t.tokenize=m,m(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:r,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:a,colorKeywords:l,valueKeywords:h,fontProperties:d,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=m,m(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:r,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:a,colorKeywords:l,valueKeywords:h,fontProperties:d,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=m,m(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,n){function l(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if(r=="<")return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(p("atom","]]>")):null:e.match("--")?n(p("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(d(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=p("meta","?>"),"meta"):(a=e.eat("/")?"closeTag":"openTag",t.tokenize=c,"tag bracket");if(r=="&"){var i;return e.eat("#")?e.eat("x")?i=e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):i=e.eatWhile(/[\d]/)&&e.eat(";"):i=e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),i?"atom":"error"}return e.eatWhile(/[^&<]/),null}function c(e,t){var n=e.next();if(n==">"||n=="/"&&e.eat(">"))return t.tokenize=l,a=n==">"?"endTag":"selfcloseTag","tag bracket";if(n=="=")return a="equals",null;if(n=="<"){t.tokenize=l,t.state=y,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=h(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(e){var t=function(t,n){while(!t.eol())if(t.next()==e){n.tokenize=c;break}return"string"};return t.isInAttribute=!0,t}function p(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=l;break}n.next()}return e}}function d(e){return function(t,n){var r;while((r=t.next())!=null){if(r=="<")return n.tokenize=d(e+1),n.tokenize(t,n);if(r==">"){if(e==1){n.tokenize=l;break}return n.tokenize=d(e-1),n.tokenize(t,n)}}return"meta"}}function v(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n;if(o.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)this.noIndent=!0}function m(e){e.context&&(e.context=e.context.prev)}function g(e,t){var n;for(;;){if(!e.context)return;n=e.context.tagName;if(!o.contextGrabbers.hasOwnProperty(n)||!o.contextGrabbers[n].hasOwnProperty(t))return;m(e)}}function y(e,t,n){return e=="openTag"?(n.tagStart=t.column(),b):e=="closeTag"?w:y}function b(e,t,n){return e=="word"?(n.tagName=t.current(),f="tag",x):(f="error",b)}function w(e,t,n){if(e=="word"){var r=t.current();return n.context&&n.context.tagName!=r&&o.implicitlyClosed.hasOwnProperty(n.context.tagName)&&m(n),n.context&&n.context.tagName==r?(f="tag",E):(f="tag error",S)}return f="error",S}function E(e,t,n){return e!="endTag"?(f="error",E):(m(n),y)}function S(e,t,n){return f="error",E(e,t,n)}function x(e,t,n){if(e=="word")return f="attribute",T;if(e=="endTag"||e=="selfcloseTag"){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,e=="selfcloseTag"||o.autoSelfClosers.hasOwnProperty(r)?g(n,r):(g(n,r),n.context=new v(n,r,i==n.indented)),y}return f="error",x}function T(e,t,n){return e=="equals"?N:(o.allowMissing||(f="error"),x(e,t,n))}function N(e,t,n){return e=="string"?C:e=="word"&&o.allowUnquoted?(f="string",x):(f="error",x(e,t,n))}function C(e,t,n){return e=="string"?C:x(e,t,n)}var r=t.indentUnit,i=n.multilineTagIndentFactor||1,s=n.multilineTagIndentPastTag;s==null&&(s=!0);var o=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},u=n.alignCDATA,a,f;return{startState:function(){return{tokenize:l,state:y,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){!t.tagName&&e.sol()&&(t.indented=e.indentation());if(e.eatSpace())return null;a=null;var n=t.tokenize(e,t);return(n||a)&&n!="comment"&&(f=null,t.state=t.state(a||n,e,t),f&&(n=f=="error"?n+" error":f)),n},indent:function(t,n,a){var f=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+r;if(f&&f.noIndent)return e.Pass;if(t.tokenize!=c&&t.tokenize!=l)return a?a.match(/^(\s*)/)[0].length:0;if(t.tagName)return s?t.tagStart+t.tagName.length+2:t.tagStart+r*i;if(u&&/<!\[CDATA\[/.test(n))return 0;var h=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(h&&h[1])while(f){if(f.tagName==h[2]){f=f.prev;break}if(!o.implicitlyClosed.hasOwnProperty(f.tagName))break;f=f.prev}else if(h)while(f){var p=o.contextGrabbers[f.tagName];if(!p||!p.hasOwnProperty(h[2]))break;f=f.prev}while(f&&!f.startOfLine)f=f.prev;return f?f.indent+r:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,n){function c(e){var t=!1,n,r=!1;while((n=e.next())!=null){if(!t){if(n=="/"&&!r)return;n=="["?r=!0:r&&n=="]"&&(r=!1)}t=!t&&n=="\\"}}function d(e,t,n){return h=e,p=n,t}function v(e,t){var n=e.next();if(n=='"'||n=="'")return t.tokenize=m(n),t.tokenize(e,t);if(n=="."&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return d("number","number");if(n=="."&&e.match(".."))return d("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return d(n);if(n=="="&&e.eat(">"))return d("=>","operator");if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),d("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),d("number","number");if(n=="/")return e.eat("*")?(t.tokenize=g,g(e,t)):e.eat("/")?(e.skipToEnd(),d("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||t.lastType=="sof"||/^[\[{}\(,;:]$/.test(t.lastType)?(c(e),e.eatWhile(/[gimy]/),d("regexp","string-2")):(e.eatWhile(f),d("operator","operator",e.current()));if(n=="`")return t.tokenize=y,y(e,t);if(n=="#")return e.skipToEnd(),d("error","error");if(f.test(n))return e.eatWhile(f),d("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),i=a.propertyIsEnumerable(r)&&a[r];return i&&t.lastType!="."?d(i.type,i.style,r):d("variable","variable",r)}function m(e){return function(t,n){var r=!1,i;if(s&&t.peek()=="@"&&t.match(l))return n.tokenize=v,d("jsonld-keyword","meta");while((i=t.next())!=null){if(i==e&&!r)break;r=!r&&i=="\\"}return r||(n.tokenize=v),d("string","string")}}function g(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=v;break}n=r=="*"}return d("comment","comment")}function y(e,t){var n=!1,r;while((r=e.next())!=null){if(!n&&(r=="`"||r=="$"&&e.eat("{"))){t.tokenize=v;break}n=!n&&r=="\\"}return d("quasi","string-2",e.current())}function w(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(n<0)return;var r=0,i=!1;for(var s=n-1;s>=0;--s){var o=e.string.charAt(s),u=b.indexOf(o);if(u>=0&&u<3){if(!r){++s;break}if(--r==0)break}else if(u>=3&&u<6)++r;else if(/[$\w]/.test(o))i=!0;else if(i&&!r){++s;break}}i&&!r&&(t.fatArrowAt=s)}function S(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function x(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function T(e,t,n,r,i){var s=e.cc;N.state=e
,N.stream=i,N.marked=null,N.cc=s,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=s.length?s.pop():o?B:H;if(u(n,r)){while(s.length&&s[s.length-1].lex)s.pop()();return N.marked?N.marked:n=="variable"&&x(e,r)?"variable-2":t}}}function C(){for(var e=arguments.length-1;e>=0;e--)N.cc.push(arguments[e])}function k(){return C.apply(null,arguments),!0}function L(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var r=N.state;if(r.context){N.marked="def";if(t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function O(){N.state.context={prev:N.state.context,vars:N.state.localVars},N.state.localVars=A}function M(){N.state.localVars=N.state.context.vars,N.state.context=N.state.context.prev}function _(e,t){var n=function(){var n=N.state,r=n.indented;n.lexical.type=="stat"&&(r=n.lexical.indented),n.lexical=new S(r,N.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function D(){var e=N.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function P(e){function t(n){return n==e?k():e==";"?C():k(t)}return t}function H(e,t){return e=="var"?k(_("vardef",t.length),rt,P(";"),D):e=="keyword a"?k(_("form"),B,H,D):e=="keyword b"?k(_("form"),H,D):e=="{"?k(_("}"),et,D):e==";"?k():e=="if"?(N.state.lexical.info=="else"&&N.state.cc[N.state.cc.length-1]==D&&N.state.cc.pop()(),k(_("form"),B,H,D,at)):e=="function"?k(dt):e=="for"?k(_("form"),ft,H,D):e=="variable"?k(_("stat"),$):e=="switch"?k(_("form"),B,_("}","switch"),P("{"),et,D,D):e=="case"?k(B,P(":")):e=="default"?k(P(":")):e=="catch"?k(_("form"),O,P("("),vt,P(")"),H,D,M):e=="module"?k(_("form"),O,bt,M,D):e=="class"?k(_("form"),mt,yt,D):e=="export"?k(_("form"),wt,D):e=="import"?k(_("form"),Et,D):C(_("stat"),B,P(";"),D)}function B(e){return F(e,!1)}function j(e){return F(e,!0)}function F(e,t){if(N.state.fatArrowAt==N.stream.start){var n=t?V:X;if(e=="(")return k(O,_(")"),Y(it,")"),D,P("=>"),n,M);if(e=="variable")return C(O,it,P("=>"),n,M)}var r=t?U:R;return E.hasOwnProperty(e)?k(r):e=="function"?k(dt,r):e=="keyword c"?k(t?q:I):e=="("?k(_(")"),I,Ct,P(")"),D,r):e=="operator"||e=="spread"?k(t?j:B):e=="["?k(_("]"),Tt,D,r):e=="{"?Z(K,"}",null,r):e=="quasi"?C(z,r):k()}function I(e){return e.match(/[;\}\)\],]/)?C():C(B)}function q(e){return e.match(/[;\}\)\],]/)?C():C(j)}function R(e,t){return e==","?k(B):U(e,t,!1)}function U(e,t,n){var r=n==0?R:U,i=n==0?B:j;if(t=="=>")return k(O,n?V:X,M);if(e=="operator")return/\+\+|--/.test(t)?k(r):t=="?"?k(B,P(":"),i):k(i);if(e=="quasi")return C(z,r);if(e==";")return;if(e=="(")return Z(j,")","call",r);if(e==".")return k(J,r);if(e=="[")return k(_("]"),I,P("]"),D,r)}function z(e,t){return e!="quasi"?C():t.slice(t.length-2)!="${"?k(z):k(B,W)}function W(e){if(e=="}")return N.marked="string-2",N.state.tokenize=y,k(z)}function X(e){return w(N.stream,N.state),e=="{"?C(H):C(B)}function V(e){return w(N.stream,N.state),e=="{"?C(H):C(j)}function $(e){return e==":"?k(D,H):C(R,P(";"),D)}function J(e){if(e=="variable")return N.marked="property",k()}function K(e,t){if(e=="variable"){N.marked="property";if(t=="get"||t=="set")return k(Q)}else if(e=="number"||e=="string")N.marked=s?"property":e+" property";else if(e=="[")return k(B,P("]"),G);if(E.hasOwnProperty(e))return k(G)}function Q(e){return e!="variable"?C(G):(N.marked="property",k(dt))}function G(e){if(e==":")return k(j);if(e=="(")return C(dt)}function Y(e,t){function n(r){if(r==","){var i=N.state.lexical;return i.info=="call"&&(i.pos=(i.pos||0)+1),k(e,n)}return r==t?k():k(P(t))}return function(r){return r==t?k():C(e,n)}}function Z(e,t,n){for(var r=3;r<arguments.length;r++)N.cc.push(arguments[r]);return k(_(t,n),Y(e,t),D)}function et(e){return e=="}"?k():C(H,et)}function tt(e){if(u&&e==":")return k(nt)}function nt(e){if(e=="variable")return N.marked="variable-3",k()}function rt(){return C(it,tt,ot,ut)}function it(e,t){if(e=="variable")return L(t),k();if(e=="[")return Z(it,"]");if(e=="{")return Z(st,"}")}function st(e,t){return e=="variable"&&!N.stream.match(/^\s*:/,!1)?(L(t),k(ot)):(e=="variable"&&(N.marked="property"),k(P(":"),it,ot))}function ot(e,t){if(t=="=")return k(j)}function ut(e){if(e==",")return k(rt)}function at(e,t){if(e=="keyword b"&&t=="else")return k(_("form","else"),H,D)}function ft(e){if(e=="(")return k(_(")"),lt,P(")"),D)}function lt(e){return e=="var"?k(rt,P(";"),ht):e==";"?k(ht):e=="variable"?k(ct):C(B,P(";"),ht)}function ct(e,t){return t=="in"||t=="of"?(N.marked="keyword",k(B)):k(R,ht)}function ht(e,t){return e==";"?k(pt):t=="in"||t=="of"?(N.marked="keyword",k(B)):C(B,P(";"),pt)}function pt(e){e!=")"&&k(B)}function dt(e,t){if(t=="*")return N.marked="keyword",k(dt);if(e=="variable")return L(t),k(dt);if(e=="(")return k(O,_(")"),Y(vt,")"),D,H,M)}function vt(e){return e=="spread"?k(vt):C(it,tt)}function mt(e,t){if(e=="variable")return L(t),k(gt)}function gt(e,t){if(t=="extends")return k(B)}function yt(e){if(e=="{")return Z(K,"}")}function bt(e,t){if(e=="string")return k(H);if(e=="variable")return L(t),k(xt)}function wt(e,t){return t=="*"?(N.marked="keyword",k(xt,P(";"))):t=="default"?(N.marked="keyword",k(B,P(";"))):C(H)}function Et(e){return e=="string"?k():C(St,xt)}function St(e,t){return e=="{"?Z(St,"}"):(e=="variable"&&L(t),k())}function xt(e,t){if(t=="from")return N.marked="keyword",k(B)}function Tt(e){return e=="]"?k():C(j,Nt)}function Nt(e){return e=="for"?C(Ct,P("]")):e==","?k(Y(j,"]")):C(Y(j,"]"))}function Ct(e){if(e=="for")return k(ft,Ct);if(e=="if")return k(B,Ct)}var r=t.indentUnit,i=n.statementIndent,s=n.jsonld,o=n.json||s,u=n.typescript,a=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),s={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"debugger":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":s,"false":s,"null":s,"undefined":s,NaN:s,Infinity:s,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),yield:r,"export":e("export"),"import":e("import"),"extends":r};if(u){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:a,number:a,bool:a,any:a};for(var l in f)o[l]=f[l]}return o}(),f=/[+\-*&%=<>!?|~^]/,l=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,h,p,b="([{}])",E={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},N={state:null,column:null,marked:null,cc:null},A={name:"this",next:{name:"arguments"}};return D.lex=!0,{startState:function(e){var t={tokenize:v,lastType:"sof",cc:[],lexical:new S((e||0)-r,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&typeof n.globalVars=="object"&&(t.globalVars=n.globalVars),t},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),w(e,t));if(t.tokenize!=g&&e.eatSpace())return null;var n=t.tokenize(e,t);return h=="comment"?n:(t.lastType=h!="operator"||p!="++"&&p!="--"?h:"incdec",T(t,n,h,p,e))},indent:function(t,s){if(t.tokenize==g)return e.Pass;if(t.tokenize!=v)return 0;var o=s&&s.charAt(0),u=t.lexical;if(!/^\s*else\b/.test(s))for(var a=t.cc.length-1;a>=0;--a){var f=t.cc[a];if(f==D)u=u.prev;else if(f!=at)break}u.type=="stat"&&o=="}"&&(u=u.prev),i&&u.type==")"&&u.prev.type=="stat"&&(u=u.prev);var l=u.type,c=o==l;return l=="vardef"?u.indented+(t.lastType=="operator"||t.lastType==","?u.info+1:0):l=="form"&&o=="{"?u.indented:l=="form"?u.indented+r:l=="stat"?u.indented+(t.lastType=="operator"||t.lastType==","?i||r:0):u.info=="switch"&&!c&&n.doubleIndentSwitch!=0?u.indented+(/^(?:case|default)\b/.test(s)?r:2*r):u.align?u.column+(c?0:1):u.indented+(c?0:r)},electricChars:":{}",blockCommentStart:o?null:"/*",blockCommentEnd:o?null:"*/",lineComment:o?null:"//",fold:"brace",helperType:o?"json":"javascript",jsonldMode:s,jsonMode:o}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});